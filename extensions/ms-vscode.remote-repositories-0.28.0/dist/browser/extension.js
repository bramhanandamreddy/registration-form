var Kl=Object.defineProperty;var o=(ho,Ua)=>Kl(ho,"name",{value:Ua,configurable:!0});(()=>{var ho={326:(At,l,T)=>{"use strict";T.r(l),T.d(l,{AppInsightsCore:()=>oe,BaseCore:()=>Z,BaseTelemetryPlugin:()=>Rt.i,CoreUtils:()=>X.Tr,DiagnosticLogger:()=>_e.AQ,ESPromise:()=>We,ESPromiseScheduler:()=>Se,EventHelper:()=>$.zB,EventLatency:()=>U,EventPersistence:()=>ke,EventPropertyType:()=>J,EventsDiscardedReason:()=>$e.h,FullVersionString:()=>X.vs,InternalAppInsightsCore:()=>ae.F,InternalBaseCore:()=>Q.A,LoggingSeverity:()=>S.X,MinChannelPriorty:()=>Ae,NotificationManager:()=>qe.f,PerfEvent:()=>Ie.zn,PerfManager:()=>Ie.Jk,ProcessTelemetryContext:()=>nt.Vi,TraceLevel:()=>Fe,Undefined:()=>ue.jA,Utils:()=>X.cQ,ValueKind:()=>B,ValueSanitizer:()=>Re,Version:()=>X.Gf,_ExtendedInternalMessageId:()=>Pe,_InternalLogMessage:()=>_e.lQ,_InternalMessageId:()=>S.v,__getRegisteredEvents:()=>pe.um,_logInternalMessage:()=>_e.L4,_throwInternal:()=>_e.kP,_warnToConsole:()=>_e.jV,addEventHandler:()=>pe.Ib,addEventListeners:()=>pe.yw,addPageHideEventListener:()=>pe.TJ,addPageShowEventListener:()=>pe.nD,addPageUnloadEventListener:()=>pe.c9,areCookiesSupported:()=>Ge.p7,arrForEach:()=>M.tO,arrIndexOf:()=>M.UA,arrMap:()=>M.Mr,arrReduce:()=>M.Xz,attachEvent:()=>pe.pZ,cookieAvailable:()=>Ge.p7,createCookieMgr:()=>Ge.Nz,createEnumStyle:()=>w.By,createGuid:()=>X.cm,createProcessTelemetryContext:()=>nt.CD,createTraceParent:()=>ve.SU,createUniqueNamespace:()=>at.J,createUnloadHandlerContainer:()=>ne.Y,dateNow:()=>M.m6,deleteCookie:()=>X.kT,detachEvent:()=>pe.pD,disableCookies:()=>X.oF,disallowsSameSiteNone:()=>Ge.UY,doPerf:()=>Ie.Lm,dumpObj:()=>fe.eU,eventOff:()=>pe.QY,eventOn:()=>pe.XO,extend:()=>X.l7,findW3cTraceParent:()=>ve.lq,formatTraceParent:()=>ve.aR,generateW3CId:()=>$.DO,getCommonSchemaMetaData:()=>X.Vv,getConsole:()=>fe.dr,getCookie:()=>X.ej,getCookieValue:()=>X.Do,getCrypto:()=>fe.MX,getDocument:()=>fe.Me,getExceptionName:()=>M.jj,getFieldValueType:()=>X.Sy,getGlobal:()=>Je.Rd,getGlobalInst:()=>fe.a8,getHistory:()=>fe.s1,getIEVersion:()=>fe.sA,getISOString:()=>M.Y6,getJSON:()=>fe.xA,getLocation:()=>fe.k$,getMsCrypto:()=>fe.gz,getNavigator:()=>fe.jW,getPerformance:()=>fe.r,getSetValue:()=>M.qK,getTenantId:()=>X.jM,getTime:()=>X.hK,getWindow:()=>fe.Jj,hasDocument:()=>fe.Nv,hasHistory:()=>fe.fE,hasJSON:()=>fe.nS,hasNavigator:()=>fe.d6,hasOwnProperty:()=>M.nr,hasWindow:()=>fe.Ym,isArray:()=>M.kJ,isArrayValid:()=>X.JT,isBeaconsSupported:()=>fe.MF,isBoolean:()=>M.jn,isChromium:()=>X.mJ,isDate:()=>M.J_,isDocumentObjectAvailable:()=>X.x9,isError:()=>M.VZ,isFetchSupported:()=>fe.JO,isFunction:()=>M.mf,isIE:()=>fe.w1,isLatency:()=>X.r7,isNotTruthy:()=>M.F,isNullOrUndefined:()=>M.le,isNumber:()=>M.hj,isObject:()=>M.Kn,isReactNative:()=>fe.b$,isSampledFlag:()=>ve.Pn,isString:()=>M.HD,isTruthy:()=>M.fQ,isTypeof:()=>M.Ym,isUint8ArrayAvailable:()=>X.IZ,isUndefined:()=>M.o8,isValidSpanId:()=>ve.Lc,isValidTraceId:()=>ve.jN,isValidTraceParent:()=>ve.J6,isValueAssigned:()=>X.Sn,isValueKind:()=>X.oS,isWindowObjectAvailable:()=>X.dH,isXhrSupported:()=>fe.Z3,mergeEvtNamespace:()=>pe.jU,newGuid:()=>$.GW,newId:()=>j.pZ,normalizeJsName:()=>M.Gf,objCreate:()=>Je.pu,objDefineAccessors:()=>M.l_,objForEachKey:()=>M.rW,objFreeze:()=>M.FL,objKeys:()=>M.FY,objSeal:()=>M.Xi,openXhr:()=>X.ot,optimizeObject:()=>M.Ax,parseTraceParent:()=>ve.j_,perfNow:()=>$.Jj,proxyAssign:()=>M.cf,proxyFunctionAs:()=>M.Oi,proxyFunctions:()=>M.Vb,random32:()=>j._l,randomValue:()=>j.az,removeEventHandler:()=>pe.C1,removeEventListeners:()=>pe.nJ,removePageHideEventListener:()=>pe.C9,removePageShowEventListener:()=>pe.Yl,removePageUnloadEventListener:()=>pe.JA,safeGetCookieMgr:()=>Ge.JP,safeGetLogger:()=>_e.vH,sanitizeProperty:()=>X.yj,setCookie:()=>X.d8,setEnableEnvMocks:()=>fe.dI,setProcessTelemetryTimings:()=>X.if,setValue:()=>M.sO,strContains:()=>M._Q,strEndsWith:()=>M.Id,strFunction:()=>ue.cb,strObject:()=>ue.fK,strPrototype:()=>ue.hB,strStartsWith:()=>M.xe,strTrim:()=>M.nd,strUndefined:()=>ue.jA,throwError:()=>M._y,toISOString:()=>M.Y6,useXDomainRequest:()=>fe.cp});var R=T(88),w=T(873),M=T(708),S=T(310),B=(0,w.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),U=(0,w.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),J=(0,w.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),ke=(0,w.By)({Normal:1,Critical:2}),Fe=(0,w.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Pe=(0,M.FL)((0,R.uc)((0,R.uc)({},S.v),(0,w.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),F=T(679),_e=T(18),Ie=T(288),fe=T(630),ae=T(121),ze=T(984),X=T(599),Te=function(ee){(0,R.ne)(W,ee);function W(){var me=ee.call(this)||this;return me.pluginVersionStringArr=[],(0,F.Z)(W,me,function(ge,vt){(!ge.logger||!ge.logger.queue)&&(ge.logger=new _e.AQ({loggingLevelConsole:1})),ge.initialize=function(Ce,D,I,Oe){(0,Ie.Lm)(ge,function(){return"AppInsightsCore.initialize"},function(){var St=ge.pluginVersionStringArr;if(Ce){Ce.endpointUrl||(Ce.endpointUrl=ze.YT);var ht=Ce.propertyStorageOverride;ht&&(!ht.getProperty||!ht.setProperty)&&(0,M._y)("Invalid property storage override passed."),Ce.channels&&(0,M.tO)(Ce.channels,function(Dt){Dt&&(0,M.tO)(Dt,function(bt){if(bt.identifier&&bt.version){var hn=bt.identifier+"="+bt.version;St.push(hn)}})})}ge.getWParam=function(){return typeof document!="undefined"||!!Ce.enableWParam?0:-1},D&&(0,M.tO)(D,function(Dt){if(Dt&&Dt.identifier&&Dt.version){var bt=Dt.identifier+"="+Dt.version;St.push(bt)}}),ge.pluginVersionString=St.join(";"),ge.pluginVersionStringArr=St;try{vt.initialize(Ce,D,I,Oe),ge.pollInternalLogs("InternalLog")}catch(Dt){var Ft=ge.logger,st=(0,fe.eU)(Dt);st.indexOf("channels")!==-1&&(st+=`
 - Channels must be provided through config.channels only!`),(0,_e.kP)(Ft,1,514,"SDK Initialization Failed - no telemetry will be sent: "+st)}},function(){return{config:Ce,extensions:D,logger:I,notificationManager:Oe}})},ge.track=function(Ce){(0,Ie.Lm)(ge,function(){return"AppInsightsCore.track"},function(){var D=Ce;if(D){D.timings=D.timings||{},D.timings.trackStart=(0,X.hK)(),(0,X.r7)(D.latency)||(D.latency=1);var I=D.ext=D.ext||{};I.sdk=I.sdk||{},I.sdk.ver=X.vs;var Oe=D.baseData=D.baseData||{};Oe[ze.o6]=Oe[ze.o6]||{};var St=Oe[ze.o6];St[ze.p8]=St[ze.p8]||ge.pluginVersionString||ze.qS}vt.track(D)},function(){return{item:Ce}},!Ce.sync)}}),me}return o(W,"AppInsightsCore"),W.__ieDyn=1,W}(ae.F);const oe=Te;var Q=T(900),z=function(ee){(0,R.ne)(W,ee);function W(){var me=ee.call(this)||this;return(0,F.Z)(W,me,function(ge,vt){ge.initialize=function(Ce,D,I,Oe){Ce&&!Ce.endpointUrl&&(Ce.endpointUrl=ze.YT),ge.getWParam=function(){return X.x9||!!Ce.enableWParam?0:-1};try{vt.initialize(Ce,D,I,Oe)}catch(St){(0,_e.kP)(ge.logger,1,514,"Initialization Failed: "+(0,fe.eU)(St)+`
 - Note: Channels must be provided through config.channels only`)}},ge.track=function(Ce){var D=Ce;if(D){var I=D.ext=D.ext||{};I.sdk=I.sdk||{},I.sdk.ver=X.vs}vt.track(D)}}),me}return o(W,"BaseCore"),W.__ieDyn=1,W}(Q.A);const Z=z;var se=M.mf;function Ke(ee,W,me){return function(ge){ee[W]=ge,me()}}o(Ke,"_createPromiseAllOnResolvedFunction");var xe=function(){function ee(W){var me=0,ge=null,vt=[];(0,F.Z)(ee,this,function(St){St.then=function(ht,Ft){return new ee(function(st,Dt){Ce(ht,Ft,st,Dt)})},St.catch=function(ht){return St.then(null,ht)}});function Ce(St,ht,Ft,st){vt.push(function(){var Dt;try{me===1?Dt=se(St)?St(ge):ge:Dt=se(ht)?ht(ge):ge,Dt instanceof ee?Dt.then(Ft,st):me===2&&!se(ht)?st(Dt):Ft(Dt)}catch(bt){st(bt);return}}),me!==0&&D()}o(Ce,"_enqueue");function D(){if(vt.length>0){var St=vt.slice();vt=[],setTimeout(function(){for(var ht=0,Ft=St.length;ht<Ft;++ht)try{St[ht]()}catch(st){}},0)}}o(D,"_processQueue");function I(St){me===0&&(ge=St,me=1,D())}o(I,"_resolve");function Oe(St){me===0&&(ge=St,me=2,D())}o(Oe,"_reject"),o(function(){if(!se(W))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{W(I,Oe)}catch(ht){Oe(ht)}},"_initialize")()}return o(ee,"ESPromise"),ee.resolve=function(W){return W instanceof ee?W:W&&se(W.then)?new ee(function(me,ge){try{W.then(me,ge)}catch(vt){ge(vt)}}):new ee(function(me){me(W)})},ee.reject=function(W){return new ee(function(me,ge){ge(W)})},ee.all=function(W){if(!(!W||!W.length))return new ee(function(me,ge){try{for(var vt=[],Ce=0,D=0;D<W.length;D++){var I=W[D];I&&se(I.then)?(Ce++,I.then(Ke(vt,D,function(){--Ce==0&&me(vt)}),ge)):vt[D]=I}Ce===0&&setTimeout(function(){me(vt)},0)}catch(Oe){ge(Oe)}})},ee.race=function(W){return new ee(function(me,ge){if(!(!W||!W.length))try{for(var vt=o(function(D){var I=W[D];I&&se(I.then)?I.then(me,ge):setTimeout(function(){me(I)},0)},"_loop_1"),Ce=0;Ce<W.length;Ce++)vt(Ce)}catch(D){ge(D)}})},ee}();const We=xe;var Je=T(91),Y=6e5,E=0,Ne=[],He=[],Ue=[];function re(){return new Date().getTime()}o(re,"_getTime");var L=function(){function ee(W,me){var ge=0,vt=(W||"<unnamed>")+"."+E;E++,(0,F.Z)(ee,this,function(I){var Oe=null,St=0;I.scheduleEvent=function(Ft,st,Dt){var bt=vt+"."+St;St++,st&&(bt+="-("+st+")");var hn=bt+"{"+ge+"}";ge++;var mn={evt:null,tm:re(),id:hn,isRunning:!1,isAborted:!1};return Oe?mn.evt=nn(mn,Oe):mn.evt=Pt(mn),Oe=mn,Oe.evt._schId=hn,mn.evt;function Dn(it){for(var rn=re(),ln=rn-Y,cn=it.length,en=0;en<cn;){var _n=it[en];if(_n&&_n.tm<ln){var Nn=null;_n.abort?(Nn="Aborting ["+_n.id+"] due to Excessive runtime ("+(rn-_n.tm)+" ms)",_n.abort(Nn)):Nn="Removing ["+_n.id+"] due to Excessive runtime ("+(rn-_n.tm)+" ms)",D(Nn),it.splice(en,1),cn--}else en++}}o(Dn,"_abortAndRemoveOldEvents");function $n(it,rn){var ln=!1,cn=ht(Ne,it);if(cn||(cn=ht(Ue,it),ln=!0),cn){cn.to&&(clearTimeout(cn.to),cn.to=null);var en=re()-cn.tm;rn?ln?D("Timed out event ["+it+"] finally complete -- "+en+" ms"):Ce("Promise ["+it+"] Complete -- "+en+" ms"):(Ue.push(cn),D("Event ["+it+"] Timed out and removed -- "+en+" ms"))}else Ce("Failed to remove ["+it+"] from running queue");Oe&&Oe.id===it&&(Oe=null),Dn(Ne),Dn(He),Dn(Ue)}o($n,"_cleanup");function Ye(it,rn){return function(ln){return $n(it,!0),rn&&rn(ln),ln}}o(Ye,"_removeScheduledEvent");function Et(it,rn,ln,cn){rn.then(function(en){return en instanceof We?(Ce("Event ["+it+"] returned a promise -- waiting"),Et(it,en,ln,cn),en):Ye(it,ln)(en)},Ye(it,cn))}o(Et,"_waitForFinalResult");function Yt(it,rn){var ln=it.id;return new We(function(cn,en){Ce("Event ["+ln+"] Starting -- waited for "+(it.wTm||"--")+" ms"),it.isRunning=!0,it.abort=function(Nn){it.abort=null,it.isAborted=!0,$n(ln,!1),en(new Error(Nn))};var _n=rn(ln);_n instanceof We?(Dt&&(it.to=setTimeout(function(){$n(ln,!1),en(new Error("Timed out after ["+Dt+"] ms"))},Dt)),Et(ln,_n,function(Nn){Ce("Event ["+ln+"] Resolving after "+(re()-it.tm)+" ms"),cn(Nn)},en)):(Ce("Promise ["+ln+"] Auto completed as the start action did not return a promise"),cn())})}o(Yt,"_createScheduledEvent");function Pt(it){var rn=re();return it.wTm=rn-it.tm,it.tm=rn,it.isAborted?We.reject(new Error("["+bt+"] was aborted")):(Ne.push(it),Yt(it,Ft))}o(Pt,"_startWaitingEvent");function nn(it,rn){var ln=new We(function(cn,en){var _n=re()-rn.tm,Nn=rn.id;Ce("["+bt+"] is waiting for ["+Nn+":"+_n+" ms] to complete before starting -- ["+He.length+"] waiting and ["+Ne.length+"] running"),it.abort=function(Xn){it.abort=null,ht(He,bt),it.isAborted=!0,en(new Error(Xn))},rn.evt.then(function(Xn){ht(He,bt),Pt(it).then(cn,en)},function(Xn){ht(He,bt),Pt(it).then(cn,en)})});return He.push(it),ln}o(nn,"_waitForPreviousEvent")};function ht(Ft,st){for(var Dt=0;Dt<Ft.length;Dt++)if(Ft[Dt].id===st)return Ft.splice(Dt,1)[0];return null}o(ht,"_removeQueuedEvent")});function Ce(I){var Oe=(0,Je.Rd)();Oe&&Oe.QUnit&&console&&console.log("ESPromiseScheduler["+vt+"] "+I)}o(Ce,"_debugLog");function D(I){(0,_e.jV)(me,"ESPromiseScheduler["+vt+"] "+I)}o(D,"_warnLog")}return o(ee,"ESPromiseScheduler"),ee.incomplete=function(){return Ne},ee.waitingToStart=function(){return He},ee}();const Se=L;var Re=function(){function ee(W){var me=this,ge={},vt=[],Ce=[];W&&Ce.push(W);function D(ht,Ft){var st,Dt=ge[ht];if(Dt&&(st=Dt[Ft]),!st&&st!==null){if((0,M.HD)(ht)&&(0,M.HD)(Ft))if(Ce.length>0){for(var bt=0;bt<Ce.length;bt++)if(Ce[bt].handleField(ht,Ft)){st={canHandle:!0,fieldHandler:Ce[bt]};break}}else vt.length===0&&(st={canHandle:!0});if(!st&&st!==null){st=null;for(var bt=0;bt<vt.length;bt++)if(vt[bt].handleField(ht,Ft)){st={canHandle:!0,handler:vt[bt],fieldHandler:null};break}}Dt||(Dt=ge[ht]={}),Dt[Ft]=st}return st}o(D,"_getFieldSanitizer"),me.addSanitizer=function(ht){ht&&(vt.push(ht),ge={})},me.addFieldSanitizer=function(ht){ht&&(Ce.push(ht),ge={})},me.handleField=function(ht,Ft){var st=D(ht,Ft);return st?st.canHandle:!1},me.value=function(ht,Ft,st,Dt){var bt=D(ht,Ft);if(bt&&bt.canHandle){if(!bt||!bt.canHandle)return null;if(bt.handler)return bt.handler.value(ht,Ft,st,Dt);if(!(0,M.HD)(Ft)||(0,M.le)(st)||st===ze.qS)return null;var hn=null,mn=(0,X.Sy)(st);if((mn&8192)==8192){var Dn=mn&~8192;if(hn=st,!(0,X.Sn)(hn.value)||Dn!==1&&Dn!==2&&Dn!==3&&(Dn&4096)!=4096)return null}else mn===1||mn===2||mn===3||(mn&4096)==4096?hn=Oe(ht,Ft,st):mn===4&&(hn=Oe(ht,Ft,Dt?JSON.stringify(st):st));if(hn)return I(bt,ht,Ft,mn,hn,Dt)}return null},me.property=function(ht,Ft,st,Dt){var bt=D(ht,Ft);if(!bt||!bt.canHandle||!(0,M.HD)(Ft)||(0,M.le)(st)||!(0,X.Sn)(st.value))return null;var hn=(0,X.Sy)(st.value);return hn===0?null:I(bt,ht,Ft,hn,st,Dt)};function I(ht,Ft,st,Dt,bt,hn){if(ht.handler)return ht.handler.property(Ft,st,bt,hn);if(!(0,M.le)(bt.kind)){if((Dt&4096)==4096||!(0,X.oS)(bt.kind))return null;bt.value=bt.value.toString()}return St(ht.fieldHandler,Ft,st,Dt,bt)}o(I,"_handleProperty");function Oe(ht,Ft,st){return(0,X.Sn)(st)?{value:st}:null}o(Oe,"_convertToProperty");function St(ht,Ft,st,Dt,bt){if(bt&&ht){var hn=ht.getSanitizer(Ft,st,Dt,bt.kind,bt.propertyType);if(hn)if(Dt===4){var mn={},Dn=bt.value;(0,M.rW)(Dn,function(Ye,Et){var Yt=Ft+"."+st;if((0,X.Sn)(Et)){var Pt=Oe(Yt,Ye,Et);Pt=St(ht,Yt,Ye,(0,X.Sy)(Et),Pt),Pt&&(mn[Ye]=Pt.value)}}),bt.value=mn}else{var $n={path:Ft,name:st,type:Dt,prop:bt,sanitizer:me};bt=hn.call(me,$n)}}return bt}o(St,"_callFieldSanitizer")}return o(ee,"ValueSanitizer"),ee.getFieldType=X.Sy,ee}(),Ae=100,qe=T(880),Rt=T(63),nt=T(589),$e=T(928),$=T(843),pe=T(869),j=T(878),ue=T(392),Ge=T(242),at=T(883),ne=T(790),ve=T(206)},984:(At,l,T)=>{"use strict";T.d(l,{qS:()=>R,YT:()=>w,p8:()=>B,o6:()=>U});var R="",w="https://browser.events.data.microsoft.com/OneCollector/1.0/",M="pluginVersionString",S=M+"Arr",B="version",U="properties"},599:(At,l,T)=>{"use strict";T.d(l,{Gf:()=>F,vs:()=>_e,x9:()=>Te,dH:()=>oe,Sn:()=>Q,jM:()=>z,IZ:()=>Z,r7:()=>se,yj:()=>Ke,Vv:()=>xe,oF:()=>We,d8:()=>Je,kT:()=>Y,ej:()=>E,Do:()=>Ne,cm:()=>He,l7:()=>Ue,hK:()=>re,oS:()=>L,JT:()=>Ae,if:()=>qe,Sy:()=>Rt,cQ:()=>nt,Tr:()=>$e,mJ:()=>$,ot:()=>pe});var R=T(630),w=T(708),M=T(242),S=T(843),B=T(392),U=T(869),J=T(878),ke=T(91),Fe=T(984),Pe,F="3.2.8",_e="1DS-Web-JS-"+F,Ie="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",fe="withCredentials",ae="timeout",ze=(Pe={},Pe[0]=0,Pe[2]=6,Pe[1]=1,Pe[3]=7,Pe[4096|2]=6,Pe[4096|1]=1,Pe[4096|3]=7,Pe),X=null,Te=Boolean((0,R.Me)()),oe=Boolean((0,R.Jj)());function Q(j){return!(j===Fe.qS||(0,w.le)(j))}o(Q,"isValueAssigned");function z(j){if(j){var ue=j.indexOf("-");if(ue>-1)return j.substring(0,ue)}return Fe.qS}o(z,"getTenantId");function Z(){return X===null&&(X=!(0,w.o8)(Uint8Array)&&!Re()&&!(0,R.b$)()),X}o(Z,"isUint8ArrayAvailable");function se(j){return!!(j&&(0,w.hj)(j)&&j>=1&&j<=4)}o(se,"isLatency");function Ke(j,ue,Ge){if(!ue&&!Q(ue)||typeof j!="string")return null;var at=typeof ue;if(at==="string"||at==="number"||at==="boolean"||(0,w.kJ)(ue))ue={value:ue};else if(at==="object"&&!B.CY.call(ue,"value"))ue={value:Ge?JSON.stringify(ue):ue};else if((0,w.le)(ue.value)||ue.value===Fe.qS||!(0,w.HD)(ue.value)&&!(0,w.hj)(ue.value)&&!(0,w.jn)(ue.value)&&!(0,w.kJ)(ue.value))return null;if((0,w.kJ)(ue.value)&&!Ae(ue.value))return null;if(!(0,w.le)(ue.kind)){if((0,w.kJ)(ue.value)||!L(ue.kind))return null;ue.value=ue.value.toString()}return ue}o(Ke,"sanitizeProperty");function xe(j,ue,Ge){var at=-1;if(!(0,w.o8)(j))if(ue>0&&(ue===32?at=1<<13:ue<=13&&(at=ue<<5)),Se(Ge))at===-1&&(at=0),at|=Ge;else{var ne=ze[Rt(j)]||-1;at!==-1&&ne!==-1?at|=ne:ne===6&&(at=ne)}return at}o(xe,"getCommonSchemaMetaData");function We(){(0,M.JP)(null).setEnabled(!1)}o(We,"disableCookies");function Je(j,ue,Ge){(0,M.p7)(null)&&(0,M.JP)(null).set(j,ue,Ge*86400,null,"/")}o(Je,"setCookie");function Y(j){(0,M.p7)(null)&&(0,M.JP)(null).del(j)}o(Y,"deleteCookie");function E(j){return(0,M.p7)(null)?Ne((0,M.JP)(null),j):Fe.qS}o(E,"getCookie");function Ne(j,ue,Ge){Ge===void 0&&(Ge=!0);var at;return j&&(at=j.get(ue),Ge&&at&&decodeURIComponent&&(at=decodeURIComponent(at))),at||Fe.qS}o(Ne,"getCookieValue");function He(j){j===void 0&&(j="D");var ue=(0,S.GW)();return j==="B"?ue="{"+ue+"}":j==="P"?ue="("+ue+")":j==="N"&&(ue=ue.replace(/-/g,Fe.qS)),ue}o(He,"createGuid");function Ue(j,ue,Ge,at,ne){var ve={},ee=!1,W=0,me=arguments.length,ge=Object[B.hB],vt=arguments;for(ge.toString.call(vt[0])==="[object Boolean]"&&(ee=vt[0],W++);W<me;W++){var j=vt[W];(0,w.rW)(j,function(D,I){ee&&I&&(0,w.Kn)(I)?(0,w.kJ)(I)?(ve[D]=ve[D]||[],(0,w.tO)(I,function(Oe,St){Oe&&(0,w.Kn)(Oe)?ve[D][St]=Ue(!0,ve[D][St],Oe):ve[D][St]=Oe})):ve[D]=Ue(!0,ve[D],I):ve[D]=I})}return ve}o(Ue,"extend");var re=S.Jj;function L(j){return j===0||j>0&&j<=13||j===32}o(L,"isValueKind");function Se(j){return j>=0&&j<=9}o(Se,"isDataType");function Re(){var j=(0,R.jW)();if(!(0,w.o8)(j)&&j.userAgent){var ue=j.userAgent.toLowerCase();if((ue.indexOf("safari")>=0||ue.indexOf("firefox")>=0)&&ue.indexOf("chrome")<0)return!0}return!1}o(Re,"isSafariOrFirefox");function Ae(j){return j.length>0}o(Ae,"isArrayValid");function qe(j,ue){var Ge=j;Ge.timings=Ge.timings||{},Ge.timings.processTelemetryStart=Ge.timings.processTelemetryStart||{},Ge.timings.processTelemetryStart[ue]=re()}o(qe,"setProcessTelemetryTimings");function Rt(j){var ue=0;if(j!=null){var Ge=typeof j;Ge==="string"?ue=1:Ge==="number"?ue=2:Ge==="boolean"?ue=3:Ge===B.fK&&(ue=4,(0,w.kJ)(j)?(ue=4096,j.length>0&&(ue|=Rt(j[0]))):B.CY.call(j,"value")&&(ue=8192|Rt(j.value)))}return ue}o(Rt,"getFieldValueType");var nt={Version:F,FullVersionString:_e,strUndefined:B.jA,strObject:B.fK,Undefined:B.jA,arrForEach:w.tO,arrIndexOf:w.UA,arrMap:w.Mr,arrReduce:w.Xz,objKeys:w.FY,toISOString:w.Y6,isReactNative:R.b$,isString:w.HD,isNumber:w.hj,isBoolean:w.jn,isFunction:w.mf,isArray:w.kJ,isObject:w.Kn,strTrim:w.nd,isDocumentObjectAvailable:Te,isWindowObjectAvailable:oe,isValueAssigned:Q,getTenantId:z,isBeaconsSupported:R.MF,isUint8ArrayAvailable:Z,isLatency:se,sanitizeProperty:Ke,getISOString:w.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:xe,cookieAvailable:M.p7,disallowsSameSiteNone:M.UY,setCookie:Je,deleteCookie:Y,getCookie:E,createGuid:He,extend:Ue,getTime:re,isValueKind:L,isArrayValid:Ae,objDefineAccessors:w.l_,addPageUnloadEventListener:U.c9,setProcessTelemetryTimings:qe,addEventHandler:U.Ib,getFieldValueType:Rt,strEndsWith:w.Id,objForEachKey:w.rW},$e={_canUseCookies:void 0,isTypeof:w.Ym,isUndefined:w.o8,isNullOrUndefined:w.le,hasOwnProperty:w.nr,isFunction:w.mf,isObject:w.Kn,isDate:w.J_,isArray:w.kJ,isError:w.VZ,isString:w.HD,isNumber:w.hj,isBoolean:w.jn,toISOString:w.Y6,arrForEach:w.tO,arrIndexOf:w.UA,arrMap:w.Mr,arrReduce:w.Xz,strTrim:w.nd,objCreate:ke.pu,objKeys:w.FY,objDefineAccessors:w.l_,addEventHandler:U.Ib,dateNow:w.m6,isIE:R.w1,disableCookies:We,newGuid:S.GW,perfNow:S.Jj,newId:J.pZ,randomValue:J.az,random32:J._l,mwcRandomSeed:J.CN,mwcRandom32:J.F6,generateW3CId:S.DO};function $(){return!!(0,R.a8)("chrome")}o($,"isChromium");function pe(j,ue,Ge,at,ne,ve){at===void 0&&(at=!1),ne===void 0&&(ne=!1);function ee(me,ge,vt){try{me[ge]=vt}catch(Ce){}}o(ee,"_wrapSetXhrProp");var W=new XMLHttpRequest;return at&&ee(W,Ie,at),Ge&&ee(W,fe,Ge),W.open(j,ue,!ne),Ge&&ee(W,fe,Ge),!ne&&ve&&ee(W,ae,ve),W}o(pe,"openXhr")},865:(At,l,T)=>{"use strict";T.r(l),T.d(l,{BE_PROFILE:()=>fe,NRT_PROFILE:()=>Ie,PostChannel:()=>Rn,RT_PROFILE:()=>_e});var R=T(88),w=T(679),M=T(288),S=T(869),B=T(883),U=T(599),J=T(708),ke=T(630),Fe=T(928),Pe=T(18),F=T(63),_e="REAL_TIME",Ie="NEAR_REAL_TIME",fe="BEST_EFFORT",ae="",ze="POST",X="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Te="drop",oe="send",Q="requeue",z="rspFail",Z="oth",se="no-cache, no-store",Ke="application/x-json-stream",xe="cache-control",We="content-type",Je="kill-tokens",Y="kill-duration",E="kill-duration-seconds",Ne="time-delta-millis",He="client-version",Ue="client-id",re="time-delta-to-apply-millis",L="upload-time",Se="apikey",Re="AuthMsaDeviceTicket",Ae="AuthXToken",qe="sdk-version",Rt="NoResponseBody",nt="msfpc",$e="trace",$="user";function pe(yt){var _t=(yt.ext||{}).intweb;return _t&&(0,U.Sn)(_t[nt])?_t[nt]:null}o(pe,"_getEventMsfpc");function j(yt){for(var _t=null,Nt=0;_t===null&&Nt<yt.length;Nt++)_t=pe(yt[Nt]);return _t}o(j,"_getMsfpc");var ue=function(){function yt(_t,Nt){var ot=Nt?[].concat(Nt):[],Qt=this,Ht=j(ot);Qt.iKey=function(){return _t},Qt.Msfpc=function(){return Ht||ae},Qt.count=function(){return ot.length},Qt.events=function(){return ot},Qt.addEvent=function(mt){return mt?(ot.push(mt),Ht||(Ht=pe(mt)),!0):!1},Qt.split=function(mt,an){var tn;if(mt<ot.length){var Sn=ot.length-mt;(0,J.le)(an)||(Sn=an<Sn?an:Sn),tn=ot.splice(mt,Sn),Ht=j(ot)}return new yt(_t,tn)}}return o(yt,"EventBatch"),yt.create=function(_t,Nt){return new yt(_t,Nt)},yt}(),Ge=function(){function yt(){var _t=!0,Nt=!0,ot=!0,Qt="use-collector-delta",Ht=!1;(0,w.Z)(yt,this,function(mt){mt.allowRequestSending=function(){return _t},mt.firstRequestSent=function(){ot&&(ot=!1,Ht||(_t=!1))},mt.shouldAddClockSkewHeaders=function(){return Nt},mt.getClockSkewHeaderValue=function(){return Qt},mt.setClockSkew=function(an){Ht||(an?(Qt=an,Nt=!0,Ht=!0):Nt=!1,_t=!0)}})}return o(yt,"ClockSkewManager"),yt.__ieDyn=1,yt}();const at=Ge;var ne=1e3,ve=function(){function yt(){var _t={};function Nt(ot){var Qt=[];return ot&&(0,J.tO)(ot,function(Ht){Qt.push((0,J.nd)(Ht))}),Qt}o(Nt,"_normalizeTenants"),(0,w.Z)(yt,this,function(ot){ot.setKillSwitchTenants=function(Qt,Ht){if(Qt&&Ht)try{var mt=Nt(Qt.split(","));if(Ht==="this-request-only")return mt;for(var an=parseInt(Ht,10)*ne,tn=0;tn<mt.length;++tn)_t[mt[tn]]=(0,J.m6)()+an}catch(Sn){return[]}return[]},ot.isTenantKilled=function(Qt){var Ht=_t,mt=(0,J.nd)(Qt);return Ht[mt]!==void 0&&Ht[mt]>(0,J.m6)()?!0:(delete Ht[mt],!1)}})}return o(yt,"KillSwitch"),yt.__ieDyn=1,yt}();const ee=ve;var W=T(392),me=.8,ge=1.2,vt=3e3,Ce=6e5;function D(yt){return!(yt>=300&&yt<500&&yt!=408&&yt!=429||yt==501||yt==505)}o(D,"retryPolicyShouldRetryForStatus");function I(yt){var _t=0,Nt=vt*me,ot=vt*ge,Qt=Math.floor(Math.random()*(ot-Nt))+Nt;return _t=Math.pow(2,yt)*Qt,Math.min(_t,Ce)}o(I,"retryPolicyGetMillisToBackoffForRetry");var Oe=20,St=3984588,ht=65e3,Ft=2e6,st=Math.min(Ft,ht),Dt="metadata",bt="f",hn=/\./,mn=function(){function yt(_t,Nt,ot,Qt){var Ht="data",mt="baseData",an="ext",tn=!!Qt,Sn=!0,yn=Nt,Vn={};(0,w.Z)(yt,this,function(Cn){Cn.createPayload=function(It,$t,on,Tn,jt,sn){return{apiKeys:[],payloadBlob:ae,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:It,isTeardown:$t,isSync:on,isBeacon:Tn,sendType:sn,sendReason:jt}},Cn.appendPayload=function(It,$t,on){var Tn=It&&$t&&!It.overflow;return Tn&&(0,M.Lm)(_t,function(){return"Serializer:appendPayload"},function(){for(var jt=$t.events(),sn=It.payloadBlob,wn=It.numEvents,In=!1,un=[],Ln=[],ei=It.isBeacon,Bn=ei?ht:St,jn=ei?st:Ft,Mn=0,zn=0;Mn<jt.length;){var qt=jt[Mn];if(qt){if(wn>=on){It.overflow=$t.split(Mn);break}var Ot=Cn.getEventBlob(qt);if(Ot&&Ot.length<=jn){var ri=Ot.length,xi=sn.length;if(xi+ri>Bn){It.overflow=$t.split(Mn);break}sn&&(sn+=`
`),sn+=Ot,zn++,zn>Oe&&(sn.substr(0,1),zn=0),In=!0,wn++}else Ot?un.push(qt):Ln.push(qt),jt.splice(Mn,1),Mn--}Mn++}if(un&&un.length>0&&It.sizeExceed.push(ue.create($t.iKey(),un)),Ln&&Ln.length>0&&It.failedEvts.push(ue.create($t.iKey(),Ln)),In){It.batches.push($t),It.payloadBlob=sn,It.numEvents=wn;var Jn=$t.iKey();(0,J.UA)(It.apiKeys,Jn)===-1&&It.apiKeys.push(Jn)}},function(){return{payload:It,theBatch:{iKey:$t.iKey(),evts:$t.events()},max:on}}),Tn},Cn.getEventBlob=function(It){try{return(0,M.Lm)(_t,function(){return"Serializer.getEventBlob"},function(){var $t={};$t.name=It.name,$t.time=It.time,$t.ver=It.ver,$t.iKey="o:"+(0,U.jM)(It.iKey);var on={},Tn=It[an];Tn&&($t[an]=on,(0,J.rW)(Tn,function(wn,In){var un=on[wn]={};zt(In,un,"ext."+wn,!0,null,null,!0)}));var jt=$t[Ht]={};jt.baseType=It.baseType;var sn=jt[mt]={};return zt(It.baseData,sn,mt,!1,[mt],function(wn,In,un){Dn(on,wn,In,un)},Sn),zt(It.data,jt,Ht,!1,[],function(wn,In,un){Dn(on,wn,In,un)},Sn),JSON.stringify($t)},function(){return{item:It}})}catch($t){return null}};function Un(It,$t){var on=Vn[It];return on===void 0&&(It.length>=7&&(on=(0,J.xe)(It,"ext.metadata")||(0,J.xe)(It,"ext.web")),Vn[It]=on),on}o(Un,"_isReservedField");function zt(It,$t,on,Tn,jt,sn,wn){(0,J.rW)(It,function(In,un){var Ln=null;if(un||(0,U.Sn)(un)){var ei=on,Bn=In,jn=jt,Mn=$t;if(tn&&!Tn&&hn.test(In)){var zn=In.split("."),qt=zn.length;if(qt>1){jn&&(jn=jn.slice());for(var Ot=0;Ot<qt-1;Ot++){var ri=zn[Ot];Mn=Mn[ri]=Mn[ri]||{},ei+="."+ri,jn&&jn.push(ri)}Bn=zn[qt-1]}}var xi=Tn&&Un(ei,Bn);if(!xi&&yn&&yn.handleField(ei,Bn)?Ln=yn.value(ei,Bn,un,ot):Ln=(0,U.yj)(Bn,un,ot),Ln){var Jn=Ln.value;if(Mn[Bn]=Jn,sn&&sn(jn,Bn,Ln),wn&&typeof Jn=="object"&&!(0,J.kJ)(Jn)){var ai=jn;ai&&(ai=ai.slice(),ai.push(Bn)),zt(un,Jn,ei+"."+Bn,Tn,ai,sn,wn)}}}})}o(zt,"_processPathKeys")})}return o(yt,"Serializer"),yt.__ieDyn=1,yt}();function Dn(yt,_t,Nt,ot){if(ot&&yt){var Qt=(0,U.Vv)(ot.value,ot.kind,ot.propertyType);if(Qt>-1){var Ht=yt[Dt];Ht||(Ht=yt[Dt]={f:{}});var mt=Ht[bt];if(mt||(mt=Ht[bt]={}),_t)for(var an=0;an<_t.length;an++){var tn=_t[an];mt[tn]||(mt[tn]={f:{}});var Sn=mt[tn][bt];Sn||(Sn=mt[tn][bt]={}),mt=Sn}mt=mt[Nt]={},(0,J.kJ)(ot.value)?mt.a={t:Qt}:mt.t=Qt}}}o(Dn,"_addJSONPropertyMetaData");var $n,Ye="sendAttempt",Et="&"+Rt+"=true",Yt=($n={},$n[1]=Q,$n[100]=Q,$n[200]="sent",$n[8004]=Te,$n[8003]=Te,$n),Pt={},nn={};function it(yt,_t,Nt){Pt[yt]=_t,Nt!==!1&&(nn[_t]=yt)}o(it,"_addCollectorHeaderQsMapping"),it(Re,Re,!1),it(He,He),it(Ue,"Client-Id"),it(Se,Se),it(re,re),it(L,L),it(Ae,Ae);function rn(yt){try{return yt.responseText}catch(_t){}return ae}o(rn,"_getResponseText");function ln(yt,_t){var Nt=!1;if(yt&&_t){var ot=(0,J.FY)(yt);if(ot&&ot.length>0)for(var Qt=_t.toLowerCase(),Ht=0;Ht<ot.length;Ht++){var mt=ot[Ht];if(mt&&(0,J.nr)(_t,mt)&&mt.toLowerCase()===Qt){Nt=!0;break}}}return Nt}o(ln,"_hasHeader");function cn(yt,_t,Nt,ot){_t&&Nt&&Nt.length>0&&(ot&&Pt[_t]?(yt.hdrs[Pt[_t]]=Nt,yt.useHdrs=!0):yt.url+="&"+_t+"="+Nt)}o(cn,"_addRequestDetails");function en(yt,_t){return _t&&((0,J.hj)(_t)?yt=[_t].concat(yt):(0,J.kJ)(_t)&&(yt=_t.concat(yt))),yt}o(en,"_prependTransports");var _n=function(){function yt(_t,Nt,ot,Qt,Ht){this._responseHandlers=[];var mt="?cors=true&"+We.toLowerCase()+"="+Ke,an=new ee,tn=!1,Sn=new at,yn=!1,Vn=0,Cn,Un,zt,It,$t=!0,on=[],Tn={},jt=[],sn=null,wn=!1,In,un=!1,Ln=!1,ei,Bn,jn,Mn,zn;(0,w.Z)(yt,this,function(qt){var Ot=!0;qt.initialize=function(V,v,_,H,ye){var ct;ye||(ye={}),mt=V+mt,Ln=(0,J.o8)(ye.avoidOptions)?!0:!ye.avoidOptions,It=v,In=v.getCookieMgr(),wn=!It.config.disableEventTimings;var et=!!It.config.enableCompoundKey;Cn=_,Un=Cn.diagLog();var K=ye.valueSanitizer,ie=ye.stringifyObjects;(0,J.o8)(ye.enableCompoundKey)||(et=!!ye.enableCompoundKey),ei=ye.xhrTimeout,Bn=!!ye.disableXhrSync,jn=!!ye.disableFetchKeepAlive,zn=ye.addNoResponse!==!1,yn=!(0,ke.b$)(),sn=new mn(It,K,ie,et),(0,J.le)(ye.useSendBeacon)||(yn=!!ye.useSendBeacon);var he=H,Me=ye.alwaysUseXhrOverride?H:null,Ve=ye.alwaysUseXhrOverride?H:null,dt=[3,2];if(!H){$t=!1;var Tt=(0,ke.k$)();Tt&&Tt.protocol&&Tt.protocol.toLowerCase()==="file:"&&(Ot=!1);var kt=[];(0,ke.b$)()?(kt=[2,1],dt=[2,1,3]):kt=[1,2,3],kt=en(kt,ye.transports),H=ri(kt,!1),H||(0,Pe.jV)(Un,"No available transport to send events"),he=ri(kt,!0)}Me||(dt=en(dt,ye.unloadTransports),Me=ri(dt,!0)),Mn=!$t&&(yn&&(0,ke.MF)()||!jn&&(0,ke.JO)(!0)),zt=(ct={},ct[0]=H,ct[1]=he||ri([1,2,3],!0),ct[2]=Me||he||ri([1],!0),ct[3]=Ve||ri([2,3],!0)||he||ri([1],!0),ct)};function ri(V,v){for(var _=0,H=null,ye=0;H==null&&ye<V.length;)_=V[ye],_===1?(0,ke.cp)()?H=xi:(0,ke.Z3)()&&(H=ai):_===2&&(0,ke.JO)(v)&&(!v||v&&!jn)?H=Jn:yn&&_===3&&(0,ke.MF)()&&(H=Oi),ye++;return H?{_transport:_,_isSync:v,sendPOST:H}:null}o(ri,"_getSenderInterface"),qt._getDbgPlgTargets=function(){return[zt[0],an,sn,zt]};function xi(V,v,_){var H=new XDomainRequest;H.open(ze,V.urlString),V.timeout&&(H.timeout=V.timeout),H.onload=function(){var ye=rn(H);ti(v,200,{},ye),yi(ye)},H.onerror=function(){ti(v,400,{})},H.ontimeout=function(){ti(v,500,{})},H.onprogress=function(){},_?H.send(V.data):Ht.set(function(){H.send(V.data)},0)}o(xi,"_xdrSendPost");function Jn(V,v,_){var H,ye=V.urlString,ct=!1,et=!1,K=(H={body:V.data,method:ze},H[X]=!0,H);_&&(K.keepalive=!0,V._sendReason===2&&(ct=!0,zn&&(ye+=Et))),Ot&&(K.credentials="include"),V.headers&&(0,J.FY)(V.headers).length>0&&(K.headers=V.headers),fetch(ye,K).then(function(ie){var he={},Me=ae,Ve=ie.headers;Ve&&Ve.forEach(function(dt,Tt){he[Tt]=dt}),ie.body&&ie.text().then(function(dt){Me=dt}),et||(et=!0,ti(v,ie.status,he,Me),yi(Me))}).catch(function(ie){et||(et=!0,ti(v,0,{}))}),ct&&!et&&(et=!0,ti(v,200,{})),!et&&V.timeout>0&&Ht.set(function(){et||(et=!0,ti(v,500,{}))},V.timeout)}o(Jn,"_fetchSendPost");function ai(V,v,_){var H=V.urlString;function ye(ie,he,Me){if(!ie[Me]&&he&&he.getResponseHeader){var Ve=he.getResponseHeader(Me);Ve&&(ie[Me]=(0,J.nd)(Ve))}return ie}o(ye,"_appendHeader");function ct(ie){var he={};return ie.getAllResponseHeaders?he=ar(ie.getAllResponseHeaders()):(he=ye(he,ie,Ne),he=ye(he,ie,Y),he=ye(he,ie,E)),he}o(ct,"_getAllResponseHeaders");function et(ie,he){ti(v,ie.status,ct(ie),he)}o(et,"xhrComplete"),_&&V.disableXhrSync&&(_=!1);var K=(0,U.ot)(ze,H,Ot,!0,_,V.timeout);(0,J.rW)(V.headers,function(ie,he){K.setRequestHeader(ie,he)}),K.onload=function(){var ie=rn(K);et(K,ie),yi(ie)},K.onerror=function(){et(K)},K.ontimeout=function(){et(K)},K.send(V.data)}o(ai,"_xhrSendPost");function ti(V,v,_,H){try{V(v,_,H)}catch(ye){(0,Pe.kP)(Un,2,518,(0,ke.eU)(ye))}}o(ti,"_doOnComplete");function Oi(V,v,_){var H=V,ye=200,ct=H._thePayload,et=V.urlString+(zn?Et:ae);try{var K=(0,ke.jW)();if(!K.sendBeacon(et,V.data))if(ct){var ie=[];(0,J.tO)(ct.batches,function(he){if(ie&&he&&he.count()>0){for(var Me=he.events(),Ve=0;Ve<Me.length;Ve++)if(!K.sendBeacon(et,sn.getEventBlob(Me[Ve]))){ie.push(he.split(Ve));break}}else ie.push(he.split(0))}),Pn(ie,8003,ct.sendType,!0)}else ye=0}catch(he){(0,Pe.jV)(Un,"Failed to send telemetry using sendBeacon API. Ex:"+(0,ke.eU)(he)),ye=0}finally{ti(v,ye,{},ae)}}o(Oi,"_beaconSendPost");function Yn(V){return V===2||V===3}o(Yn,"_isBeaconPayload");function qn(V){return un&&Yn(V)&&(V=2),V}o(qn,"_adjustSendType"),qt.addQueryStringParameter=function(V,v){for(var _=0;_<on.length;_++)if(on[_].name===V){on[_].value=v;return}on.push({name:V,value:v})},qt.addHeader=function(V,v){Tn[V]=v},qt.canSendRequest=function(){return Ai()&&Sn.allowRequestSending()},qt.sendQueuedRequests=function(V,v){(0,J.o8)(V)&&(V=0),un&&(V=qn(V),v=2),Ci(jt,V,0)&&Ti(Ri(),0,!1,V,v||0)},qt.isCompletelyIdle=function(){return!tn&&Vn===0&&jt.length===0},qt.setUnloading=function(V){un=V},qt.addBatch=function(V){if(V&&V.count()>0){if(an.isTenantKilled(V.iKey()))return!1;jt.push(V)}return!0},qt.teardown=function(){jt.length>0&&Ti(Ri(),0,!0,2,2)},qt.pause=function(){tn=!0},qt.resume=function(){tn=!1,qt.sendQueuedRequests(0,4)},qt.sendSynchronousBatch=function(V,v,_){V&&V.count()>0&&((0,J.le)(v)&&(v=1),un&&(v=qn(v),_=2),Ti([V],0,!1,v,_||0))};function Ai(){return!tn&&Vn<Nt}o(Ai,"_hasIdleConnection");function Ri(){var V=jt;return jt=[],V}o(Ri,"_clearQueue");function Ci(V,v,_){var H=!1;return V&&V.length>0&&!tn&&zt[v]&&sn&&(H=v!==0||Ai()&&(_>0||Sn.allowRequestSending())),H}o(Ci,"_canSendPayload");function Li(V){var v={};return V&&(0,J.tO)(V,function(_,H){v[H]={iKey:_.iKey(),evts:_.events()}}),v}o(Li,"_createDebugBatches");function Ti(V,v,_,H,ye){if(!(!V||V.length===0)){if(tn){Pn(V,1,H);return}H=qn(H);try{var ct=V,et=H!==0;(0,M.Lm)(It,function(){return"HttpManager:_sendBatches"},function(K){K&&(V=V.slice(0));for(var ie=[],he=null,Me=(0,U.hK)(),Ve=zt[H]||(et?zt[1]:zt[0]),dt=Ve&&Ve._transport,Tt=Mn&&(un||Yn(H)||dt===3||Ve._isSync&&dt===2);Ci(V,H,v);){var kt=V.shift();kt&&kt.count()>0&&(an.isTenantKilled(kt.iKey())?ie.push(kt):(he=he||sn.createPayload(v,_,et,Tt,ye,H),sn.appendPayload(he,kt,_t)?he.overflow!==null&&(V=[he.overflow].concat(V),he.overflow=null,ki(he,Me,(0,U.hK)(),ye),Me=(0,U.hK)(),he=null):(ki(he,Me,(0,U.hK)(),ye),Me=(0,U.hK)(),V=[kt].concat(V),he=null)))}he&&ki(he,Me,(0,U.hK)(),ye),V.length>0&&(jt=V.concat(jt)),Pn(ie,8004,H)},function(){return{batches:Li(ct),retryCount:v,isTeardown:_,isSynchronous:et,sendReason:ye,useSendBeacon:Yn(H),sendType:H}},!et)}catch(K){(0,Pe.kP)(Un,2,48,"Unexpected Exception sending batch: "+(0,ke.eU)(K))}}}o(Ti,"_sendBatches");function Qi(V,v){var _={url:mt,hdrs:{},useHdrs:!1};v?(_.hdrs=(0,U.l7)(_.hdrs,Tn),_.useHdrs=(0,J.FY)(_.hdrs).length>0):(0,J.rW)(Tn,function(K,ie){nn[K]?cn(_,nn[K],ie,!1):(_.hdrs[K]=ie,_.useHdrs=!0)}),cn(_,Ue,"NO_AUTH",v),cn(_,He,U.vs,v);var H=ae;(0,J.tO)(V.apiKeys,function(K){H.length>0&&(H+=","),H+=K}),cn(_,Se,H,v),cn(_,L,(0,J.m6)().toString(),v);var ye=Ui(V);if((0,U.Sn)(ye)&&(_.url+="&ext.intweb.msfpc="+ye),Sn.shouldAddClockSkewHeaders()&&cn(_,re,Sn.getClockSkewHeaderValue(),v),It.getWParam){var ct=It.getWParam();ct>=0&&(_.url+="&w="+ct)}for(var et=0;et<on.length;et++)_.url+="&"+on[et].name+"="+on[et].value;return _}o(Qi,"_buildRequestDetails");function Hn(V,v,_){V[v]=V[v]||{},V[v][Cn.identifier]=_}o(Hn,"_setTimingValue");function ki(V,v,_,H){if(V&&V.payloadBlob&&V.payloadBlob.length>0){var ye=!!qt.sendHook,ct=zt[V.sendType];!Yn(V.sendType)&&V.isBeacon&&V.sendReason===2&&(ct=zt[2]||zt[3]||ct);var et=Ln;(V.isBeacon||ct._transport===3)&&(et=!1);var K=Qi(V,et);et=et||K.useHdrs;var ie=(0,U.hK)();(0,M.Lm)(It,function(){return"HttpManager:_doPayloadSend"},function(){for(var he=0;he<V.batches.length;he++)for(var Me=V.batches[he],Ve=Me.events(),dt=0;dt<Ve.length;dt++){var Tt=Ve[dt];if(wn){var kt=Tt.timings=Tt.timings||{};Hn(kt,"sendEventStart",ie),Hn(kt,"serializationStart",v),Hn(kt,"serializationCompleted",_)}Tt[Ye]>0?Tt[Ye]++:Tt[Ye]=1}Pn(V.batches,1e3+(H||0),V.sendType,!0);var Jt={data:V.payloadBlob,urlString:K.url,headers:K.hdrs,_thePayload:V,_sendReason:H,timeout:ei,disableXhrSync:Bn,disableFetchKeepAlive:jn};et&&(ln(Jt.headers,xe)||(Jt.headers[xe]=se),ln(Jt.headers,We)||(Jt.headers[We]=Ke));var si=null;ct&&(si=o(function(Wt){Sn.firstRequestSent();var ui=o(function(Fn,Mi){dn(Fn,Mi,V,H)},"onComplete"),ni=V.isTeardown||V.isSync;try{ct.sendPOST(Wt,ui,ni),qt.sendListener&&qt.sendListener(Jt,Wt,ni,V.isBeacon)}catch(Fn){(0,Pe.jV)(Un,"Unexpected exception sending payload. Ex:"+(0,ke.eU)(Fn)),ti(ui,0,{})}},"sender")),(0,M.Lm)(It,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(si)if(V.sendType===0&&Vn++,ye&&!V.isBeacon&&ct._transport!==3){var Wt={data:Jt.data,urlString:Jt.urlString,headers:(0,U.l7)({},Jt.headers),timeout:Jt.timeout,disableXhrSync:Jt.disableXhrSync,disableFetchKeepAlive:Jt.disableFetchKeepAlive},ui=!1;(0,M.Lm)(It,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{qt.sendHook(Wt,function(ni){ui=!0,!$t&&!ni._thePayload&&(ni._thePayload=ni._thePayload||Jt._thePayload,ni._sendReason=ni._sendReason||Jt._sendReason),si(ni)},V.isSync||V.isTeardown)}catch(ni){ui||si(Jt)}})}else si(Jt)})},function(){return{thePayload:V,serializationStart:v,serializationCompleted:_,sendReason:H}},V.isSync)}V.sizeExceed&&V.sizeExceed.length>0&&Pn(V.sizeExceed,8003,V.sendType),V.failedEvts&&V.failedEvts.length>0&&Pn(V.failedEvts,8002,V.sendType)}o(ki,"_doPayloadSend");function fi(V,v){wn&&(0,J.tO)(V,function(_){var H=_.timings=_.timings||{};Hn(H,"sendEventCompleted",v)})}o(fi,"_addEventCompletedTimings");function dn(V,v,_,H){var ye=9e3,ct=null,et=!1,K=!1;try{var ie=!0;if(typeof V!==W.jA){if(v){Sn.setClockSkew(v[Ne]);var he=v[Y]||v["kill-duration-seconds"];(0,J.tO)(an.setKillSwitchTenants(v[Je],he),function(Ve){(0,J.tO)(_.batches,function(dt){if(dt.iKey()===Ve){ct=ct||[];var Tt=dt.split(0);_.numEvents-=Tt.count(),ct.push(Tt)}})})}if(V==200||V==204){ye=200;return}(!D(V)||_.numEvents<=0)&&(ie=!1),ye=9e3+V%1e3}if(ie){ye=100;var Me=_.retryCnt;_.sendType===0&&(Me<ot?(et=!0,ci(function(){_.sendType===0&&Vn--,Ti(_.batches,Me+1,_.isTeardown,un?2:_.sendType,5)},un,I(Me))):(K=!0,un&&(ye=8001)))}}finally{et||(Sn.setClockSkew(),Zi(_,ye,H,K)),Pn(ct,8004,_.sendType)}}o(dn,"_retryRequestIfNeeded");function Zi(V,v,_,H){try{H&&Cn._backOffTransmission(),v===200&&(!H&&!V.isSync&&Cn._clearBackOff(),oi(V.batches)),Pn(V.batches,v,V.sendType,!0)}finally{V.sendType===0&&(Vn--,_!==5&&qt.sendQueuedRequests(V.sendType,_))}}o(Zi,"_handleRequestFinished");function oi(V){if(wn){var v=(0,U.hK)();(0,J.tO)(V,function(_){_&&_.count()>0&&fi(_.events(),v)})}}o(oi,"_addCompleteTimings");function ci(V,v,_){v?V():Ht.set(V,_)}o(ci,"_doAction");function ar(V){var v={};if((0,J.HD)(V)){var _=(0,J.nd)(V).split(/[\r\n]+/);(0,J.tO)(_,function(H){if(H){var ye=H.indexOf(": ");if(ye!==-1){var ct=(0,J.nd)(H.substring(0,ye)).toLowerCase(),et=(0,J.nd)(H.substring(ye+1));v[ct]=et}else v[(0,J.nd)(H)]=1}})}return v}o(ar,"_convertAllHeadersToMap");function Ui(V){for(var v=0;v<V.batches.length;v++){var _=V.batches[v].Msfpc();if(_)return encodeURIComponent(_)}return ae}o(Ui,"_getMsfpc");function yi(V){var v=qt._responseHandlers;try{for(var _=0;_<v.length;_++)try{v[_](V)}catch(ye){(0,Pe.kP)(Un,1,519,"Response handler failed: "+ye)}if(V){var H=JSON.parse(V);(0,U.Sn)(H.webResult)&&(0,U.Sn)(H.webResult[nt])&&In.set("MSFPC",H.webResult[nt],365*86400)}}catch(ye){}}o(yi,"_handleCollectorResponse");function Pn(V,v,_,H){if(V&&V.length>0&&Qt){var ye=Qt[kn(v)];if(ye){var ct=_!==0;(0,M.Lm)(It,function(){return"HttpManager:_sendBatchesNotification"},function(){ci(function(){try{ye.call(Qt,V,v,ct,_)}catch(et){(0,Pe.kP)(Un,1,74,"send request notification failed: "+et)}},H||ct,0)},function(){return{batches:Li(V),reason:v,isSync:ct,sendSync:H,sendType:_}},!ct)}}}o(Pn,"_sendBatchesNotification");function kn(V){var v=Yt[V];return(0,U.Sn)(v)||(v=Z,V>=9e3&&V<=9999?v=z:V>=8e3&&V<=8999?v=Te:V>=1e3&&V<=1999&&(v=oe)),v}o(kn,"_getNotificationAction")})}return o(yt,"HttpManager"),yt.__ieDyn=1,yt}();function Nn(yt,_t){for(var Nt=[],ot=2;ot<arguments.length;ot++)Nt[ot-2]=arguments[ot];return setTimeout(yt,_t,Nt)}o(Nn,"defaultSetTimeout");function Xn(yt){clearTimeout(yt)}o(Xn,"defaultClearTimeout");function di(yt,_t){return{set:yt||Nn,clear:_t||Xn}}o(di,"createTimeoutWrapper");var On=.25,hi=500,ir=20,Gi=6,rr=2,zi=4,Di=2,k=1,Be="eventsDiscarded",Xe="overrideInstrumentationKey",ut="maxEventRetryAttempts",lt="maxUnloadEventRetryAttempts",Lt="addUnloadCb",Kn=function(yt){(0,R.ne)(_t,yt);function _t(){var Nt=yt.call(this)||this;Nt.identifier="PostChannel",Nt.priority=1011,Nt.version="3.2.8";var ot,Qt=!1,Ht=[],mt=null,an=!1,tn=0,Sn=500,yn=0,Vn=1e4,Cn={},Un=_e,zt=null,It=null,$t=0,on=0,Tn,jt,sn={},wn,In,un=-1,Ln,ei=!0,Bn=!1,jn=Gi,Mn=rr,zn,qt;return(0,w.Z)(_t,Nt,function(Ot,ri){Ai(),Ot._getDbgPlgTargets=function(){return[jt]},Ot.initialize=function(K,ie,he){(0,M.Lm)(ie,function(){return"PostChannel:initialize"},function(){var Me=ie;ri.initialize(K,ie,he);try{var Ve=!!ie[Lt];zn=(0,S.jU)((0,B.J)(Ot.identifier),ie.evtNamespace&&ie.evtNamespace());var dt=Ot._getTelCtx();K.extensionConfig[Ot.identifier]=K.extensionConfig[Ot.identifier]||{},ot=dt.getExtCfg(Ot.identifier),qt=di(ot.setTimeoutOverride,ot.clearTimeoutOverride),ei=!ot.disableOptimizeObj&&(0,U.mJ)(),xi(Me),ot.eventsLimitInMem>0&&(Vn=ot.eventsLimitInMem),ot.immediateEventLimit>0&&(Sn=ot.immediateEventLimit),ot.autoFlushEventsLimit>0&&(wn=ot.autoFlushEventsLimit),(0,J.hj)(ot[ut])&&(jn=ot[ut]),(0,J.hj)(ot[lt])&&(Mn=ot[lt]),et(),ot.httpXHROverride&&ot.httpXHROverride.sendPOST&&(Tn=ot.httpXHROverride),(0,U.Sn)(K.anonCookieName)&&jt.addQueryStringParameter("anoncknm",K.anonCookieName),jt.sendHook=ot.payloadPreprocessor,jt.sendListener=ot.payloadListener;var Tt=ot.overrideEndpointUrl?ot.overrideEndpointUrl:K.endpointUrl;Ot._notificationManager=ie.getNotifyMgr(),jt.initialize(Tt,Ot.core,Ot,Tn,ot);var kt=K.disablePageUnloadEvents||[];(0,S.c9)(Jn,kt,zn),(0,S.TJ)(Jn,kt,zn),(0,S.nD)(ai,K.disablePageShowEvents,zn)}catch(Jt){throw Ot.setInitialized(!1),Jt}},function(){return{coreConfig:K,core:ie,extensions:he}})},Ot.processTelemetry=function(K,ie){(0,U.if)(K,Ot.identifier),ie=Ot._getTelCtx(ie);var he=ie.getExtCfg(Ot.identifier),Me=!!ot.disableTelemetry;he&&(Me=Me||!!he.disableTelemetry);var Ve=K;!Me&&!Qt&&(ot[Xe]&&(Ve.iKey=ot[Xe]),he&&he[Xe]&&(Ve.iKey=he[Xe]),ti(Ve,!0),Bn?Li(2,2):qn()),Ot.processNext(Ve,ie)},Ot._doTeardown=function(K,ie){Li(2,2),Qt=!0,jt.teardown(),(0,S.JA)(null,zn),(0,S.C9)(null,zn),(0,S.Yl)(null,zn),Ai()};function xi(K){var ie=K.getWParam;K.getWParam=function(){var he=0;return ot.ignoreMc1Ms0CookieProcessing&&(he=he|2),he|ie()}}o(xi,"_hookWParam");function Jn(K){var ie=K||(0,ke.Jj)().event;ie.type!=="beforeunload"&&(Bn=!0,jt.setUnloading(Bn)),Li(2,2)}o(Jn,"_handleUnloadEvents");function ai(K){Bn=!1,jt.setUnloading(Bn)}o(ai,"_handleShowEvents");function ti(K,ie){if(K.sendAttempt||(K.sendAttempt=0),K.latency||(K.latency=1),K.ext&&K.ext[$e]&&delete K.ext[$e],K.ext&&K.ext[$]&&K.ext[$].id&&delete K.ext[$].id,ei&&(U.if,K.ext=(0,J.Ax)(K.ext),K.baseData&&(K.baseData=(0,J.Ax)(K.baseData)),K.data&&(K.data=(0,J.Ax)(K.data))),K.sync){if($t||an)K.latency=3,K.sync=!1;else if(jt){ei&&(K=(0,J.Ax)(K)),jt.sendSynchronousBatch(ue.create(K.iKey,[K]),K.sync===!0?1:K.sync,3);return}}var he=K.latency,Me=yn,Ve=Vn;he===4&&(Me=tn,Ve=Sn);var dt=!1;if(Me<Ve)dt=!ki(K,ie);else{var Tt=1,kt=ir;he===4&&(Tt=4,kt=1),dt=!0,fi(K.iKey,K.latency,Tt,kt)&&(dt=!ki(K,ie))}dt&&kn(Be,[K],Fe.h.QueueFull)}o(ti,"_addEventToQueues"),Ot.setEventQueueLimits=function(K,ie){Vn=K>0?K:1e4,wn=ie>0?ie:0,et();var he=yn>K;if(!he&&In>0)for(var Me=1;!he&&Me<=3;Me++){var Ve=sn[Me];Ve&&Ve.batches&&(0,J.tO)(Ve.batches,function(dt){dt&&dt.count()>=In&&(he=!0)})}Hn(!0,he)},Ot.pause=function(){Ci(),an=!0,jt.pause()},Ot.resume=function(){an=!1,jt.resume(),qn()},Ot.addResponseHandler=function(K){jt._responseHandlers.push(K)},Ot._loadTransmitProfiles=function(K){ar(),(0,J.rW)(K,function(ie,he){var Me=he.length;if(Me>=2){var Ve=Me>2?he[2]:0;if(he.splice(0,Me-2),he[1]<0&&(he[0]=-1),he[1]>0&&he[0]>0){var dt=he[0]/he[1];he[0]=Math.ceil(dt)*he[1]}Ve>=0&&he[1]>=0&&Ve>he[1]&&(Ve=he[1]),he.push(Ve),Cn[ie]=he}})},Ot.flush=function(K,ie,he){if(K===void 0&&(K=!0),!an)if(he=he||1,K)mt==null?(Ci(),Zi(1,0,he),mt=Ri(function(){mt=null,oi(ie,he)},0)):Ht.push(ie);else{var Me=Ci();Oi(1,1,he),ie!=null&&ie(),Me&&qn()}},Ot.setMsaAuthTicket=function(K){jt.addHeader(Re,K)},Ot.hasEvents=Yn,Ot._setTransmitProfile=function(K){Un!==K&&Cn[K]!==void 0&&(Ci(),Un=K,qn())};function Oi(K,ie,he){var Me=Zi(K,ie,he);return jt.sendQueuedRequests(ie,he),Me}o(Oi,"_sendEventsForLatencyAndAbove");function Yn(){return yn>0}o(Yn,"_hasEvents");function qn(){if(un>=0&&Zi(un,0,Ln)&&jt.sendQueuedRequests(0,Ln),tn>0&&!It&&!an){var K=Cn[Un][2];K>=0&&(It=Ri(function(){It=null,Oi(4,0,1),qn()},K))}var ie=Cn[Un][1];!zt&&!mt&&ie>=0&&!an&&(Yn()?zt=Ri(function(){zt=null,Oi(on===0?3:1,0,1),on++,on%=2,qn()},ie):on=0)}o(qn,"_scheduleTimer"),Ot._backOffTransmission=function(){$t<zi&&($t++,Ci(),qn())},Ot._clearBackOff=function(){$t&&($t=0,Ci(),qn())};function Ai(){ot=null,Qt=!1,Ht=[],mt=null,an=!1,tn=0,Sn=500,yn=0,Vn=1e4,Cn={},Un=_e,zt=null,It=null,$t=0,on=0,Tn=null,sn={},wn=void 0,In=0,un=-1,Ln=null,ei=!0,Bn=!1,jn=Gi,Mn=rr,zn=null,qt=di(),jt=new _n(hi,Di,k,{requeue:yi,send:v,sent:_,drop:H,rspFail:ye,oth:ct},qt),Ui(),Ti(),et()}o(Ai,"_initDefaults");function Ri(K,ie){ie===0&&$t&&(ie=1);var he=1e3;return $t&&(he=I($t-1)),qt.set(K,ie*he)}o(Ri,"_createTimer");function Ci(){return zt!==null?(qt.clear(zt),zt=null,on=0,!0):!1}o(Ci,"_clearScheduledTimer");function Li(K,ie){Ci(),mt&&(qt.clear(mt),mt=null),an||Oi(1,K,ie)}o(Li,"_releaseAllQueues");function Ti(){sn[4]={batches:[],iKeyMap:{}},sn[3]={batches:[],iKeyMap:{}},sn[2]={batches:[],iKeyMap:{}},sn[1]={batches:[],iKeyMap:{}}}o(Ti,"_clearQueues");function Qi(K,ie,he){var Me=sn[ie];Me||(ie=1,Me=sn[ie]);var Ve=Me.iKeyMap[K];return!Ve&&he&&(Ve=ue.create(K),Me.batches.push(Ve),Me.iKeyMap[K]=Ve),Ve}o(Qi,"_getEventBatch");function Hn(K,ie){jt.canSendRequest()&&!$t&&(wn>0&&yn>wn&&(ie=!0),ie&&mt==null&&Ot.flush(K,null,20))}o(Hn,"_performAutoFlush");function ki(K,ie){ei&&(K=(0,J.Ax)(K));var he=K.latency,Me=Qi(K.iKey,he,!0);return Me.addEvent(K)?(he!==4?(yn++,ie&&K.sendAttempt===0&&Hn(!K.sync,In>0&&Me.count()>=In)):tn++,!0):!1}o(ki,"_addEventToProperQueue");function fi(K,ie,he,Me){for(;he<=ie;){var Ve=Qi(K,ie,!0);if(Ve&&Ve.count()>0){var dt=Ve.split(0,Me),Tt=dt.count();if(Tt>0)return he===4?tn-=Tt:yn-=Tt,V(Be,[dt],Fe.h.QueueFull),!0}he++}return dn(),!1}o(fi,"_dropEventWithLatencyOrLess");function dn(){for(var K=0,ie=0,he=o(function(Ve){var dt=sn[Ve];dt&&dt.batches&&(0,J.tO)(dt.batches,function(Tt){Ve===4?K+=Tt.count():ie+=Tt.count()})},"_loop_1"),Me=1;Me<=4;Me++)he(Me);yn=ie,tn=K}o(dn,"_resetQueueCounts");function Zi(K,ie,he){var Me=!1,Ve=ie===0;return!Ve||jt.canSendRequest()?(0,M.Lm)(Ot.core,function(){return"PostChannel._queueBatches"},function(){for(var dt=[],Tt=4;Tt>=K;){var kt=sn[Tt];kt&&kt.batches&&kt.batches.length>0&&((0,J.tO)(kt.batches,function(Jt){jt.addBatch(Jt)?Me=Me||Jt&&Jt.count()>0:dt=dt.concat(Jt.events()),Tt===4?tn-=Jt.count():yn-=Jt.count()}),kt.batches=[],kt.iKeyMap={}),Tt--}dt.length>0&&kn(Be,dt,Fe.h.KillSwitch),Me&&un>=K&&(un=-1,Ln=0)},function(){return{latency:K,sendType:ie,sendReason:he}},!Ve):(un=un>=0?Math.min(un,K):K,Ln=Math.max(Ln,he)),Me}o(Zi,"_queueBatches");function oi(K,ie){Oi(1,0,ie),dn(),ci(function(){K&&K(),Ht.length>0?mt=Ri(function(){mt=null,oi(Ht.shift(),ie)},0):(mt=null,qn())})}o(oi,"_flushImpl");function ci(K){jt.isCompletelyIdle()?K():mt=Ri(function(){mt=null,ci(K)},On)}o(ci,"_waitForIdleManager");function ar(){Ci(),Ui(),Un=_e,qn()}o(ar,"_resetTransmitProfiles");function Ui(){Cn={},Cn[_e]=[2,1,0],Cn[Ie]=[6,3,0],Cn[fe]=[18,9,0]}o(Ui,"_initializeProfiles");function yi(K,ie){var he=[],Me=jn;Bn&&(Me=Mn),(0,J.tO)(K,function(Ve){Ve&&Ve.count()>0&&(0,J.tO)(Ve.events(),function(dt){dt&&(dt.sync&&(dt.latency=4,dt.sync=!1),dt.sendAttempt<Me?((0,U.if)(dt,Ot.identifier),ti(dt,!1)):he.push(dt))})}),he.length>0&&kn(Be,he,Fe.h.NonRetryableStatus),Bn&&Li(2,2)}o(yi,"_requeueEvents");function Pn(K,ie){var he=Ot._notificationManager||{},Me=he[K];if(Me)try{Me.apply(he,ie)}catch(Ve){(0,Pe.kP)(Ot.diagLog(),1,74,K+" notification failed: "+Ve)}}o(Pn,"_callNotification");function kn(K,ie){for(var he=[],Me=2;Me<arguments.length;Me++)he[Me-2]=arguments[Me];ie&&ie.length>0&&Pn(K,[ie].concat(he))}o(kn,"_notifyEvents");function V(K,ie){for(var he=[],Me=2;Me<arguments.length;Me++)he[Me-2]=arguments[Me];ie&&ie.length>0&&(0,J.tO)(ie,function(Ve){Ve&&Ve.count()>0&&Pn(K,[Ve.events()].concat(he))})}o(V,"_notifyBatchEvents");function v(K,ie,he){K&&K.length>0&&Pn("eventsSendRequest",[ie>=1e3&&ie<=1999?ie-1e3:0,he!==!0])}o(v,"_sendingEvent");function _(K,ie){V("eventsSent",K,ie),qn()}o(_,"_eventsSentEvent");function H(K,ie){V(Be,K,ie>=8e3&&ie<=8999?ie-8e3:Fe.h.Unknown)}o(H,"_eventsDropped");function ye(K){V(Be,K,Fe.h.NonRetryableStatus),qn()}o(ye,"_eventsResponseFail");function ct(K,ie){V(Be,K,Fe.h.Unknown),qn()}o(ct,"_otherEvent");function et(){!ot||!ot.disableAutoBatchFlushLimit?In=Math.max(hi*(Di+1),Vn/6):In=0}o(et,"_setAutoLimits"),(0,J.l_)(Ot,"_setTimeoutOverride",function(){return qt.set},function(K){qt=di(K,qt.clear)}),(0,J.l_)(Ot,"_clearTimeoutOverride",function(){return qt.clear},function(K){qt=di(qt.set,K)})}),Nt}return o(_t,"PostChannel"),_t.__ieDyn=1,_t}(F.i);const Rn=Kn},873:(At,l,T)=>{"use strict";T.d(l,{By:()=>w,cc:()=>S});var R=T(708);function w(B){var U={};return(0,R.rW)(B,function(J,ke){U[J]=ke,U[ke]=J}),(0,R._A)(U)}o(w,"createEnumStyle");function M(B){var U={};return objForEachKey(B,function(J,ke){U[J]=J,U[ke]=J}),deepFreeze(U)}o(M,"createEnumMap");function S(B){var U={};return(0,R.rW)(B,function(J,ke){U[J]=ke[1],U[ke[0]]=ke[1]}),(0,R._A)(U)}o(S,"createValueMap")},928:(At,l,T)=>{"use strict";T.d(l,{h:()=>w});var R=T(873),w=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},310:(At,l,T)=>{"use strict";T.d(l,{X:()=>Te,v:()=>oe});var R=T(873),w,M="Failed",S=M+"MonitorAjax",B="Track",U="Start",J="Stop",ke="Event",Fe="AuthContext",Pe="Exception",F="Local",_e="Session",Ie="Storage",fe="Browser",ae="Cannot",ze="Buffer",X="InstrumentationKey",Te=(0,R.By)({CRITICAL:1,WARNING:2}),oe=(0,R.By)((w={},w[fe+"DoesNotSupport"+F+Ie]=0,w[fe+ae+"Read"+F+Ie]=1,w[fe+ae+"Read"+_e+Ie]=2,w[fe+ae+"Write"+F+Ie]=3,w[fe+ae+"Write"+_e+Ie]=4,w[fe+M+"RemovalFrom"+F+Ie]=5,w[fe+M+"RemovalFrom"+_e+Ie]=6,w[ae+"SendEmptyTelemetry"]=7,w.ClientPerformanceMathError=8,w["ErrorParsingAI"+_e+"Cookie"]=9,w.ErrorPVCalc=10,w[Pe+"WhileLoggingError"]=11,w[M+"AddingTelemetryTo"+ze]=12,w[S+"Abort"]=13,w[S+"Dur"]=14,w[S+"Open"]=15,w[S+"RSC"]=16,w[S+"Send"]=17,w[S+"GetCorrelationHeader"]=18,w[M+"ToAddHandlerForOnBeforeUnload"]=19,w[M+"ToSendQueuedTelemetry"]=20,w[M+"ToReportDataLoss"]=21,w["Flush"+M]=22,w.MessageLimitPerPVExceeded=23,w.MissingRequiredFieldSpecification=24,w.NavigationTimingNotSupported=25,w.OnError=26,w[_e+"RenewalDateIsZero"]=27,w.SenderNotInitialized=28,w[U+B+ke+M]=29,w[J+B+ke+M]=30,w[U+B+M]=31,w[J+B+M]=32,w.TelemetrySampledAndNotSent=33,w[B+ke+M]=34,w[B+Pe+M]=35,w[B+"Metric"+M]=36,w[B+"PV"+M]=37,w[B+"PV"+M+"Calc"]=38,w[B+"Trace"+M]=39,w["Transmission"+M]=40,w[M+"ToSet"+Ie+ze]=41,w[M+"ToRestore"+Ie+ze]=42,w.InvalidBackendResponse=43,w[M+"ToFixDepricatedValues"]=44,w.InvalidDurationValue=45,w.TelemetryEnvelopeInvalid=46,w.CreateEnvelopeError=47,w[ae+"SerializeObject"]=48,w[ae+"SerializeObjectNonSerializable"]=49,w.CircularReferenceDetected=50,w["Clear"+Fe+M]=51,w[Pe+"Truncated"]=52,w.IllegalCharsInName=53,w.ItemNotInArray=54,w.MaxAjaxPerPVExceeded=55,w.MessageTruncated=56,w.NameTooLong=57,w.SampleRateOutOfRange=58,w["Set"+Fe+M]=59,w["Set"+Fe+M+"AccountName"]=60,w.StringValueTooLong=61,w.StartCalledMoreThanOnce=62,w.StopCalledWithoutStart=63,w["TelemetryInitializer"+M]=64,w.TrackArgumentsNotSpecified=65,w.UrlTooLong=66,w[_e+Ie+ze+"Full"]=67,w[ae+"AccessCookie"]=68,w.IdTooLong=69,w.InvalidEvent=70,w[S+"SetRequestHeader"]=71,w["Send"+fe+"InfoOnUserInit"]=72,w["Plugin"+Pe]=73,w["Notification"+Pe]=74,w.SnippetScriptLoadFailure=99,w["Invalid"+X]=100,w[ae+"ParseAiBlobValue"]=101,w.InvalidContentBlob=102,w[B+"PageAction"+ke+M]=103,w[M+"AddingCustomDefinedRequestContext"]=104,w["InMemory"+Ie+ze+"Full"]=105,w[X+"Deprecation"]=106,w))},121:(At,l,T)=>{"use strict";T.d(l,{F:()=>Pe});var R=T(88),w=T(679),M=T(96),S=T(900),B=T(18),U=T(708),J=T(41),ke=T(880),Fe=T(288),Pe=function(F){(0,R.ne)(_e,F);function _e(){var Ie=F.call(this)||this;return(0,w.Z)(_e,Ie,function(fe,ae){fe[M.VL]=function(Te,oe,Q,z){ae[M.VL](Te,oe,Q||new B.AQ(Te),z||new ke.f(Te))},fe.track=function(Te){(0,Fe.Lm)(fe[J.kl](),function(){return"AppInsightsCore:track"},function(){Te===null&&(X(Te),(0,U._y)("Invalid telemetry item")),ze(Te),ae.track(Te)},function(){return{item:Te}},!Te.sync)};function ze(Te){(0,U.le)(Te[M.I])&&(X(Te),(0,U._y)("telemetry name required"))}o(ze,"_validateTelemetryItem");function X(Te){var oe=fe[M.tb]();oe&&oe[J.$F]([Te],2)}o(X,"_notifyInvalidEvent")}),Ie}return o(_e,"AppInsightsCore"),_e.__ieDyn=1,_e}(S.A)},900:(At,l,T)=>{"use strict";T.d(l,{A:()=>Ue});var R=T(88),w=T(679),M=T(91),S=T(96),B=T(708),U=T(41),J=T(589),ke=T(833),Fe=500,Pe="Channel has invalid priority - ";function F(re,L,Se){L&&(0,B.kJ)(L)&&L[S.R5]>0&&(L=L.sort(function(Re,Ae){return Re[U.yi]-Ae[U.yi]}),(0,B.tO)(L,function(Re){Re[U.yi]<Fe&&(0,B._y)(Pe+Re[S.pZ])}),re[S.MW]({queue:(0,B.FL)(L),chain:(0,J.jV)(L,Se[S.TC],Se)}))}o(F,"_addChannelQueue");function _e(re,L){function Se(){return(0,J.CD)(null,L[S.TC],L,null)}o(Se,"_getTelCtx");function Re($,pe,j,ue){var Ge=$?$[S.R5]+1:1;function at(){Ge--,Ge===0&&(ue&&ue(),ue=null)}o(at,"_runChainOnComplete"),Ge>0&&(0,B.tO)($,function(ne){if(ne&&ne.queue[S.R5]>0){var ve=ne.chain,ee=pe[S.zV](ve);ee[S.Fc](at),j(ee)}else Ge--}),at()}o(Re,"_processChannelQueue");function Ae($,pe){var j=pe||{reason:0};return Re(re,$,function(ue){ue[S.uL](j)},function(){$[S.uL](j)}),!0}o(Ae,"_doUpdate");function qe($,pe){var j=pe||{reason:0,isAsync:!1};return Re(re,$,function(ue){ue[S.uL](j)},function(){$[S.uL](j),nt=!1}),!0}o(qe,"_doTeardown");function Rt($){var pe=null;return re&&re[S.R5]>0&&(0,B.tO)(re,function(j){if(j&&j.queue[S.R5]>0&&((0,B.tO)(j.queue,function(ue){if(ue[S.pZ]===$)return pe=ue,-1}),pe))return-1}),pe}o(Rt,"_getChannel");var nt=!1,$e={identifier:"ChannelControllerPlugin",priority:Fe,initialize:function($,pe,j,ue){nt=!0,(0,B.tO)(re,function(Ge){Ge&&Ge.queue[S.R5]>0&&(0,ke.bP)((0,J.CD)(Ge.chain,$,pe),j)})},isInitialized:function(){return nt},processTelemetry:function($,pe){Re(re,pe||Se(),function(j){j[S.uL]($)},function(){pe[S.uL]($)})},update:Ae,pause:function(){Re(re,Se(),function($){$.iterate(function(pe){pe.pause&&pe.pause()})},null)},resume:function(){Re(re,Se(),function($){$.iterate(function(pe){pe.resume&&pe.resume()})},null)},teardown:qe,getChannel:Rt,flush:function($,pe,j,ue){var Ge=1,at=!1,ne=null;ue=ue||5e3;function ve(){Ge--,at&&Ge===0&&(ne&&(clearTimeout(ne),ne=null),pe&&pe(at),pe=null)}return o(ve,"doCallback"),Re(re,Se(),function(ee){ee.iterate(function(W){if(W[S.kL]){Ge++;var me=!1;W[S.kL]($,function(){me=!0,ve()},j)||me||($&&ne==null?ne=setTimeout(function(){ne=null,ve()},ue):ve())}})},function(){at=!0,ve()}),!0},_setQueue:function($){re=$}};return $e}o(_e,"createChannelControllerPlugin");function Ie(re,L,Se){var Re=[];if(re&&(0,B.tO)(re,function(qe){return F(Re,qe,Se)}),L){var Ae=[];(0,B.tO)(L,function(qe){qe[U.yi]>Fe&&Ae[S.MW](qe)}),F(Re,Ae,Se)}return Re}o(Ie,"createChannelQueues");var fe=T(242),ae=T(883),ze=T(158),X=T(18),Te=T(288),oe=T(63),Q=T(630),z=function(re){(0,R.ne)(L,re);function L(){var Se=re.call(this)||this;Se.identifier="TelemetryInitializerPlugin",Se.priority=199;var Re,Ae;qe(),(0,w.Z)(L,Se,function(Rt,nt){Rt.addTelemetryInitializer=function($e){var $={id:Re++,fn:$e};Ae[S.MW]($);var pe={remove:function(){(0,B.tO)(Ae,function(j,ue){if(j.id===$.id)return Ae[S.cb](ue,1),-1})}};return pe},Rt[U.hL]=function($e,$){for(var pe=!1,j=Ae[S.R5],ue=0;ue<j;++ue){var Ge=Ae[ue];if(Ge)try{if(Ge.fn[S.ZV](null,[$e])===!1){pe=!0;break}}catch(at){(0,X.kP)($[S.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(at),{exception:(0,Q.eU)(at)},!0)}}pe||Rt[S.uL]($e,$)},Rt[S.F3]=function(){qe()}});function qe(){Re=0,Ae=[]}return o(qe,"_initDefaults"),Se}return o(L,"TelemetryInitializerPlugin"),L.__ieDyn=1,L}(oe.i),Z=T(790),se="Plugins must provide initialize method",Ke="_notificationManager",xe="SDK is still unloading...",We="SDK is not initialized",Je={loggingLevelConsole:1};function Y(re,L){return new Te.Jk(L)}o(Y,"_createPerfManager");function E(re,L,Se){var Re,Ae=[],qe={};return(0,B.tO)(Se,function(Rt){((0,B.le)(Rt)||(0,B.le)(Rt[S.VL]))&&(0,B._y)(se);var nt=Rt[U.yi],$e=Rt[S.pZ];Rt&&nt&&((0,B.le)(qe[nt])?qe[nt]=$e:(0,X.jV)(re,"Two extensions have same priority #"+nt+" - "+qe[nt]+", "+$e)),(!nt||nt<L)&&Ae[S.MW](Rt)}),Re={all:Se},Re[U.oV]=Ae,Re}o(E,"_validateExtensions");function Ne(re,L){var Se=!1;return(0,B.tO)(L,function(Re){if(Re===re)return Se=!0,-1}),Se}o(Ne,"_isPluginPresent");function He(){var re;return(0,M.pu)((re={},re[S.g]=function(L){},re[S.n7]=function(L){},re[U.uC]=function(L){},re[U.$F]=function(L,Se){},re[U.f_]=function(L,Se){},re))}o(He,"_createDummyNotificationManager");var Ue=function(){function re(){var L,Se,Re,Ae,qe,Rt,nt,$e,$,pe,j,ue,Ge,at,ne,ve,ee,W,me,ge,vt=0;(0,w.Z)(re,this,function(Ce){D(),Ce[S.yl]=function(){return Se},Ce[S.VL]=function(Ye,Et,Yt,Pt){at&&(0,B._y)(xe),Ce[S.yl]()&&(0,B._y)("Core should not be initialized more than once"),L=Ye||{},Ce[S.TC]=L,(0,B.le)(Ye[S.p$])&&(0,B._y)("Please provide instrumentation key"),Ae=Pt,Ce[Ke]=Pt,bt(),hn(),mn(),Yt&&(Ce[S.eZ]=Yt);var nn=(0,B.qK)(L,U.js,[]);$=[],$[S.MW].apply($,(0,R.$h)((0,R.$h)([],Et,!1),nn,!1)),ue=(0,B.qK)(L,U.Z,[]),Oe(null),(!Ge||Ge[S.R5]===0)&&(0,B._y)("No "+U.Z+" available"),Se=!0,Ce.releaseQueue()},Ce.getTransmissionControls=function(){var Ye=[];return Ge&&(0,B.tO)(Ge,function(Et){Ye[S.MW](Et.queue)}),(0,B.FL)(Ye)},Ce.track=function(Ye){Ye.iKey=Ye.iKey||L[S.p$],Ye[S.Z_]=Ye[S.Z_]||(0,B.Y6)(new Date),Ye.ver=Ye.ver||"4.0",!at&&Ce[S.yl]()?I()[S.uL](Ye):Re[S.MW](Ye)},Ce[S.SD]=I,Ce[S.tb]=function(){return Ae||(Ae=He(),Ce[Ke]=Ae),Ae},Ce[S.g]=function(Ye){Ae&&Ae[S.g](Ye)},Ce[S.n7]=function(Ye){Ae&&Ae[S.n7](Ye)},Ce.getCookieMgr=function(){return nt||(nt=(0,fe.Nz)(L,Ce[S.eZ])),nt},Ce.setCookieMgr=function(Ye){nt=Ye},Ce[U.kl]=function(){if(!qe&&!Rt&&(0,B.v4)(L.enablePerfMgr)){var Ye=(0,B.v4)(L[U.DN]);(0,B.mf)(Ye)&&(Rt=Ye(Ce,Ce[S.tb]()))}return qe||Rt||(0,Te.j5)()},Ce.setPerfMgr=function(Ye){qe=Ye},Ce.eventCnt=function(){return Re[S.R5]},Ce.releaseQueue=function(){if(Se&&Re[S.R5]>0){var Ye=Re;Re=[],(0,B.tO)(Ye,function(Et){I()[S.uL](Et)})}},Ce.pollInternalLogs=function(Ye){ve=Ye||null;var Et=(0,B.v4)(L.diagnosticLogInterval);return(!Et||!(Et>0))&&(Et=1e4),vt&&clearInterval(vt),vt=setInterval(function(){st()},Et),vt},Ce[S.LS]=function(){vt&&(clearInterval(vt),vt=0,st())},(0,B.Vb)(Ce,function(){return ne},["addTelemetryInitializer"]),Ce.unload=function(Ye,Et,Yt){var Pt;Ye===void 0&&(Ye=!0),Se||(0,B._y)(We),at&&(0,B._y)(xe);var nn=(Pt={reason:50},Pt[S.d]=Ye,Pt.flushComplete=!1,Pt),it=(0,J.Bt)(ht(),Ce);it[S.Fc](function(){D(),Et&&Et(nn)},Ce);function rn(ln){nn.flushComplete=ln,at=!0,W.run(it,nn),Ce[S.LS](),it[S.uL](nn)}o(rn,"_doUnload"),Dt(Ye,rn,6,Yt)||rn(!1)},Ce[S.TO]=St,Ce.addPlugin=function(Ye,Et,Yt,Pt){if(!Ye){Pt&&Pt(!1),$n(se);return}var nn=St(Ye[S.pZ]);if(nn&&!Et){Pt&&Pt(!1),$n("Plugin ["+Ye[S.pZ]+"] is already loaded!");return}var it={reason:16};function rn(en){$[S.MW](Ye),it.added=[Ye],Oe(it),Pt&&Pt(!0)}if(o(rn,"_addPlugin"),nn){var ln=[nn.plugin],cn={reason:2,isAsync:!!Yt};Ft(ln,cn,function(en){en?(it.removed=ln,it.reason|=32,rn(!0)):Pt&&Pt(!1)})}else rn(!1)},Ce.evtNamespace=function(){return ee},Ce[S.kL]=Dt,Ce.getTraceCtx=function(Ye){return ge||(ge=(0,ke.Yn)()),ge},Ce.setTraceCtx=function(Ye){ge=Ye||null},(0,B.Oi)(Ce,"addUnloadCb",function(){return W},"add");function D(){Se=!1,L=(0,B.mm)(!0,{},Je),Ce[S.TC]=L,Ce[S.eZ]=new X.AQ(L),Ce[S.iC]=[],ne=new z,Re=[],Ae=null,qe=null,Rt=null,nt=null,$e=null,pe=null,$=[],j=null,ue=null,Ge=null,at=!1,ve=null,ee=(0,ae.J)("AIBaseCore",!0),W=(0,Z.Y)(),ge=null}o(D,"_initDefaults");function I(){return(0,J.CD)(ht(),L,Ce)}o(I,"_createTelCtx");function Oe(Ye){var Et=E(Ce[S.eZ],Fe,$);pe=Et[U.oV],$e=null;var Yt=Et.all;if(Ge=(0,B.FL)(Ie(ue,Yt,Ce)),j){var Pt=(0,B.UA)(Yt,j);Pt!==-1&&Yt[S.cb](Pt,1),Pt=(0,B.UA)(pe,j),Pt!==-1&&pe[S.cb](Pt,1),j._setQueue(Ge)}else j=_e(Ge,Ce);Yt[S.MW](j),pe[S.MW](j),Ce[S.iC]=(0,ke.AA)(Yt),j[S.VL](L,Ce,Yt),(0,ke.bP)(I(),Yt),Ce[S.iC]=(0,B.FL)((0,ke.AA)(pe||[])).slice(),Ye&&Dn(Ye)}o(Oe,"_initPluginChain");function St(Ye){var Et,Yt=null,Pt=null;return(0,B.tO)(Ce[S.iC],function(nn){if(nn[S.pZ]===Ye&&nn!==j&&nn!==ne)return Pt=nn,-1}),!Pt&&j&&(Pt=j.getChannel(Ye)),Pt&&(Yt=(Et={plugin:Pt},Et[S.$h]=function(nn){(0,ke.OY)(Pt)[U.mE]=!nn},Et.isEnabled=function(){var nn=(0,ke.OY)(Pt);return!nn[S.fi]&&!nn[U.mE]},Et.remove=function(nn,it){var rn;nn===void 0&&(nn=!0);var ln=[Pt],cn=(rn={reason:1},rn[S.d]=nn,rn);Ft(ln,cn,function(en){en&&Oe({reason:32,removed:ln}),it&&it(en)})},Et)),Yt}o(St,"_getPlugin");function ht(){if(!$e){var Ye=(pe||[]).slice();(0,B.UA)(Ye,ne)===-1&&Ye[S.MW](ne),$e=(0,J.jV)((0,ke.AA)(Ye),L,Ce)}return $e}o(ht,"_getPluginChain");function Ft(Ye,Et,Yt){if(Ye&&Ye[S.R5]>0){var Pt=(0,J.jV)(Ye,L,Ce),nn=(0,J.Bt)(Pt,Ce);nn[S.Fc](function(){var it=!1,rn=[];(0,B.tO)($,function(cn,en){Ne(cn,Ye)?it=!0:rn[S.MW](cn)}),$=rn;var ln=[];ue&&((0,B.tO)(ue,function(cn,en){var _n=[];(0,B.tO)(cn,function(Nn){Ne(Nn,Ye)?it=!0:_n[S.MW](Nn)}),ln[S.MW](_n)}),ue=ln),Yt&&Yt(it)}),nn[S.uL](Et)}else Yt(!1)}o(Ft,"_removePlugins");function st(){var Ye=Ce[S.eZ]?Ce[S.eZ].queue:[];Ye&&((0,B.tO)(Ye,function(Et){var Yt,Pt=(Yt={},Yt[S.I]=ve||"InternalMessageId: "+Et[S.Gc],Yt.iKey=(0,B.v4)(L[S.p$]),Yt.time=(0,B.Y6)(new Date),Yt.baseType=X.lQ.dataType,Yt.baseData={message:Et[S.gU]},Yt);Ce.track(Pt)}),Ye[S.R5]=0)}o(st,"_flushInternalLogs");function Dt(Ye,Et,Yt,Pt){return j?j[S.kL](Ye,Et,Yt||6,Pt):(Et&&Et(!1),!0)}o(Dt,"_flushChannels");function bt(){var Ye=(0,B.v4)(L.disableDbgExt);Ye===!0&&me&&(Ae[S.n7](me),me=null),Ae&&!me&&Ye!==!0&&(me=(0,ze.p)(L),Ae[S.g](me))}o(bt,"_initDebugListener");function hn(){var Ye=(0,B.v4)(L.enablePerfMgr);!Ye&&Rt&&(Rt=null),Ye&&(0,B.qK)(L,U.DN,Y)}o(hn,"_initPerfManager");function mn(){var Ye=(0,B.qK)(L,U.Zh,{});Ye.NotificationManager=Ae}o(mn,"_initExtConfig");function Dn(Ye){var Et=(0,J.xy)(ht(),Ce);(!Ce._updateHook||Ce._updateHook(Et,Ye)!==!0)&&Et[S.uL](Ye)}o(Dn,"_doUpdate");function $n(Ye){var Et=Ce[S.eZ];Et?(0,X.kP)(Et,2,73,Ye):(0,B._y)(Ye)}o($n,"_logOrThrowError")})}return o(re,"BaseCore"),re.__ieDyn=1,re}()},63:(At,l,T)=>{"use strict";T.d(l,{i:()=>ke});var R=T(679),w=T(96),M=T(708),S=T(41),B=T(589),U=T(790),J="getPlugin",ke=function(){function Fe(){var Pe=this,F,_e,Ie,fe,ae;Te(),(0,R.Z)(Fe,Pe,function(oe){oe[w.VL]=function(Q,z,Z,se){X(Q,z,se),F=!0},oe[w.fi]=function(Q,z){var Z,se=oe[S.oV];if(!se||Q&&se!==Q[S.oV]())return;var Ke,xe=!1,We=Q||(0,B.Bt)(null,se,Ie&&Ie[J]?Ie[J]():Ie),Je=z||(Z={reason:0},Z[w.d]=!1,Z);function Y(){if(!xe){xe=!0,fe.run(We,z);var E=ae;ae=[],(0,M.tO)(E,function(Ne){Ne.rm()}),Ke===!0&&We[w.uL](Je),Te()}}return o(Y,"_unloadCallback"),!oe[w.F3]||oe[w.F3](We,Je,Y)!==!0?Y():Ke=!0,Ke},oe[w.Tu]=function(Q,z){var Z=oe[S.oV];if(!Z||Q&&Z!==Q[S.oV]())return;var se,Ke=!1,xe=Q||(0,B.xy)(null,Z,Ie&&Ie[J]?Ie[J]():Ie),We=z||{reason:0};function Je(){Ke||(Ke=!0,X(xe.getCfg(),xe.core(),xe[w.W2]()))}return o(Je,"_updateCallback"),!oe._doUpdate||oe._doUpdate(xe,We,Je)!==!0?Je():se=!0,se},oe._addHook=function(Q){Q&&((0,M.kJ)(Q)?ae=ae.concat(Q):ae[w.MW](Q))},(0,M.Oi)(oe,"_addUnloadCb",function(){return fe},"add")}),Pe[w.mc]=function(oe){return ze(oe)[w.mc]()},Pe[w.yl]=function(){return F},Pe.setInitialized=function(oe){F=oe},Pe[w.Jd]=function(oe){Ie=oe},Pe[w.uL]=function(oe,Q){Q?Q[w.uL](oe):Ie&&(0,M.mf)(Ie[S.hL])&&Ie[S.hL](oe,null)},Pe._getTelCtx=ze;function ze(oe){oe===void 0&&(oe=null);var Q=oe;if(!Q){var z=_e||(0,B.CD)(null,{},Pe[S.oV]);Ie&&Ie[J]?Q=z[w.zV](null,Ie[J]):Q=z[w.zV](null,Ie)}return Q}o(ze,"_getTelCtx");function X(oe,Q,z){oe&&(0,M.sO)(oe,S.Zh,[],null,M.le),!z&&Q&&(z=Q[w.SD]()[w.W2]());var Z=Ie;Ie&&Ie[J]&&(Z=Ie[J]()),Pe[S.oV]=Q,_e=(0,B.CD)(z,oe,Q,Z)}o(X,"_setDefaults");function Te(){F=!1,Pe[S.oV]=null,_e=null,Ie=null,ae=[],fe=(0,U.Y)()}o(Te,"_initDefaults")}return o(Fe,"BaseTelemetryPlugin"),Fe.__ieDyn=1,Fe}()},242:(At,l,T)=>{"use strict";T.d(l,{kj:()=>Q,JP:()=>xe,Nz:()=>We,p7:()=>Je,UY:()=>re});var R=T(96),w=T(18),M=T(630),S=T(708),B=T(41),U="toGMTString",J="toUTCString",ke="cookie",Fe="expires",Pe="enabled",F="isCookieUseDisabled",_e="disableCookiesUsage",Ie="_ckMgr",fe=null,ae=null,ze=null,X=(0,M.Me)(),Te={},oe={};function Q(L,Se){var Re=We[Ie]||oe[Ie];return Re||(Re=We[Ie]=We(L,Se),oe[Ie]=Re),Re}o(Q,"_gblCookieMgr");function z(L){return L?L.isEnabled():!0}o(z,"_isMgrEnabled");function Z(L){var Se=L[R.Lk]=L[R.Lk]||{};if((0,S.sO)(Se,"domain",L.cookieDomain,S.BX,S.le),(0,S.sO)(Se,"path",L.cookiePath||"/",null,S.le),(0,S.le)(Se[Pe])){var Re=void 0;(0,S.o8)(L[F])||(Re=!L[F]),(0,S.o8)(L[_e])||(Re=!L[_e]),Se[Pe]=Re}return Se}o(Z,"_createCookieMgrConfig");function se(L,Se){return Se&&L&&(0,S.kJ)(L.ignoreCookies)?L.ignoreCookies[R.ou](Se)!==-1:!1}o(se,"_isIgnoredCookie");function Ke(L,Se){return Se&&L&&(0,S.kJ)(L.blockedCookies)&&L.blockedCookies[R.ou](Se)!==-1?!0:se(L,Se)}o(Ke,"_isBlockedCookie");function xe(L,Se){var Re;if(L)Re=L.getCookieMgr();else if(Se){var Ae=Se[R.Lk];Ae[Ie]?Re=Ae[Ie]:Re=We(Se)}return Re||(Re=Q(Se,(L||{})[R.eZ])),Re}o(xe,"safeGetCookieMgr");function We(L,Se){var Re,Ae=Z(L||oe),qe=Ae.path||"/",Rt=Ae.domain,nt=Ae[Pe]!==!1,$e=(Re={isEnabled:function(){var $=nt&&Je(Se),pe=oe[Ie];return $&&pe&&$e!==pe&&($=z(pe)),$}},Re[R.$h]=function($){nt=$!==!1},Re.set=function($,pe,j,ue,Ge){var at=!1;if(z($e)&&!Ke(Ae,$)){var ne={},ve=(0,S.nd)(pe||B.qS),ee=ve[R.ou](";");if(ee!==-1&&(ve=(0,S.nd)(pe[R.zc](0,ee)),ne=Y(pe[R.zc](ee+1))),(0,S.sO)(ne,"domain",ue||Rt,S.fQ,S.o8),!(0,S.le)(j)){var W=(0,M.w1)();if((0,S.o8)(ne[Fe])){var me=(0,S.m6)(),ge=me+j*1e3;if(ge>0){var vt=new Date;vt.setTime(ge),(0,S.sO)(ne,Fe,E(vt,W?U:J)||E(vt,W?U:J)||B.qS,S.fQ)}}W||(0,S.sO)(ne,"max-age",B.qS+j,null,S.o8)}var Ce=(0,M.k$)();Ce&&Ce.protocol==="https:"&&((0,S.sO)(ne,"secure",null,null,S.o8),ae===null&&(ae=!re(((0,M.jW)()||{})[R.qV])),ae&&(0,S.sO)(ne,"SameSite","None",null,S.o8)),(0,S.sO)(ne,"path",Ge||qe,null,S.o8);var D=Ae.setCookie||Ue;D($,Ne(ve,ne)),at=!0}return at},Re.get=function($){var pe=B.qS;return z($e)&&!se(Ae,$)&&(pe=(Ae.getCookie||He)($)),pe},Re.del=function($,pe){var j=!1;return z($e)&&(j=$e.purge($,pe)),j},Re.purge=function($,pe){var j,ue=!1;if(Je(Se)){var Ge=(j={},j.path=pe||"/",j[Fe]="Thu, 01 Jan 1970 00:00:01 GMT",j);(0,M.w1)()||(Ge["max-age"]="0");var at=Ae.delCookie||Ue;at($,Ne(B.qS,Ge)),ue=!0}return ue},Re);return $e[Ie]=$e,$e}o(We,"createCookieMgr");function Je(L){if(fe===null){fe=!1;try{var Se=X||{};fe=Se[ke]!==void 0}catch(Re){(0,w.kP)(L,2,68,"Cannot access document.cookie - "+(0,S.jj)(Re),{exception:(0,M.eU)(Re)})}}return fe}o(Je,"areCookiesSupported");function Y(L){var Se={};if(L&&L[R.R5]){var Re=(0,S.nd)(L)[R.w6](";");(0,S.tO)(Re,function(Ae){if(Ae=(0,S.nd)(Ae||B.qS),Ae){var qe=Ae[R.ou]("=");qe===-1?Se[Ae]=null:Se[(0,S.nd)(Ae[R.zc](0,qe))]=(0,S.nd)(Ae[R.zc](qe+1))}})}return Se}o(Y,"_extractParts");function E(L,Se){return(0,S.mf)(L[Se])?L[Se]():null}o(E,"_formatDate");function Ne(L,Se){var Re=L||B.qS;return(0,S.rW)(Se,function(Ae,qe){Re+="; "+Ae+((0,S.le)(qe)?B.qS:"="+qe)}),Re}o(Ne,"_formatCookieValue");function He(L){var Se=B.qS;if(X){var Re=X[ke]||B.qS;ze!==Re&&(Te=Y(Re),ze=Re),Se=(0,S.nd)(Te[L]||B.qS)}return Se}o(He,"_getCookieValue");function Ue(L,Se){X&&(X[ke]=L+"="+Se)}o(Ue,"_setCookieValue");function re(L){return(0,S.HD)(L)?!!((0,S._Q)(L,"CPU iPhone OS 12")||(0,S._Q)(L,"iPad; CPU OS 12")||(0,S._Q)(L,"Macintosh; Intel Mac OS X 10_14")&&(0,S._Q)(L,"Version/")&&(0,S._Q)(L,"Safari")||(0,S._Q)(L,"Macintosh; Intel Mac OS X 10_14")&&(0,S.Id)(L,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,S._Q)(L,"Chrome/5")||(0,S._Q)(L,"Chrome/6")||(0,S._Q)(L,"UnrealEngine")&&!(0,S._Q)(L,"Chrome")||(0,S._Q)(L,"UCBrowser/12")||(0,S._Q)(L,"UCBrowser/11")):!1}o(re,"uaDisallowsSameSiteNone")},843:(At,l,T)=>{"use strict";T.d(l,{GW:()=>_e,Jj:()=>Ie,DO:()=>ae,Tr:()=>ze,zB:()=>Te,oF:()=>Q,vn:()=>z,ej:()=>Z,d8:()=>se,kT:()=>Ke});var R=T(91),w=T(96),M=T(242),S=T(630),B=T(869),U=T(708),J=T(41),ke=T(878),Fe=null,Pe,F=null;function _e(){var xe=ae();return xe[w.zc](0,8)+"-"+xe[w.zc](8,12)+"-"+xe[w.zc](12,16)+"-"+xe[w.zc](16,20)+"-"+xe[w.zc](20)}o(_e,"newGuid");function Ie(){var xe=(0,S.r)();return xe&&xe.now?xe.now():(0,U.m6)()}o(Ie,"perfNow");function fe(xe,We){if(xe&&We){var Je=xe[_DYN_LENGTH],Y=Je-We[_DYN_LENGTH];return xe[_DYN_SUBSTRING](Y>=0?Y:0,Je)===We}return!1}o(fe,"strEndsWith");function ae(){for(var xe=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],We=J.qS,Je,Y=0;Y<4;Y++)Je=(0,ke._l)(),We+=xe[Je&15]+xe[Je>>4&15]+xe[Je>>8&15]+xe[Je>>12&15]+xe[Je>>16&15]+xe[Je>>20&15]+xe[Je>>24&15]+xe[Je>>28&15];var E=xe[8+((0,ke._l)()&3)|0];return We[w.Jn](0,8)+We[w.Jn](9,4)+"4"+We[w.Jn](13,3)+E+We[w.Jn](16,3)+We[w.Jn](19,12)}o(ae,"generateW3CId");var ze={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:R.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:B.Ib,dateNow:U.m6,isIE:S.w1,disableCookies:Q,newGuid:_e,perfNow:Ie,newId:ke.pZ,randomValue:ke.az,random32:ke._l,mwcRandomSeed:ke.CN,mwcRandom32:ke.F6,generateW3CId:ae},X=/[xy]/g,Te={Attach:B.pZ,AttachEvent:B.pZ,Detach:B.pD,DetachEvent:B.pD};function oe(xe,We){var Je=(0,M.kj)(xe,We),Y=ze._canUseCookies;return Fe===null&&(Fe=[],Pe=Y,(0,U.l_)(ze,"_canUseCookies",function(){return Pe},function(E){Pe=E,(0,U.tO)(Fe,function(Ne){Ne[w.$h](E)})})),(0,U.UA)(Fe,Je)===-1&&Fe[w.MW](Je),(0,U.jn)(Y)&&Je[w.$h](Y),(0,U.jn)(Pe)&&Je[w.$h](Pe),Je}o(oe,"_legacyCookieMgr");function Q(){oe()[w.$h](!1)}o(Q,"disableCookies");function z(xe){return oe(null,xe).isEnabled()}o(z,"canUseCookies");function Z(xe,We){return oe(null,xe).get(We)}o(Z,"getCookie");function se(xe,We,Je,Y){oe(null,xe).set(We,Je,null,Y)}o(se,"setCookie");function Ke(xe,We){return oe(null,xe).del(We)}o(Ke,"deleteCookie")},883:(At,l,T)=>{"use strict";T.d(l,{J:()=>Ie,K:()=>fe});var R=T(392),w=T(96),M=T(708),S=T(41),B=T(878),U=R.RJ,J="2.8.9",ke="."+(0,B.pZ)(6),Fe=0;function Pe(ae,ze,X){if(U)try{return U(ae,ze,{value:X,enumerable:!1,configurable:!0}),!0}catch(Te){}return!1}o(Pe,"_createAccessor");function F(ae){return ae[w.xv]===1||ae[w.xv]===9||!+ae[w.xv]}o(F,"_canAcceptData");function _e(ae,ze){var X=ze[ae.id];if(!X){X={};try{F(ze)&&(Pe(ze,ae.id,X)||(ze[ae.id]=X))}catch(Te){}}return X}o(_e,"_getCache");function Ie(ae,ze){return ze===void 0&&(ze=!1),(0,M.Gf)(ae+Fe+++(ze?"."+J:S.qS)+ke)}o(Ie,"createUniqueNamespace");function fe(ae){var ze={id:Ie("_aiData-"+(ae||S.qS)+"."+J),accept:function(X){return F(X)},get:function(X,Te,oe,Q){var z=X[ze.id];return z?z[(0,M.Gf)(Te)]:(Q&&(z=_e(ze,X),z[(0,M.Gf)(Te)]=oe),oe)},kill:function(X,Te){if(X&&X[Te])try{delete X[Te]}catch(oe){}}};return ze}o(fe,"createElmNodeData")},158:(At,l,T)=>{"use strict";T.d(l,{j:()=>ke,p:()=>Fe});var R=T(96),w=T(630),M=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],S=null,B;function U(Pe,F){return function(){var _e=arguments,Ie=ke(F);if(Ie){var fe=Ie.listener;fe&&fe[Pe]&&fe[Pe][R.ZV](fe,_e)}}}o(U,"_listenerProxyFunc");function J(){var Pe=(0,w.a8)("Microsoft");return Pe&&(S=Pe.ApplicationInsights),S}o(J,"_getExtensionNamespace");function ke(Pe){var F=S;return!F&&Pe.disableDbgExt!==!0&&(F=S||J()),F?F.ChromeDbgExt:null}o(ke,"getDebugExt");function Fe(Pe){if(!B){B={};for(var F=0;F<M[R.R5];F++)B[M[F]]=U(M[F],Pe)}return B}o(Fe,"getDebugListener")},18:(At,l,T)=>{"use strict";T.d(l,{lQ:()=>_e,vH:()=>Ie,AQ:()=>fe,kP:()=>ze,jV:()=>X,L4:()=>Te});var R=T(679),w=T(96),M=T(158),S=T(630),B=T(708),U=T(41),J="AI (Internal): ",ke="AI: ",Fe="AITR_";function Pe(oe){return oe?'"'+oe[w.i7](/\"/g,U.qS)+'"':U.qS}o(Pe,"_sanitizeDiagnosticText");function F(oe,Q){var z=(0,S.dr)();if(z){var Z="log";z[oe]&&(Z=oe),(0,B.mf)(z[Z])&&z[Z](Q)}}o(F,"_logToConsole");var _e=function(){function oe(Q,z,Z,se){Z===void 0&&(Z=!1);var Ke=this;Ke[w.Gc]=Q,Ke[w.gU]=(Z?ke:J)+Q;var xe=U.qS;(0,S.nS)()&&(xe=(0,S.xA)().stringify(se));var We=(z?" message:"+Pe(z):U.qS)+(se?" props:"+Pe(xe):U.qS);Ke[w.gU]+=We}return o(oe,"_InternalLogMessage"),oe.dataType="MessageData",oe}();function Ie(oe,Q){return(oe||{})[w.eZ]||new fe(Q)}o(Ie,"safeGetLogger");var fe=function(){function oe(Q){this.identifier="DiagnosticLogger",this.queue=[];var z=0,Z={},se,Ke,xe,We;(0,R.Z)(oe,this,function(Je){E(Q||{}),Je.consoleLoggingLevel=function(){return se},Je.telemetryLoggingLevel=function(){return Ke},Je.maxInternalMessageLimit=function(){return xe},Je[w.Fr]=function(){return We},Je.throwInternal=function(Ue,re,L,Se,Re){Re===void 0&&(Re=!1);var Ae=new _e(re,L,Re,Se);if(We)throw(0,S.eU)(Ae);var qe=Ue===1?U.ys:U.cL;if((0,B.o8)(Ae[w.gU]))He("throw"+(Ue===1?"Critical":"Warning"),Ae);else{if(Re){var Rt=+Ae[w.Gc];!Z[Rt]&&se>=Ue&&(Je[qe](Ae[w.gU]),Z[Rt]=!0)}else se>=Ue&&Je[qe](Ae[w.gU]);Y(Ue,Ae)}},Je[U.cL]=function(Ue){F("warn",Ue),He("warning",Ue)},Je[U.ys]=function(Ue){F("error",Ue),He("error",Ue)},Je.resetInternalMessageCount=function(){z=0,Z={}},Je[w.jk]=Y;function Y(Ue,re){if(!Ne()){var L=!0,Se=Fe+re[w.Gc];if(Z[Se]?L=!1:Z[Se]=!0,L&&(Ue<=Ke&&(Je.queue[w.MW](re),z++,He(Ue===1?"error":"warn",re)),z===xe)){var Re="Internal events throttle limit per PageView reached for this app.",Ae=new _e(23,Re,!1);Je.queue[w.MW](Ae),Ue===1?Je[U.ys](Re):Je[U.cL](Re)}}}o(Y,"_logInternalMessage");function E(Ue){se=(0,B.v4)(Ue.loggingLevelConsole,0),Ke=(0,B.v4)(Ue.loggingLevelTelemetry,1),xe=(0,B.v4)(Ue.maxMessageLimit,25),We=(0,B.v4)(Ue[w.Fr],!1)}o(E,"_setDefaultsFromConfig");function Ne(){return z>=xe}o(Ne,"_areInternalMessagesThrottled");function He(Ue,re){var L=(0,M.j)(Q||{});L&&L[w.mc]&&L[w.mc](Ue,re)}o(He,"_debugExtMsg")})}return o(oe,"DiagnosticLogger"),oe.__ieDyn=1,oe}();function ae(oe){return oe||new fe}o(ae,"_getLogger");function ze(oe,Q,z,Z,se,Ke){Ke===void 0&&(Ke=!1),ae(oe).throwInternal(Q,z,Z,se,Ke)}o(ze,"_throwInternal");function X(oe,Q){ae(oe)[U.cL](Q)}o(X,"_warnToConsole");function Te(oe,Q,z){ae(oe)[w.jk](Q,z)}o(Te,"_logInternalMessage")},630:(At,l,T)=>{"use strict";T.d(l,{dI:()=>Je,a8:()=>Y,Ym:()=>E,Jj:()=>Ne,Nv:()=>He,Me:()=>Ue,d6:()=>re,jW:()=>L,fE:()=>Se,s1:()=>Re,k$:()=>Ae,dr:()=>qe,r:()=>Rt,nS:()=>nt,xA:()=>$e,MX:()=>$,gz:()=>pe,b$:()=>j,w1:()=>ue,sA:()=>Ge,eU:()=>at,MF:()=>ve,JO:()=>ee,cp:()=>W,Z3:()=>me,ed:()=>vt,pI:()=>Ce});var R=T(392),w=T(91),M=T(96),S=T(708),B=T(41),U="window",J="document",ke="documentMode",Fe="navigator",Pe="history",F="location",_e="console",Ie="performance",fe="JSON",ae="crypto",ze="msCrypto",X="ReactNative",Te="msie",oe="trident/",Q="XMLHttpRequest",z=null,Z=null,se=!1,Ke=null,xe=null;function We(D,I){var Oe=!1;if(D){try{if(Oe=I in D,!Oe){var St=D[R.hB];St&&(Oe=I in St)}}catch(Ft){}if(!Oe)try{var ht=new D;Oe=!(0,S.o8)(ht[I])}catch(Ft){}}return Oe}o(We,"_hasProperty");function Je(D){se=D}o(Je,"setEnableEnvMocks");function Y(D){var I=(0,w.Rd)();return I&&I[D]?I[D]:D===U&&E()?window:null}o(Y,"getGlobalInst");function E(){return Boolean(typeof window===R.fK&&window)}o(E,"hasWindow");function Ne(){return E()?window:Y(U)}o(Ne,"getWindow");function He(){return Boolean(typeof document===R.fK&&document)}o(He,"hasDocument");function Ue(){return He()?document:Y(J)}o(Ue,"getDocument");function re(){return Boolean(typeof navigator===R.fK&&navigator)}o(re,"hasNavigator");function L(){return re()?navigator:Y(Fe)}o(L,"getNavigator");function Se(){return Boolean(typeof history===R.fK&&history)}o(Se,"hasHistory");function Re(){return Se()?history:Y(Pe)}o(Re,"getHistory");function Ae(D){if(D&&se){var I=Y("__mockLocation");if(I)return I}return typeof location===R.fK&&location?location:Y(F)}o(Ae,"getLocation");function qe(){return typeof console!==R.jA?console:Y(_e)}o(qe,"getConsole");function Rt(){return Y(Ie)}o(Rt,"getPerformance");function nt(){return Boolean(typeof JSON===R.fK&&JSON||Y(fe)!==null)}o(nt,"hasJSON");function $e(){return nt()?JSON||Y(fe):null}o($e,"getJSON");function $(){return Y(ae)}o($,"getCrypto");function pe(){return Y(ze)}o(pe,"getMsCrypto");function j(){var D=L();return D&&D.product?D.product===X:!1}o(j,"isReactNative");function ue(){var D=L();if(D&&(D[M.qV]!==Z||z===null)){Z=D[M.qV];var I=(Z||B.qS)[M.T1]();z=(0,S._Q)(I,Te)||(0,S._Q)(I,oe)}return z}o(ue,"isIE");function Ge(D){if(D===void 0&&(D=null),!D){var I=L()||{};D=I?(I[M.qV]||B.qS)[M.T1]():B.qS}var Oe=(D||B.qS)[M.T1]();if((0,S._Q)(Oe,Te)){var St=Ue()||{};return Math.max(parseInt(Oe[M.w6](Te)[1]),St[ke]||0)}else if((0,S._Q)(Oe,oe)){var ht=parseInt(Oe[M.w6](oe)[1]);if(ht)return ht+4}return null}o(Ge,"getIEVersion");function at(D){var I=Object[R.hB].toString[M._S](D),Oe=B.qS;return I==="[object Error]"?Oe="{ stack: '"+D.stack+"', message: '"+D.message+"', name: '"+D[M.I]+"'":nt()&&(Oe=$e().stringify(D)),I+Oe}o(at,"dumpObj");function ne(D){if(!D||!isString(D)){var I=L()||{};D=I?(I[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var Oe=(D||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return Oe[_DYN_INDEX_OF]("safari")>=0}o(ne,"isSafari");function ve(){return xe===null&&(xe=re()&&Boolean(L().sendBeacon)),xe}o(ve,"isBeaconsSupported");function ee(D){var I=!1;try{I=!!Y("fetch");var Oe=Y("Request");I&&D&&Oe&&(I=We(Oe,"keepalive"))}catch(St){}return I}o(ee,"isFetchSupported");function W(){return Ke===null&&(Ke=typeof XDomainRequest!==R.jA,Ke&&me()&&(Ke=Ke&&!We(Y(Q),"withCredentials"))),Ke}o(W,"useXDomainRequest");function me(){var D=!1;try{var I=Y(Q);D=!!I}catch(Oe){}return D}o(me,"isXhrSupported");function ge(D,I){if(D)for(var Oe=0;Oe<D[M.R5];Oe++){var St=D[Oe];if(St[M.I]&&St[M.I]===I)return St}return{}}o(ge,"_getNamedValue");function vt(D){var I=Ue();return I&&D?ge(I.querySelectorAll("meta"),D).content:null}o(vt,"findMetaTag");function Ce(D){var I,Oe=Rt();if(Oe){var St=Oe.getEntriesByType("navigation")||[];I=ge((St[M.R5]>0?St[0]:{}).serverTiming,D).description}return I}o(Ce,"findNamedServerTiming")},869:(At,l,T)=>{"use strict";T.d(l,{um:()=>We,jU:()=>Ue,XO:()=>re,QY:()=>L,pZ:()=>Se,pD:()=>Re,Ib:()=>Ae,C1:()=>qe,yw:()=>nt,nJ:()=>$e,c9:()=>$,JA:()=>pe,TJ:()=>j,C9:()=>ue,nD:()=>Ge,Yl:()=>at});var R=T(96),w=T(883),M=T(630),S=T(708),B=T(41),U="on",J="attachEvent",ke="addEventListener",Fe="detachEvent",Pe="removeEventListener",F="events",_e="visibilitychange",Ie="pagehide",fe="pageshow",ae="unload",ze="beforeunload",X=(0,w.J)("aiEvtPageHide"),Te=(0,w.J)("aiEvtPageShow"),oe=/\.[\.]+/g,Q=/[\.]+$/,z=1,Z=(0,w.K)("events"),se=/^([^.]*)(?:\.(.+)|)/;function Ke(ne){return ne&&ne[R.i7]?ne[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,B.qS):ne}o(Ke,"_normalizeNamespace");function xe(ne,ve){var ee;if(ve){var W=B.qS;(0,S.kJ)(ve)?(W=B.qS,(0,S.tO)(ve,function(ge){ge=Ke(ge),ge&&(ge[0]!=="."&&(ge="."+ge),W+=ge)})):W=Ke(ve),W&&(W[0]!=="."&&(W="."+W),ne=(ne||B.qS)+W)}var me=se.exec(ne||B.qS)||[];return ee={},ee[R.P6]=me[1],ee.ns=(me[2]||B.qS).replace(oe,".").replace(Q,B.qS)[R.w6](".").sort().join("."),ee}o(xe,"_getEvtNamespace");function We(ne,ve,ee){var W=[],me=Z.get(ne,F,{},!1),ge=xe(ve,ee);return(0,S.rW)(me,function(vt,Ce){(0,S.tO)(Ce,function(D){var I;(!ge[R.P6]||ge[R.P6]===D.evtName[R.P6])&&(!ge.ns||ge.ns===ge.ns)&&W[R.MW]((I={},I[R.I]=D.evtName[R.P6]+(D.evtName.ns?"."+D.evtName.ns:B.qS),I.handler=D[R.Kn],I))})}),W}o(We,"__getRegisteredEvents");function Je(ne,ve,ee){ee===void 0&&(ee=!0);var W=Z.get(ne,F,{},ee),me=W[ve];return me||(me=W[ve]=[]),me}o(Je,"_getRegisteredEvents");function Y(ne,ve,ee,W){ne&&ve&&ve[R.P6]&&(ne[Pe]?ne[Pe](ve[R.P6],ee,W):ne[Fe]&&ne[Fe](U+ve[R.P6],ee))}o(Y,"_doDetach");function E(ne,ve,ee,W){var me=!1;return ne&&ve&&ve[R.P6]&&ee&&(ne[ke]?(ne[ke](ve[R.P6],ee,W),me=!0):ne[J]&&(ne[J](U+ve[R.P6],ee),me=!0)),me}o(E,"_doAttach");function Ne(ne,ve,ee,W){for(var me=ve[R.R5];me--;){var ge=ve[me];ge&&(!ee.ns||ee.ns===ge.evtName.ns)&&(!W||W(ge))&&(Y(ne,ge.evtName,ge[R.Kn],ge.capture),ve[R.cb](me,1))}}o(Ne,"_doUnregister");function He(ne,ve,ee){if(ve[R.P6])Ne(ne,Je(ne,ve[R.P6]),ve,ee);else{var W=Z.get(ne,F,{});(0,S.rW)(W,function(me,ge){Ne(ne,ge,ve,ee)}),(0,S.FY)(W)[R.R5]===0&&Z.kill(ne,F)}}o(He,"_unregisterEvents");function Ue(ne,ve){var ee;return ve?((0,S.kJ)(ve)?ee=[ne].concat(ve):ee=[ne,ve],ee=xe("xx",ee).ns[R.w6](".")):ee=ne,ee}o(Ue,"mergeEvtNamespace");function re(ne,ve,ee,W,me){var ge;me===void 0&&(me=!1);var vt=!1;if(ne)try{var Ce=xe(ve,W);if(vt=E(ne,Ce,ee,me),vt&&Z.accept(ne)){var D=(ge={guid:z++,evtName:Ce},ge[R.Kn]=ee,ge.capture=me,ge);Je(ne,Ce.type)[R.MW](D)}}catch(I){}return vt}o(re,"eventOn");function L(ne,ve,ee,W,me){if(me===void 0&&(me=!1),ne)try{var ge=xe(ve,W),vt=!1;He(ne,ge,function(Ce){return ge.ns&&!ee||Ce[R.Kn]===ee?(vt=!0,!0):!1}),vt||Y(ne,ge,ee,me)}catch(Ce){}}o(L,"eventOff");function Se(ne,ve,ee,W){return W===void 0&&(W=!1),re(ne,ve,ee,null,W)}o(Se,"attachEvent");function Re(ne,ve,ee,W){W===void 0&&(W=!1),L(ne,ve,ee,null,W)}o(Re,"detachEvent");function Ae(ne,ve,ee){var W=!1,me=(0,M.Jj)();me&&(W=re(me,ne,ve,ee),W=re(me.body,ne,ve,ee)||W);var ge=(0,M.Me)();return ge&&(W=re(ge,ne,ve,ee)||W),W}o(Ae,"addEventHandler");function qe(ne,ve,ee){var W=(0,M.Jj)();W&&(L(W,ne,ve,ee),L(W.body,ne,ve,ee));var me=(0,M.Me)();me&&L(me,ne,ve,ee)}o(qe,"removeEventHandler");function Rt(ne,ve,ee,W){var me=!1;return ve&&ne&&ne[R.R5]>0&&(0,S.tO)(ne,function(ge){ge&&(!ee||(0,S.UA)(ee,ge)===-1)&&(me=Ae(ge,ve,W)||me)}),me}o(Rt,"_addEventListeners");function nt(ne,ve,ee,W){var me=!1;return ve&&ne&&(0,S.kJ)(ne)&&(me=Rt(ne,ve,ee,W),!me&&ee&&ee[R.R5]>0&&(me=Rt(ne,ve,null,W))),me}o(nt,"addEventListeners");function $e(ne,ve,ee){ne&&(0,S.kJ)(ne)&&(0,S.tO)(ne,function(W){W&&qe(W,ve,ee)})}o($e,"removeEventListeners");function $(ne,ve,ee){return nt([ze,ae,Ie],ne,ve,ee)}o($,"addPageUnloadEventListener");function pe(ne,ve){$e([ze,ae,Ie],ne,ve)}o(pe,"removePageUnloadEventListener");function j(ne,ve,ee){function W(vt){var Ce=(0,M.Me)();ne&&Ce&&Ce.visibilityState==="hidden"&&ne(vt)}o(W,"_handlePageVisibility");var me=Ue(X,ee),ge=Rt([Ie],ne,ve,me);return(!ve||(0,S.UA)(ve,_e)===-1)&&(ge=Rt([_e],W,ve,me)||ge),!ge&&ve&&(ge=j(ne,null,ee)),ge}o(j,"addPageHideEventListener");function ue(ne,ve){var ee=Ue(X,ve);$e([Ie],ne,ee),$e([_e],null,ee)}o(ue,"removePageHideEventListener");function Ge(ne,ve,ee){function W(vt){var Ce=(0,M.Me)();ne&&Ce&&Ce.visibilityState==="visible"&&ne(vt)}o(W,"_handlePageVisibility");var me=Ue(Te,ee),ge=Rt([fe],ne,ve,me);return ge=Rt([_e],W,ve,me)||ge,!ge&&ve&&(ge=Ge(ne,null,ee)),ge}o(Ge,"addPageShowEventListener");function at(ne,ve){var ee=Ue(Te,ve);$e([fe],ne,ee),$e([_e],null,ee)}o(at,"removePageShowEventListener")},708:(At,l,T)=>{"use strict";T.d(l,{Ym:()=>Se,o8:()=>Re,le:()=>qe,BX:()=>Rt,nr:()=>nt,Kn:()=>$e,mf:()=>$,Gf:()=>j,rW:()=>ue,Id:()=>Ge,xe:()=>ne,_Q:()=>ee,J_:()=>W,kJ:()=>me,VZ:()=>vt,HD:()=>Ce,hj:()=>D,jn:()=>I,Y6:()=>ht,tO:()=>st,UA:()=>Dt,Mr:()=>bt,Xz:()=>hn,nd:()=>mn,FY:()=>Ye,l_:()=>Et,_A:()=>Pt,FL:()=>nn,Xi:()=>it,m6:()=>rn,jj:()=>ln,sO:()=>cn,qK:()=>en,v4:()=>_n,F:()=>Nn,fQ:()=>Xn,_y:()=>di,cf:()=>hi,Oi:()=>ir,Vb:()=>Gi,hl:()=>rr,Ax:()=>zi,mm:()=>Di});var R=T(392),w=T(91),M=T(96),S=T(41),B="toISOString",U="endsWith",J="startsWith",ke="indexOf",Fe="map",Pe="reduce",F="trim",_e="toString",Ie="__proto__",fe="constructor",ae=R.RJ,ze=R.Pw.freeze,X=R.Pw.seal,Te=R.Pw.keys,oe=String[R.hB],Q=oe[F],z=oe[U],Z=oe[J],se=Date[R.hB],Ke=se[B],xe=Array.isArray,We=R.V4[_e],Je=R.CY[_e],Y=Je[M._S](R.Pw),E=/-([a-z])/g,Ne=/([^\w\d_$])/g,He=/^(\d+[\w\d_$])/,Ue=Object.getPrototypeOf;function re(k){if(k){if(Ue)return Ue(k);var Be=k[Ie]||k[R.hB]||k[fe];if(Be)return Be}return null}o(re,"_getObjProto");function L(k){return We[_DYN_CALL](k)}o(L,"objToString");function Se(k,Be){return typeof k===Be}o(Se,"isTypeof");function Re(k){return k===void 0||typeof k===R.jA}o(Re,"isUndefined");function Ae(k){return!Re(k)}o(Ae,"isNotUndefined");function qe(k){return k===null||Re(k)}o(qe,"isNullOrUndefined");function Rt(k){return!qe(k)}o(Rt,"isNotNullOrUndefined");function nt(k,Be){return!!(k&&R.CY[M._S](k,Be))}o(nt,"hasOwnProperty");function $e(k){return!!(k&&typeof k===R.fK)}o($e,"isObject");function $(k){return!!(k&&typeof k===R.cb)}o($,"isFunction");function pe(k){return k&&$(k.then)}o(pe,"isPromiseLike");function j(k){var Be=k;return Be&&Ce(Be)&&(Be=Be[M.i7](E,function(Xe,ut){return ut.toUpperCase()}),Be=Be[M.i7](Ne,"_"),Be=Be[M.i7](He,function(Xe,ut){return"_"+ut})),Be}o(j,"normalizeJsName");function ue(k,Be){if(k)for(var Xe in k)R.CY[M._S](k,Xe)&&Be[M._S](k,Xe,k[Xe])}o(ue,"objForEachKey");function Ge(k,Be){var Xe=!1;return k&&Be&&!(Xe=k===Be)&&(Xe=z?k[U](Be):at(k,Be)),Xe}o(Ge,"strEndsWith");function at(k,Be){var Xe=!1,ut=Be?Be[M.R5]:0,lt=k?k[M.R5]:0;if(ut&&lt&&lt>=ut&&!(Xe=k===Be)){for(var Lt=lt-1,Kn=ut-1;Kn>=0;Kn--){if(k[Lt]!=Be[Kn])return!1;Lt--}Xe=!0}return Xe}o(at,"_strEndsWithPoly");function ne(k,Be){var Xe=!1;return k&&Be&&!(Xe=k===Be)&&(Xe=Z?k[J](Be):ve(k,Be)),Xe}o(ne,"strStartsWith");function ve(k,Be){var Xe=!1,ut=Be?Be[M.R5]:0;if(k&&ut&&k[M.R5]>=ut&&!(Xe=k===Be)){for(var lt=0;lt<ut;lt++)if(k[lt]!==Be[lt])return!1;Xe=!0}return Xe}o(ve,"_strStartsWithPoly");function ee(k,Be){return k&&Be?k[M.ou](Be)!==-1:!1}o(ee,"strContains");function W(k){return!!(k&&We[M._S](k)==="[object Date]")}o(W,"isDate");var me=xe||ge;function ge(k){return!!(k&&We[M._S](k)==="[object Array]")}o(ge,"_isArrayPoly");function vt(k){return!!(k&&We[M._S](k)==="[object Error]")}o(vt,"isError");function Ce(k){return typeof k=="string"}o(Ce,"isString");function D(k){return typeof k=="number"}o(D,"isNumber");function I(k){return typeof k=="boolean"}o(I,"isBoolean");function Oe(k){return typeof k=="symbol"}o(Oe,"isSymbol");function St(k){var Be=!1;if(k&&typeof k=="object"){var Xe=Ue?Ue(k):re(k);Xe?(Xe[fe]&&R.CY[M._S](Xe,fe)&&(Xe=Xe[fe]),Be=typeof Xe===R.cb&&Je[M._S](Xe)===Y):Be=!0}return Be}o(St,"isPlainObject");function ht(k){if(k)return Ke?k[B]():Ft(k)}o(ht,"toISOString");function Ft(k){if(k&&k.getUTCFullYear){var Be=o(function(Xe){var ut=String(Xe);return ut[M.R5]===1&&(ut="0"+ut),ut},"pad");return k.getUTCFullYear()+"-"+Be(k.getUTCMonth()+1)+"-"+Be(k.getUTCDate())+"T"+Be(k.getUTCHours())+":"+Be(k.getUTCMinutes())+":"+Be(k.getUTCSeconds())+"."+String((k.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(Ft,"_toISOStringPoly");function st(k,Be,Xe){var ut=k[M.R5];try{for(var lt=0;lt<ut&&!(lt in k&&Be[M._S](Xe||k,k[lt],lt,k)===-1);lt++);}catch(Lt){}}o(st,"arrForEach");function Dt(k,Be,Xe){if(k){if(k[ke])return k[ke](Be,Xe);var ut=k[M.R5],lt=Xe||0;try{for(var Lt=Math.max(lt>=0?lt:ut-Math.abs(lt),0);Lt<ut;Lt++)if(Lt in k&&k[Lt]===Be)return Lt}catch(Kn){}}return-1}o(Dt,"arrIndexOf");function bt(k,Be,Xe){var ut;if(k){if(k[Fe])return k[Fe](Be,Xe);var lt=k[M.R5],Lt=Xe||k;ut=new Array(lt);try{for(var Kn=0;Kn<lt;Kn++)Kn in k&&(ut[Kn]=Be[M._S](Lt,k[Kn],k))}catch(Rn){}}return ut}o(bt,"arrMap");function hn(k,Be,Xe){var ut;if(k){if(k[Pe])return k[Pe](Be,Xe);var lt=k[M.R5],Lt=0;if(arguments[M.R5]>=3)ut=arguments[2];else{for(;Lt<lt&&!(Lt in k);)Lt++;ut=k[Lt++]}for(;Lt<lt;)Lt in k&&(ut=Be(ut,k[Lt],Lt,k)),Lt++}return ut}o(hn,"arrReduce");function mn(k){return k&&(k=Q&&k[F]?k[F]():k[M.i7]?k[M.i7](/^\s+|(?=\s)\s+$/g,S.qS):k),k}o(mn,"strTrim");var Dn=!{toString:null}.propertyIsEnumerable("toString"),$n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Ye(k){var Be=typeof k;if(Be!==R.cb&&(Be!==R.fK||k===null)&&(0,w.ZU)("objKeys called on non-object"),!Dn&&Te)return Te(k);var Xe=[];for(var ut in k)k&&R.CY[M._S](k,ut)&&Xe[M.MW](ut);if(Dn)for(var lt=$n[M.R5],Lt=0;Lt<lt;Lt++)k&&R.CY[M._S](k,$n[Lt])&&Xe[M.MW]($n[Lt]);return Xe}o(Ye,"objKeys");function Et(k,Be,Xe,ut){if(ae)try{var lt={enumerable:!0,configurable:!0};return Xe&&(lt.get=Xe),ut&&(lt.set=ut),ae(k,Be,lt),!0}catch(Lt){}return!1}o(Et,"objDefineAccessors");function Yt(k){return k}o(Yt,"_doNothing");function Pt(k){return ze&&ue(k,function(Be,Xe){(me(Xe)||$e(Xe))&&ze(Xe)}),nn(k)}o(Pt,"deepFreeze");var nn=ze||Yt,it=X||Yt;function rn(){var k=Date;return k.now?k.now():new k().getTime()}o(rn,"dateNow");function ln(k){return vt(k)?k[M.I]:S.qS}o(ln,"getExceptionName");function cn(k,Be,Xe,ut,lt){var Lt=Xe;return k&&(Lt=k[Be],Lt!==Xe&&(!lt||lt(Lt))&&(!ut||ut(Xe))&&(Lt=Xe,k[Be]=Lt)),Lt}o(cn,"setValue");function en(k,Be,Xe){var ut;return k?(ut=k[Be],!ut&&qe(ut)&&(ut=Re(Xe)?{}:Xe,k[Be]=ut)):ut=Re(Xe)?{}:Xe,ut}o(en,"getSetValue");function _n(k,Be){return qe(k)?Be:k}o(_n,"getCfgValue");function Nn(k){return!k}o(Nn,"isNotTruthy");function Xn(k){return!!k}o(Xn,"isTruthy");function di(k){throw new Error(k)}o(di,"throwError");function On(k,Be){var Xe=null,ut=null;return $(k)?Xe=k:ut=k,function(){var lt=arguments;if(Xe&&(ut=Xe()),ut)return ut[Be][M.ZV](ut,lt)}}o(On,"_createProxyFunction");function hi(k,Be,Xe){if(k&&Be&&$e(k)&&$e(Be)){var ut=o(function(Lt){if(Ce(Lt)){var Kn=Be[Lt];$(Kn)?(!Xe||Xe(Lt,!0,Be,k))&&(k[Lt]=On(Be,Lt)):(!Xe||Xe(Lt,!1,Be,k))&&(nt(k,Lt)&&delete k[Lt],Et(k,Lt,function(){return Be[Lt]},function(Rn){Be[Lt]=Rn})||(k[Lt]=Kn))}},"_loop_1");for(var lt in Be)ut(lt)}return k}o(hi,"proxyAssign");function ir(k,Be,Xe,ut,lt){k&&Be&&Xe&&(lt!==!1||Re(k[Be]))&&(k[Be]=On(Xe,ut))}o(ir,"proxyFunctionAs");function Gi(k,Be,Xe,ut){return k&&Be&&$e(k)&&me(Xe)&&st(Xe,function(lt){Ce(lt)&&ir(k,lt,Be,lt,ut)}),k}o(Gi,"proxyFunctions");function rr(k){return function(){function Be(){var Xe=this;k&&ue(k,function(ut,lt){Xe[ut]=lt})}return o(Be,"class_1"),Be}()}o(rr,"createClassFromInterface");function zi(k){return k&&R.rl&&(k=(0,R.Pw)((0,R.rl)({},k))),k}o(zi,"optimizeObject");function Di(k,Be,Xe,ut,lt,Lt){var Kn=arguments,Rn=Kn[0]||{},yt=Kn[M.R5],_t=!1,Nt=1;for(yt>0&&I(Rn)&&(_t=Rn,Rn=Kn[Nt]||{},Nt++),$e(Rn)||(Rn={});Nt<yt;Nt++){var ot=Kn[Nt],Qt=me(ot),Ht=$e(ot);for(var mt in ot){var an=Qt&&mt in ot||Ht&&R.CY[M._S](ot,mt);if(!!an){var tn=ot[mt],Sn=void 0;if(_t&&tn&&((Sn=me(tn))||St(tn))){var yn=Rn[mt];Sn?me(yn)||(yn=[]):St(yn)||(yn={}),tn=Di(_t,yn,tn)}tn!==void 0&&(Rn[mt]=tn)}}}return Rn}o(Di,"objExtend")},41:(At,l,T)=>{"use strict";T.d(l,{qS:()=>R,Z:()=>w,oV:()=>M,DN:()=>S,mE:()=>B,Zh:()=>U,js:()=>J,hL:()=>ke,yi:()=>Fe,uC:()=>Pe,$F:()=>F,f_:()=>_e,C$:()=>Ie,ys:()=>fe,cL:()=>ae,kl:()=>ze});var R="",w="channels",M="core",S="createPerfMgr",B="disabled",U="extensionConfig",J="extensions",ke="processTelemetry",Fe="priority",Pe="eventsSent",F="eventsDiscarded",_e="eventsSendRequest",Ie="perfEvent",fe="errorToConsole",ae="warnToConsole",ze="getPerfMgr"},880:(At,l,T)=>{"use strict";T.d(l,{f:()=>U});var R=T(679),w=T(96),M=T(708),S=T(41);function B(J,ke,Fe,Pe){(0,M.tO)(J,function(F){if(F&&F[ke])if(Fe)setTimeout(function(){return Pe(F)},0);else try{Pe(F)}catch(_e){}})}o(B,"_runListeners");var U=function(){function J(ke){this.listeners=[];var Fe=!!(ke||{}).perfEvtsSendAll;(0,R.Z)(J,this,function(Pe){Pe[w.g]=function(F){Pe.listeners[w.MW](F)},Pe[w.n7]=function(F){for(var _e=(0,M.UA)(Pe[w.dE],F);_e>-1;)Pe.listeners[w.cb](_e,1),_e=(0,M.UA)(Pe[w.dE],F)},Pe[S.uC]=function(F){B(Pe[w.dE],S.uC,!0,function(_e){_e[S.uC](F)})},Pe[S.$F]=function(F,_e){B(Pe[w.dE],S.$F,!0,function(Ie){Ie[S.$F](F,_e)})},Pe[S.f_]=function(F,_e){B(Pe[w.dE],S.f_,_e,function(Ie){Ie[S.f_](F,_e)})},Pe[S.C$]=function(F){F&&(Fe||!F[w.PL]())&&B(Pe[w.dE],S.C$,!1,function(_e){F[w.d]?setTimeout(function(){return _e[S.C$](F)},0):_e[S.C$](F)})}})}return o(J,"NotificationManager"),J.__ieDyn=1,J}()},288:(At,l,T)=>{"use strict";T.d(l,{zn:()=>Fe,Jk:()=>Pe,Lm:()=>_e,j5:()=>fe});var R=T(679),w=T(96),M=T(708),S=T(41),B="ctx",U="ParentContextKey",J="ChildrenContextKey",ke=null,Fe=function(){function ae(ze,X,Te){var oe=this,Q=!1;if(oe.start=(0,M.m6)(),oe[w.I]=ze,oe[w.d]=Te,oe[w.PL]=function(){return!1},(0,M.mf)(X)){var z;Q=(0,M.l_)(oe,"payload",function(){return!z&&(0,M.mf)(X)&&(z=X(),X=null),z})}oe[w.T]=function(Z){return Z?Z===ae[U]||Z===ae[J]?oe[Z]:(oe[B]||{})[Z]:null},oe[w.wu]=function(Z,se){if(Z)if(Z===ae[U])oe[Z]||(oe[w.PL]=function(){return!0}),oe[Z]=se;else if(Z===ae[J])oe[Z]=se;else{var Ke=oe[B]=oe[B]||{};Ke[Z]=se}},oe[w.Km]=function(){var Z=0,se=oe[w.T](ae[J]);if((0,M.kJ)(se))for(var Ke=0;Ke<se[w.R5];Ke++){var xe=se[Ke];xe&&(Z+=xe[w.Z_])}oe[w.Z_]=(0,M.m6)()-oe.start,oe.exTime=oe[w.Z_]-Z,oe[w.Km]=function(){},!Q&&(0,M.mf)(X)&&(oe.payload=X())}}return o(ae,"PerfEvent"),ae.ParentContextKey="parent",ae.ChildrenContextKey="childEvts",ae}(),Pe=function(){function ae(ze){this.ctx={},(0,R.Z)(ae,this,function(X){X.create=function(Te,oe,Q){return new Fe(Te,oe,Q)},X.fire=function(Te){Te&&(Te[w.Km](),ze&&(0,M.mf)(ze[S.C$])&&ze[S.C$](Te))},X[w.wu]=function(Te,oe){if(Te){var Q=X[B]=X[B]||{};Q[Te]=oe}},X[w.T]=function(Te){return(X[B]||{})[Te]}})}return o(ae,"PerfManager"),ae.__ieDyn=1,ae}(),F="CoreUtils.doPerf";function _e(ae,ze,X,Te,oe){if(ae){var Q=ae;if(Q[S.kl]&&(Q=Q[S.kl]()),Q){var z=void 0,Z=Q[w.T](F);try{if(z=Q.create(ze(),Te,oe),z){if(Z&&z[w.wu]&&(z[w.wu](Fe[U],Z),Z[w.T]&&Z[w.wu])){var se=Z[w.T](Fe[J]);se||(se=[],Z[w.wu](Fe[J],se)),se[w.MW](z)}return Q[w.wu](F,z),X(z)}}catch(Ke){z&&z[w.wu]&&z[w.wu]("exception",Ke)}finally{z&&Q.fire(z),Q[w.wu](F,Z)}}}return X()}o(_e,"doPerf");function Ie(ae){ke=ae}o(Ie,"setGblPerfMgr");function fe(){return ke}o(fe,"getGblPerfMgr")},589:(At,l,T)=>{"use strict";T.d(l,{CD:()=>fe,Bt:()=>ae,xy:()=>ze,jV:()=>X,Vi:()=>oe});var R=T(96),w=T(18),M=T(630),S=T(708),B=T(41),U=T(288),J=T(833),ke="TelemetryPluginChain",Fe="_hasRun",Pe="_getTelCtx",F=0;function _e(Q,z,Z){for(;Q;){if(Q[R.TO]()===Z)return Q;Q=Q[R.W2]()}return X([Z],z[R.TC]||{},z)}o(_e,"_getNextProxyStart");function Ie(Q,z,Z,se){var Ke=null,xe=[];se!==null&&(Ke=se?_e(Q,Z,se):Q);var We={_next:Y,ctx:{core:function(){return Z},diagLog:function(){return(0,w.vH)(Z,z)},getCfg:function(){return z},getExtCfg:E,getConfig:Ne,hasNext:function(){return!!Ke},getNext:function(){return Ke},setNext:function(Ue){Ke=Ue},iterate:He,onComplete:Je}};function Je(Ue,re){for(var L=[],Se=2;Se<arguments.length;Se++)L[Se-2]=arguments[Se];Ue&&xe[R.MW]({func:Ue,self:(0,S.o8)(re)?We.ctx:re,args:L})}o(Je,"_addOnComplete");function Y(){var Ue=Ke;if(Ke=Ue?Ue[R.W2]():null,!Ue){var re=xe;re&&re[R.R5]>0&&((0,S.tO)(re,function(L){try{L.func[R._S](L.self,L.args)}catch(Se){(0,w.kP)(Z[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,M.eU)(Se))}}),xe=[])}return Ue}o(Y,"_moveNext");function E(Ue,re,L){re===void 0&&(re={}),L===void 0&&(L=0);var Se;if(z){var Re=z[B.Zh];Re&&Ue&&(Se=Re[Ue])}if(!Se)Se=re;else if((0,S.Kn)(re)&&L!==0){var Ae=(0,S.mm)(!0,re,Se);z&&L===2&&(0,S.rW)(re,function(qe){if((0,S.le)(Ae[qe])){var Rt=z[qe];(0,S.le)(Rt)||(Ae[qe]=Rt)}}),Se=Ae}return Se}o(E,"_getExtCfg");function Ne(Ue,re,L){L===void 0&&(L=!1);var Se,Re=E(Ue,null);return Re&&!(0,S.le)(Re[re])?Se=Re[re]:z&&!(0,S.le)(z[re])&&(Se=z[re]),(0,S.le)(Se)?L:Se}o(Ne,"_getConfig");function He(Ue){for(var re;re=We._next();){var L=re[R.TO]();L&&Ue(L)}}return o(He,"_iterateChain"),We}o(Ie,"_createInternalContext");function fe(Q,z,Z,se){var Ke=Ie(Q,z,Z,se),xe=Ke.ctx;function We(Y){var E=Ke._next();return E&&E[B.hL](Y,xe),!E}o(We,"_processNext");function Je(Y,E){return Y===void 0&&(Y=null),(0,S.kJ)(Y)&&(Y=X(Y,z,Z,E)),fe(Y||xe[R.W2](),z,Z,E)}return o(Je,"_createNew"),xe[R.uL]=We,xe[R.zV]=Je,xe}o(fe,"createProcessTelemetryContext");function ae(Q,z,Z){var se=z[R.TC]||{},Ke=Ie(Q,se,z,Z),xe=Ke.ctx;function We(Y){var E=Ke._next();return E&&E.unload(xe,Y),!E}o(We,"_processNext");function Je(Y,E){return Y===void 0&&(Y=null),(0,S.kJ)(Y)&&(Y=X(Y,se,z,E)),ae(Y||xe[R.W2](),z,E)}return o(Je,"_createNew"),xe[R.uL]=We,xe[R.zV]=Je,xe}o(ae,"createProcessTelemetryUnloadContext");function ze(Q,z,Z){var se=z[R.TC]||{},Ke=Ie(Q,se,z,Z),xe=Ke.ctx;function We(Y){return xe.iterate(function(E){(0,S.mf)(E[R.Tu])&&E[R.Tu](xe,Y)})}o(We,"_processNext");function Je(Y,E){return Y===void 0&&(Y=null),(0,S.kJ)(Y)&&(Y=X(Y,se,z,E)),ze(Y||xe[R.W2](),z,E)}return o(Je,"_createNew"),xe[R.uL]=We,xe[R.zV]=Je,xe}o(ze,"createProcessTelemetryUpdateContext");function X(Q,z,Z,se){var Ke=null,xe=!se;if((0,S.kJ)(Q)&&Q[R.R5]>0){var We=null;(0,S.tO)(Q,function(Je){if(!xe&&se===Je&&(xe=!0),xe&&Je&&(0,S.mf)(Je[B.hL])){var Y=Te(Je,z,Z);Ke||(Ke=Y),We&&We._setNext(Y),We=Y}})}return se&&!Ke?X([se],z,Z):Ke}o(X,"createTelemetryProxyChain");function Te(Q,z,Z){var se=null,Ke=(0,S.mf)(Q[B.hL]),xe=(0,S.mf)(Q[R.Jd]),We;Q?We=Q[R.pZ]+"-"+Q[B.yi]+"-"+F++:We="Unknown-0-"+F++;var Je={getPlugin:function(){return Q},getNext:function(){return se},processTelemetry:Ne,unload:He,update:Ue,_id:We,_setNext:function(re){se=re}};function Y(){var re;return Q&&(0,S.mf)(Q[Pe])&&(re=Q[Pe]()),re||(re=fe(Je,z,Z)),re}o(Y,"_getTelCtx");function E(re,L,Se,Re,Ae){var qe=!1,Rt=Q?Q[R.pZ]:ke,nt=re[Fe];return nt||(nt=re[Fe]={}),re.setNext(se),Q&&(0,U.Lm)(re[B.oV](),function(){return Rt+":"+Se},function(){nt[We]=!0;try{var $e=se?se._id:B.qS;$e&&(nt[$e]=!1),qe=L(re)}catch(pe){var $=se?nt[se._id]:!0;$&&(qe=!0),(!se||!$)&&(0,w.kP)(re[R.mc](),1,73,"Plugin ["+Rt+"] failed during "+Se+" - "+(0,M.eU)(pe)+", run flags: "+(0,M.eU)(nt))}},Re,Ae),qe}o(E,"_processChain");function Ne(re,L){L=L||Y();function Se(Re){if(!Q||!Ke)return!1;var Ae=(0,J.OY)(Q);return Ae[R.fi]||Ae[B.mE]?!1:(xe&&Q[R.Jd](se),Q[B.hL](re,Re),!0)}o(Se,"_callProcessTelemetry"),E(L,Se,"processTelemetry",function(){return{item:re}},!re.sync)||L[R.uL](re)}o(Ne,"_processTelemetry");function He(re,L){function Se(){var Re=!1;if(Q){var Ae=(0,J.OY)(Q),qe=Q[B.oV]||Ae[B.oV];Q&&(!qe||qe===re.core())&&!Ae[R.fi]&&(Ae[B.oV]=null,Ae[R.fi]=!0,Ae[R.yl]=!1,Q[R.fi]&&Q[R.fi](re,L)===!0&&(Re=!0))}return Re}o(Se,"_callTeardown"),E(re,Se,"unload",function(){},L[R.d])||re[R.uL](L)}o(He,"_unloadPlugin");function Ue(re,L){function Se(){var Re=!1;if(Q){var Ae=(0,J.OY)(Q),qe=Q[B.oV]||Ae[B.oV];Q&&(!qe||qe===re.core())&&!Ae[R.fi]&&Q[R.Tu]&&Q[R.Tu](re,L)===!0&&(Re=!0)}return Re}o(Se,"_callUpdate"),E(re,Se,"update",function(){},!1)||re[R.uL](L)}return o(Ue,"_updatePlugin"),(0,S.FL)(Je)}o(Te,"createTelemetryPluginProxy");var oe=function(){function Q(z,Z,se,Ke){var xe=this,We=fe(z,Z,se,Ke);(0,S.Vb)(xe,We,(0,S.FY)(We))}return o(Q,"ProcessTelemetryContext"),Q}()},878:(At,l,T)=>{"use strict";T.d(l,{az:()=>_e,_l:()=>Ie,CN:()=>fe,F6:()=>ae,pZ:()=>ze});var R=T(96),w=T(630),M=T(708),S=T(41),B=4294967296,U=4294967295,J=!1,ke=123456789,Fe=987654321;function Pe(X){X<0&&(X>>>=0),ke=123456789+X&U,Fe=987654321-X&U,J=!0}o(Pe,"_mwcSeed");function F(){try{var X=(0,M.m6)()&2147483647;Pe((Math.random()*B^X)+X)}catch(Te){}}o(F,"_autoSeedMwc");function _e(X){return X>0?Math.floor(Ie()/U*(X+1))>>>0:0}o(_e,"randomValue");function Ie(X){var Te=0,oe=(0,w.MX)()||(0,w.gz)();return oe&&oe.getRandomValues&&(Te=oe.getRandomValues(new Uint32Array(1))[0]&U),Te===0&&(0,w.w1)()&&(J||F(),Te=ae()&U),Te===0&&(Te=Math.floor(B*Math.random()|0)),X||(Te>>>=0),Te}o(Ie,"random32");function fe(X){X?Pe(X):F()}o(fe,"mwcRandomSeed");function ae(X){Fe=36969*(Fe&65535)+(Fe>>16)&U,ke=18e3*(ke&65535)+(ke>>16)&U;var Te=(Fe<<16)+(ke&65535)>>>0&U|0;return X||(Te>>>=0),Te}o(ae,"mwcRandom32");function ze(X){X===void 0&&(X=22);for(var Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=Ie()>>>0,Q=0,z=S.qS;z[R.R5]<X;)Q++,z+=Te.charAt(oe&63),oe>>>=6,Q===5&&(oe=(Ie()<<2&4294967295|oe&3)>>>0,Q=0);return z}o(ze,"newId")},833:(At,l,T)=>{"use strict";T.d(l,{OY:()=>J,bP:()=>ke,AA:()=>Fe,Yn:()=>F});var R=T(96),w=T(883),M=T(708),S=T(41),B=T(206),U=(0,w.K)("plugin");function J(_e){return U.get(_e,"state",{},!0)}o(J,"_getPluginState");function ke(_e,Ie){for(var fe=[],ae=null,ze=_e[R.W2](),X;ze;){var Te=ze[R.TO]();if(Te){ae&&(0,M.mf)(ae[R.Jd])&&(0,M.mf)(Te[S.hL])&&ae[R.Jd](Te);var oe=!1;(0,M.mf)(Te[R.yl])?oe=Te[R.yl]():(X=J(Te),oe=X[R.yl]),oe||fe[R.MW](Te),ae=Te,ze=ze[R.W2]()}}(0,M.tO)(fe,function(Q){var z=_e[S.oV]();Q[R.VL](_e.getCfg(),z,Ie,_e[R.W2]()),X=J(Q),!Q[S.oV]&&!X[S.oV]&&(X[S.oV]=z),X[R.yl]=!0,delete X[R.fi]})}o(ke,"initializePlugins");function Fe(_e){return _e.sort(function(Ie,fe){var ae=0;if(fe){var ze=(0,M.mf)(fe[S.hL]);(0,M.mf)(Ie[S.hL])?ae=ze?Ie[S.yi]-fe[S.yi]:1:ze&&(ae=-1)}else ae=Ie?1:-1;return ae})}o(Fe,"sortPlugins");function Pe(_e,Ie,fe,ae){var ze=0;function X(){for(;ze<_e[_DYN_LENGTH];){var Te=_e[ze++];if(Te){var oe=Te._doUnload||Te[_DYN__DO_TEARDOWN];if(isFunction(oe)&&oe[_DYN_CALL](Te,Ie,fe,X)===!0)return!0}}}return o(X,"_doUnload"),X()}o(Pe,"unloadComponents");function F(_e){var Ie={};return{getName:function(){return Ie[R.I]},setName:function(fe){_e&&_e.setName(fe),Ie[R.I]=fe},getTraceId:function(){return Ie[R.nY]},setTraceId:function(fe){_e&&_e.setTraceId(fe),(0,B.jN)(fe)&&(Ie[R.nY]=fe)},getSpanId:function(){return Ie[R._d]},setSpanId:function(fe){_e&&_e.setSpanId(fe),(0,B.Lc)(fe)&&(Ie[R._d]=fe)},getTraceFlags:function(){return Ie[R.T0]},setTraceFlags:function(fe){_e&&_e.setTraceFlags(fe),Ie[R.T0]=fe}}}o(F,"createDistributedTraceContext")},790:(At,l,T)=>{"use strict";T.d(l,{Y:()=>B});var R=T(96),w=T(18),M=T(630),S=T(708);function B(){var U=[];function J(Fe){Fe&&U[R.MW](Fe)}o(J,"_addHandler");function ke(Fe,Pe){(0,S.tO)(U,function(F){try{F(Fe,Pe)}catch(_e){(0,w.kP)(Fe[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,M.eU)(_e))}}),U=[]}return o(ke,"_runHandlers"),{add:J,run:ke}}o(B,"createUnloadHandlerContainer")},206:(At,l,T)=>{"use strict";T.d(l,{SU:()=>fe,j_:()=>ae,jN:()=>ze,Lc:()=>X,J6:()=>Te,Pn:()=>oe,aR:()=>Q,lq:()=>z});var R=T(96),w=T(843),M=T(630),S=T(708),B=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,U="00",J="ff",ke="00000000000000000000000000000000",Fe="0000000000000000",Pe=1;function F(Z,se,Ke){return Z&&Z[R.R5]===se&&Z!==Ke?!!Z.match(/^[\da-f]*$/):!1}o(F,"_isValid");function _e(Z,se,Ke){return F(Z,se)?Z:Ke}o(_e,"_formatValue");function Ie(Z){(isNaN(Z)||Z<0||Z>255)&&(Z=1);for(var se=Z.toString(16);se[R.R5]<2;)se="0"+se;return se}o(Ie,"_formatFlags");function fe(Z,se,Ke,xe){var We;return We={},We[R.PA]=F(xe,2,J)?xe:U,We[R.nY]=ze(Z)?Z:(0,w.DO)(),We.spanId=X(se)?se:(0,w.DO)()[R.Jn](0,16),We.traceFlags=Ke>=0&&Ke<=255?Ke:1,We}o(fe,"createTraceParent");function ae(Z){var se;if(!Z||((0,S.kJ)(Z)&&(Z=Z[0]||""),!Z||!(0,S.HD)(Z)||Z[R.R5]>8192))return null;var Ke=B.exec((0,S.nd)(Z));return!Ke||Ke[1]===J||Ke[2]===ke||Ke[3]===Fe?null:(se={},se[R.PA]=Ke[1],se[R.nY]=Ke[2],se[R._d]=Ke[3],se[R.T0]=parseInt(Ke[4],16),se)}o(ae,"parseTraceParent");function ze(Z){return F(Z,32,ke)}o(ze,"isValidTraceId");function X(Z){return F(Z,16,Fe)}o(X,"isValidSpanId");function Te(Z){return!(!Z||!F(Z[R.PA],2,J)||!F(Z[R.nY],32,ke)||!F(Z[R._d],16,Fe)||!F(Ie(Z[R.T0]),2))}o(Te,"isValidTraceParent");function oe(Z){return Te(Z)?(Z[R.T0]&Pe)===Pe:!1}o(oe,"isSampledFlag");function Q(Z){if(Z){var se=Ie(Z[R.T0]);F(se,2)||(se="01");var Ke=Z[R.PA]||U;return Ke!=="00"&&Ke!=="ff"&&(Ke=U),"".concat(Ke,"-").concat(_e(Z.traceId,32,ke),"-").concat(_e(Z.spanId,16,Fe),"-").concat(se)}return""}o(Q,"formatTraceParent");function z(){var Z="traceparent",se=ae((0,M.ed)(Z));return se||(se=ae((0,M.pI)(Z))),se}o(z,"findW3cTraceParent")},96:(At,l,T)=>{"use strict";T.d(l,{VL:()=>R,I:()=>w,tb:()=>M,pZ:()=>S,MW:()=>B,yl:()=>U,TC:()=>J,p$:()=>ke,eZ:()=>Fe,R5:()=>Pe,Z_:()=>F,uL:()=>_e,SD:()=>Ie,g:()=>fe,n7:()=>ae,LS:()=>ze,Fc:()=>X,TO:()=>Te,kL:()=>oe,iC:()=>Q,cb:()=>z,fi:()=>Z,Gc:()=>se,gU:()=>Ke,d:()=>xe,F3:()=>We,Tu:()=>Je,W2:()=>Y,mc:()=>E,Jd:()=>Ne,zV:()=>He,Lk:()=>Ue,ou:()=>re,zc:()=>L,qV:()=>Se,w6:()=>Re,$h:()=>Ae,Jn:()=>qe,xv:()=>Rt,ZV:()=>nt,i7:()=>$e,Fr:()=>$,jk:()=>pe,T1:()=>j,_S:()=>ue,P6:()=>Ge,Kn:()=>at,dE:()=>ne,PL:()=>ve,T:()=>ee,wu:()=>W,Km:()=>me,nY:()=>ge,_d:()=>vt,T0:()=>Ce,PA:()=>D});var R="initialize",w="name",M="getNotifyMgr",S="identifier",B="push",U="isInitialized",J="config",ke="instrumentationKey",Fe="logger",Pe="length",F="time",_e="processNext",Ie="getProcessTelContext",fe="addNotificationListener",ae="removeNotificationListener",ze="stopPollingInternalLogs",X="onComplete",Te="getPlugin",oe="flush",Q="_extensions",z="splice",Z="teardown",se="messageId",Ke="message",xe="isAsync",We="_doTeardown",Je="update",Y="getNext",E="diagLog",Ne="setNextPlugin",He="createNew",Ue="cookieCfg",re="indexOf",L="substring",Se="userAgent",Re="split",Ae="setEnabled",qe="substr",Rt="nodeType",nt="apply",$e="replace",$="enableDebugExceptions",pe="logInternalMessage",j="toLowerCase",ue="call",Ge="type",at="handler",ne="listeners",ve="isChildEvt",ee="getCtx",W="setCtx",me="complete",ge="traceId",vt="spanId",Ce="traceFlags",D="version"},392:(At,l,T)=>{"use strict";T.d(l,{cb:()=>R,fK:()=>w,jA:()=>M,hB:()=>S,bO:()=>B,Pw:()=>J,V4:()=>ke,rl:()=>Fe,yu:()=>Pe,RJ:()=>F,CY:()=>_e});var R="function",w="object",M="undefined",S="prototype",B="hasOwnProperty",U="default",J=Object,ke=J[S],Fe=J.assign,Pe=J.create,F=J.defineProperty,_e=ke[B]},91:(At,l,T)=>{"use strict";T.d(l,{Rd:()=>M,ZU:()=>S,pu:()=>B});var R=T(392),w=null;function M(U){U===void 0&&(U=!0);var J=U===!1?null:w;return J||(typeof globalThis!==R.jA&&(J=globalThis),!J&&typeof self!==R.jA&&(J=self),!J&&typeof window!==R.jA&&(J=window),!J&&typeof T.g!==R.jA&&(J=T.g),w=J),J}o(M,"getGlobal");function S(U){throw new TypeError(U)}o(S,"throwTypeError");function B(U){var J=R.yu;if(J)return J(U);if(U==null)return{};var ke=typeof U;ke!==R.fK&&ke!==R.cb&&S("Object prototype may only be an Object:"+U);function Fe(){}return o(Fe,"tmpFunc"),Fe[R.hB]=U,new Fe}o(B,"objCreateFn")},88:(At,l,T)=>{"use strict";T.d(l,{uc:()=>_e,ne:()=>fe,$h:()=>Ke});var R=T(392),w=T(91),M=((0,w.Rd)()||{}).Symbol,S=((0,w.Rd)()||{}).Reflect,B=!!M,U=!!S,J="decorate",ke="metadata",Fe="getOwnPropertySymbols",Pe="iterator",F=o(function(Y){for(var E,Ne=1,He=arguments.length;Ne<He;Ne++){E=arguments[Ne];for(var Ue in E)R.V4[R.bO].call(E,Ue)&&(Y[Ue]=E[Ue])}return Y},"__objAssignFnImpl"),_e=R.rl||F,Ie=o(function(Y,E){return Ie=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ne,He){Ne.__proto__=He}||function(Ne,He){for(var Ue in He)He[R.bO](Ue)&&(Ne[Ue]=He[Ue])},Ie(Y,E)},"extendStaticsFn");function fe(Y,E){typeof E!==R.cb&&E!==null&&(0,w.ZU)("Class extends value "+String(E)+" is not a constructor or null"),Ie(Y,E);function Ne(){this.constructor=Y}o(Ne,"__"),Y[R.hB]=E===null?(0,w.pu)(E):(Ne[R.hB]=E[R.hB],new Ne)}o(fe,"__extendsFn");function ae(Y,E){var Ne={};for(var He in Y)ObjHasOwnProperty.call(Y,He)&&E.indexOf(He)<0&&(Ne[He]=Y[He]);if(Y!=null&&typeof ObjClass[Fe]===strShimFunction)for(var Ue=0,re=ObjClass[Fe](Y);Ue<re.length;Ue++)E.indexOf(re[Ue])<0&&ObjProto.propertyIsEnumerable.call(Y,re[Ue])&&(Ne[re[Ue]]=Y[re[Ue]]);return Ne}o(ae,"__restFn");function ze(Y,E,Ne,He){var Ue=arguments.length,re=Ue<3?E:He===null?He=ObjClass.getOwnPropertyDescriptor(E,Ne):He,L;if(U&&typeof S[J]===strShimFunction)re=S[J](Y,E,Ne,He);else for(var Se=Y.length-1;Se>=0;Se--)(L=Y[Se])&&(re=(Ue<3?L(re):Ue>3?L(E,Ne,re):L(E,Ne))||re);return Ue>3&&re&&ObjDefineProperty(E,Ne,re),re}o(ze,"__decorateFn");function X(Y,E){return function(Ne,He){E(Ne,He,Y)}}o(X,"__paramFn");function Te(Y,E){if(U&&S[ke]===strShimFunction)return S[ke](Y,E)}o(Te,"__metadataFn");function oe(Y,E){for(var Ne in Y)Ne!==strDefault&&!ObjHasOwnProperty.call(E,Ne)&&Q(E,Y,Ne)}o(oe,"__exportStarFn");function Q(Y,E,Ne,He){He===void 0&&(He=Ne),ObjCreate?ObjDefineProperty(Y,He,{enumerable:!0,get:function(){return E[Ne]}}):Y[He]=E[Ne]}o(Q,"__createBindingFn");function z(Y){var E=typeof M===strShimFunction&&M[Pe],Ne=E&&Y[E],He=0;if(Ne)return Ne.call(Y);if(Y&&typeof Y.length=="number")return{next:function(){return Y&&He>=Y.length&&(Y=void 0),{value:Y&&Y[He++],done:!Y}}};throwTypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}o(z,"__valuesFn");function Z(Y,E){var Ne=typeof M===strShimFunction&&Y[M[Pe]];if(!Ne)return Y;var He=Ne.call(Y),Ue,re=[],L;try{for(;(E===void 0||E-- >0)&&!(Ue=He.next()).done;)re.push(Ue.value)}catch(Se){L={error:Se}}finally{try{Ue&&!Ue.done&&(Ne=He.return)&&Ne.call(He)}finally{if(L)throw L.error}}return re}o(Z,"__readFn");function se(){for(var Y=arguments,E=0,Ne=0,He=Y.length;Ne<He;Ne++)E+=Y[Ne].length;for(var Ue=Array(E),re=0,Ne=0;Ne<He;Ne++)for(var L=Y[Ne],Se=0,Re=L.length;Se<Re;Se++,re++)Ue[re]=L[Se];return Ue}o(se,"__spreadArraysFn");function Ke(Y,E){for(var Ne=0,He=E.length,Ue=Y.length;Ne<He;Ne++,Ue++)Y[Ue]=E[Ne];return Y}o(Ke,"__spreadArrayFn");function xe(Y,E){return ObjDefineProperty?ObjDefineProperty(Y,"raw",{value:E}):Y.raw=E,Y}o(xe,"__makeTemplateObjectFn");function We(Y){if(Y&&Y.__esModule)return Y;var E={};if(Y!=null)for(var Ne in Y)Ne!==strDefault&&Object.prototype.hasOwnProperty.call(Y,Ne)&&Q(E,Y,Ne);return ObjCreate?ObjDefineProperty(E,strDefault,{enumerable:!0,value:Y}):E[strDefault]=Y,E}o(We,"__importStarFn");function Je(Y){return Y&&Y.__esModule?Y:{strDefault:Y}}o(Je,"__importDefaultFn")},783:(At,l,T)=>{"use strict";T.r(l),T.d(l,{AppInsightsCore:()=>ji.F,ApplicationInsights:()=>Yr,CoreUtils:()=>an.Tr,Sender:()=>Da,SeverityLevel:()=>Cr,_InternalMessageId:()=>er.v,arrForEach:()=>D.tO,isNullOrUndefined:()=>D.le,proxyFunctions:()=>D.Vb,throwError:()=>D._y});var R=T(679),w=T(88),M="AppInsightsPropertiesPlugin",S="AppInsightsChannelPlugin",B="ApplicationInsightsAnalytics",U="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",J="sampleRate",ke="ProcessLegacy",Fe="http.method",Pe="https://dc.services.visualstudio.com",F="/v2/track",_e="not_specified",Ie="iKey",fe="split",ae="length",ze="toLowerCase",X="ingestionendpoint",Te="toString",oe="removeItem",Q="name",z="message",Z="count",se="preTriggerDate",Ke="disabled",xe="date",We="getUTCDate",Je="maxTimesPerMonth",Y="stringify",E="pathname",Ne="correlationHeaderExcludePatterns",He="indexOf",Ue="extensionConfig",re="exceptions",L="parsedStack",Se="properties",Re="measurements",Ae="sizeInBytes",qe="typeName",Rt="severityLevel",nt="problemGroup",$e="isManual",$="CreateFromInterface",pe="hasFullStack",j="level",ue="method",Ge="assembly",at="fileName",ne="line",ve="duration",ee="receivedResponse",W="substring",me="sanitizeKeyAndAddUniqueness",ge="sanitizeException",vt="sanitizeProperties",Ce="sanitizeMeasurements",D=T(708),I=T(18),Oe=T(630),St;function ht(m,f,y){var b=f[ae],N=Ft(m,f);if(N[ae]!==b){for(var q=0,de=N;y[de]!==void 0;)q++,de=N[W](0,150-3)+Et(q);N=de}return N}o(ht,"dataSanitizeKeyAndAddUniqueness");function Ft(m,f){var y;return f&&(f=(0,D.nd)(f[Te]()),f[ae]>150&&(y=f[W](0,150),(0,I.kP)(m,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:f},!0))),y||f}o(Ft,"dataSanitizeKey");function st(m,f,y){y===void 0&&(y=1024);var b;return f&&(y=y||1024,f=(0,D.nd)(f),f.toString()[ae]>y&&(b=f[Te]()[W](0,y),(0,I.kP)(m,2,61,"string value is too long. It has been truncated to "+y+" characters.",{value:f},!0))),b||f}o(st,"dataSanitizeString");function Dt(m,f){return Ye(m,f,2048,66)}o(Dt,"dataSanitizeUrl");function bt(m,f){var y;return f&&f[ae]>32768&&(y=f[W](0,32768),(0,I.kP)(m,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:f},!0)),y||f}o(bt,"dataSanitizeMessage");function hn(m,f){var y;if(f){var b=""+f;b[ae]>32768&&(y=b[W](0,32768),(0,I.kP)(m,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:f},!0))}return y||f}o(hn,"dataSanitizeException");function mn(m,f){if(f){var y={};(0,D.rW)(f,function(b,N){if((0,D.Kn)(N)&&(0,Oe.nS)())try{N=(0,Oe.xA)()[Y](N)}catch(q){(0,I.kP)(m,2,49,"custom property is not valid",{exception:q},!0)}N=st(m,N,8192),b=ht(m,b,y),y[b]=N}),f=y}return f}o(mn,"dataSanitizeProperties");function Dn(m,f){if(f){var y={};(0,D.rW)(f,function(b,N){b=ht(m,b,y),y[b]=N}),f=y}return f}o(Dn,"dataSanitizeMeasurements");function $n(m,f){return f&&Ye(m,f,128,69)[Te]()}o($n,"dataSanitizeId");function Ye(m,f,y,b){var N;return f&&(f=(0,D.nd)(f),f[ae]>y&&(N=f[W](0,y),(0,I.kP)(m,2,b,"input is too long, it has been truncated to "+y+" characters.",{data:f},!0))),N||f}o(Ye,"dataSanitizeInput");function Et(m){var f="00"+m;return f.substr(f[ae]-3)}o(Et,"dsPadNumber");var Yt=(St={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},St[me]=ht,St.sanitizeKey=Ft,St.sanitizeString=st,St.sanitizeUrl=Dt,St.sanitizeMessage=bt,St[ge]=hn,St[vt]=mn,St[Ce]=Dn,St.sanitizeId=$n,St.sanitizeInput=Ye,St.padNumber=Et,St.trim=D.nd,St),Pt=function(){function m(f,y,b,N){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var q=this;q.ver=2,q[Q]=st(f,y)||_e,q[Se]=mn(f,b),q[Re]=Dn(f,N)}return o(m,"Event"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Event",m.dataType="EventData",m}(),nn=function(){function m(f,y,b,N,q){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var de=this;de.ver=2,y=y||_e,de[z]=bt(f,y),de[Se]=mn(f,N),de[Re]=Dn(f,q),b&&(de[Rt]=b)}return o(m,"Trace"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Message",m.dataType="MessageData",m}(),it="";function rn(m,f){return f===void 0&&(f=!1),m==null?f:m.toString()[ze]()==="true"}o(rn,"stringToBoolOrDefault");function ln(m){(isNaN(m)||m<0)&&(m=0),m=Math.round(m);var f=it+m%1e3,y=it+Math.floor(m/1e3)%60,b=it+Math.floor(m/(1e3*60))%60,N=it+Math.floor(m/(1e3*60*60))%24,q=Math.floor(m/(1e3*60*60*24));return f=f[ae]===1?"00"+f:f[ae]===2?"0"+f:f,y=y[ae]<2?"0"+y:y,b=b[ae]<2?"0"+b:b,N=N[ae]<2?"0"+N:N,(q>0?q+".":it)+N+":"+b+":"+y+"."+f}o(ln,"msToTimeSpan");function cn(m,f){var y=null;return(0,D.tO)(m,function(b){if(b.identifier===f)return y=b,-1}),y}o(cn,"getExtensionByName");function en(m,f,y,b,N){return!N&&(0,D.HD)(m)&&(m==="Script error."||m==="Script error")}o(en,"isCrossOriginError");var _n=function(){function m(f,y,b,N,q,de,Le){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ft=this;ft.ver=2,ft.id=$n(f,Le),ft.url=Dt(f,b),ft[Q]=st(f,y)||_e,isNaN(N)||(ft[ve]=ln(N)),ft[Se]=mn(f,q),ft[Re]=Dn(f,de)}return o(m,"PageView"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",m.dataType="PageviewData",m}(),Nn=function(){function m(f,y,b,N,q,de,Le){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ft=this;ft.ver=2,ft.url=Dt(f,b),ft[Q]=st(f,y)||_e,ft[Se]=mn(f,q),ft[Re]=Dn(f,de),Le&&(ft.domProcessing=Le.domProcessing,ft[ve]=Le[ve],ft.networkConnect=Le.networkConnect,ft.perfTotal=Le.perfTotal,ft[ee]=Le[ee],ft.sentRequest=Le.sentRequest)}return o(m,"PageViewPerformance"),m.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",m.dataType="PageviewPerformanceData",m}(),Xn="<no_method>",di="error",On="stack",hi="stackDetails",ir="errorSrc",Gi="message",rr="description";function zi(m,f){var y=m;return y&&!(0,D.HD)(y)&&(JSON&&JSON[Y]?(y=JSON[Y](m),f&&(!y||y==="{}")&&((0,D.mf)(m[Te])?y=m[Te]():y=""+m)):y=""+m+" - (Missing JSON.stringify)"),y||""}o(zi,"_stringify");function Di(m,f){var y=m;return m&&(y&&!(0,D.HD)(y)&&(y=m[Gi]||m[rr]||y),y&&!(0,D.HD)(y)&&(y=zi(y,!0)),m.filename&&(y=y+" @"+(m.filename||"")+":"+(m.lineno||"?")+":"+(m.colno||"?"))),f&&f!=="String"&&f!=="Object"&&f!=="Error"&&(y||"")[He](f)===-1&&(y=f+": "+y),y||""}o(Di,"_formatMessage");function k(m){try{if((0,D.Kn)(m))return"hasFullStack"in m&&"typeName"in m}catch(f){}return!1}o(k,"_isExceptionDetailsInternal");function Be(m){try{if((0,D.Kn)(m))return"ver"in m&&"exceptions"in m&&"properties"in m}catch(f){}return!1}o(Be,"_isExceptionInternal");function Xe(m){return m&&m.src&&(0,D.HD)(m.src)&&m.obj&&(0,D.kJ)(m.obj)}o(Xe,"_isStackDetails");function ut(m){var f=m||"";(0,D.HD)(f)||((0,D.HD)(f[On])?f=f[On]:f=""+f);var y=f[fe](`
`);return{src:f,obj:y}}o(ut,"_convertStackObj");function lt(m){for(var f=[],y=m[fe](`
`),b=0;b<y[ae];b++){var N=y[b];y[b+1]&&(N+="@"+y[b+1],b++),f.push(N)}return{src:m,obj:f}}o(lt,"_getOperaStack");function Lt(m){var f=null;if(m)try{if(m[On])f=ut(m[On]);else if(m[di]&&m[di][On])f=ut(m[di][On]);else if(m.exception&&m.exception[On])f=ut(m.exception[On]);else if(Xe(m))f=m;else if(Xe(m[hi]))f=m[hi];else if(window&&window.opera&&m[Gi])f=lt(m[z]);else if(m.reason&&m.reason[On])f=ut(m.reason[On]);else if((0,D.HD)(m))f=ut(m);else{var y=m[Gi]||m[rr]||"";(0,D.HD)(m[ir])&&(y&&(y+=`
`),y+=" from "+m[ir]),y&&(f=ut(y))}}catch(b){f=ut(b)}return f||{src:"",obj:null}}o(Lt,"_getStackFromErrorObj");function Kn(m){var f="";return m&&(m.obj?(0,D.tO)(m.obj,function(y){f+=y+`
`}):f=m.src||""),f}o(Kn,"_formatStackTrace");function Rn(m){var f,y=m.obj;if(y&&y[ae]>0){f=[];var b=0,N=0;(0,D.tO)(y,function(pn){var gn=pn[Te]();if(Qt.regex.test(gn)){var we=new Qt(gn,b++);N+=we[Ae],f.push(we)}});var q=32*1024;if(N>q)for(var de=0,Le=f[ae]-1,ft=0,gt=de,pt=Le;de<Le;){var Kt=f[de][Ae],Gt=f[Le][Ae];if(ft+=Kt+Gt,ft>q){var Vt=pt-gt+1;f.splice(gt,Vt);break}gt=de,pt=Le,de++,Le--}}return f}o(Rn,"_parseStack");function yt(m){var f="";if(m&&(f=m.typeName||m[Q]||"",!f))try{var y=/function (.{1,200})\(/,b=y.exec(m.constructor[Te]());f=b&&b[ae]>1?b[1]:""}catch(N){}return f}o(yt,"_getErrorType");function _t(m){if(m)try{if(!(0,D.HD)(m)){var f=yt(m),y=zi(m,!1);return(!y||y==="{}")&&(m[di]&&(m=m[di],f=yt(m)),y=zi(m,!0)),y[He](f)!==0&&f!=="String"?f+":"+y:y}}catch(b){}return""+(m||"")}o(_t,"_formatErrorCode");var Nt=function(){function m(f,y,b,N,q,de){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Le=this;Le.ver=2,Be(y)?(Le[re]=y[re]||[],Le[Se]=y[Se],Le[Re]=y[Re],y[Rt]&&(Le[Rt]=y[Rt]),y.id&&(Le.id=y.id),y[nt]&&(Le[nt]=y[nt]),(0,D.le)(y[$e])||(Le[$e]=y[$e])):(b||(b={}),Le[re]=[new ot(f,y,b)],Le[Se]=mn(f,b),Le[Re]=Dn(f,N),q&&(Le[Rt]=q),de&&(Le.id=de))}return o(m,"Exception"),m.CreateAutoException=function(f,y,b,N,q,de,Le,ft){var gt,pt=yt(q||de||f);return gt={},gt[z]=Di(f,pt),gt.url=y,gt.lineNumber=b,gt.columnNumber=N,gt.error=_t(q||de||f),gt.evt=_t(de||f),gt[qe]=pt,gt.stackDetails=Lt(Le||q||de),gt.errorSrc=ft,gt},m.CreateFromInterface=function(f,y,b,N){var q=y[re]&&(0,D.Mr)(y[re],function(Le){return ot[$](f,Le)}),de=new m(f,(0,w.uc)((0,w.uc)({},y),{exceptions:q}),b,N);return de},m.prototype.toInterface=function(){var f,y=this,b=y.exceptions,N=y.properties,q=y.measurements,de=y.severityLevel,Le=y.problemGroup,ft=y.id,gt=y.isManual,pt=b instanceof Array&&(0,D.Mr)(b,function(Kt){return Kt.toInterface()})||void 0;return f={ver:"4.0"},f[re]=pt,f.severityLevel=de,f.properties=N,f.measurements=q,f.problemGroup=Le,f.id=ft,f.isManual=gt,f},m.CreateSimpleException=function(f,y,b,N,q,de){var Le;return{exceptions:[(Le={},Le[pe]=!0,Le.message=f,Le.stack=q,Le.typeName=y,Le)]}},m.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",m.dataType="ExceptionData",m.formatError=_t,m}(),ot=function(){function m(f,y,b){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var N=this;if(k(y))N[qe]=y[qe],N[z]=y[z],N[On]=y[On],N[L]=y[L]||[],N[pe]=y[pe];else{var q=y,de=q&&q.evt;(0,D.VZ)(q)||(q=q[di]||de||q),N[qe]=st(f,yt(q))||_e,N[z]=bt(f,Di(y||q,N[qe]))||_e;var Le=y[hi]||Lt(y);N[L]=Rn(Le),N[On]=hn(f,Kn(Le)),N.hasFullStack=(0,D.kJ)(N.parsedStack)&&N.parsedStack[ae]>0,b&&(b[qe]=b[qe]||N[qe])}}return o(m,"_ExceptionDetails"),m.prototype.toInterface=function(){var f,y=this,b=y[L]instanceof Array&&(0,D.Mr)(y[L],function(q){return q.toInterface()}),N=(f={id:y.id,outerId:y.outerId,typeName:y[qe],message:y[z],hasFullStack:y[pe],stack:y[On]},f[L]=b||void 0,f);return N},m.CreateFromInterface=function(f,y){var b=y[L]instanceof Array&&(0,D.Mr)(y[L],function(q){return Qt[$](q)})||y[L],N=new m(f,(0,w.uc)((0,w.uc)({},y),{parsedStack:b}));return N},m}(),Qt=function(){function m(f,y){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var b=this;if(b[Ae]=0,typeof f=="string"){var N=f;b[j]=y,b[ue]=Xn,b[Ge]=(0,D.nd)(N),b[at]="",b[ne]=0;var q=N.match(m.regex);q&&q[ae]>=5&&(b[ue]=(0,D.nd)(q[2])||b[ue],b[at]=(0,D.nd)(q[4]),b[ne]=parseInt(q[5])||0)}else b[j]=f[j],b[ue]=f[ue],b[Ge]=f[Ge],b[at]=f[at],b[ne]=f[ne],b[Ae]=0;b.sizeInBytes+=b.method[ae],b.sizeInBytes+=b.fileName[ae],b.sizeInBytes+=b.assembly[ae],b[Ae]+=m.baseSize,b.sizeInBytes+=b.level.toString()[ae],b.sizeInBytes+=b.line.toString()[ae]}return o(m,"_StackFrame"),m.CreateFromInterface=function(f){return new m(f,null)},m.prototype.toInterface=function(){var f=this;return{level:f[j],method:f[ue],assembly:f[Ge],fileName:f[at],line:f[ne]}},m.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,m.baseSize=58,m}(),Ht=function(){function m(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(m,"DataPoint"),m}(),mt=function(){function m(f,y,b,N,q,de,Le,ft,gt){this.aiDataContract={ver:1,metrics:1,properties:0};var pt=this;pt.ver=2;var Kt=new Ht;Kt[Z]=N>0?N:void 0,Kt.max=isNaN(de)||de===null?void 0:de,Kt.min=isNaN(q)||q===null?void 0:q,Kt[Q]=st(f,y)||_e,Kt.value=b,Kt.stdDev=isNaN(Le)||Le===null?void 0:Le,pt.metrics=[Kt],pt[Se]=mn(f,ft),pt[Re]=Dn(f,gt)}return o(m,"Metric"),m.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",m.dataType="MetricData",m}(),an=T(843),tn=T(242),Sn=T(878),yn=T(869);function Vn(m){var f=null;if((0,D.mf)(Event))f=new Event(m);else{var y=(0,Oe.Me)();y&&y.createEvent&&(f=y.createEvent("Event"),f.initEvent(m,!0,!0))}return f}o(Vn,"createDomEvent");var Cn=T(873),Un=(0,Cn.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),zt=T(91),It=(0,Cn.By)({LocalStorage:0,SessionStorage:1}),$t=(0,Cn.By)({AI:0,AI_AND_W3C:1,W3C:2}),on=void 0,Tn=void 0;function jt(){return Ln()?sn(It.LocalStorage):null}o(jt,"_getLocalStorageObject");function sn(m){try{if((0,D.le)((0,zt.Rd)()))return null;var f=new Date()[Te](),y=(0,Oe.a8)(m===It.LocalStorage?"localStorage":"sessionStorage");y.setItem(f,f);var b=y.getItem(f)!==f;if(y[oe](f),!b)return y}catch(N){}return null}o(sn,"_getVerifiedStorageObject");function wn(){return Mn()?sn(It.SessionStorage):null}o(wn,"_getSessionStorageObject");function In(){on=!1,Tn=!1}o(In,"utlDisableStorage");function un(){on=Ln(!0),Tn=Mn(!0)}o(un,"utlEnableStorage");function Ln(m){return(m||on===void 0)&&(on=!!sn(It.LocalStorage)),on}o(Ln,"utlCanUseLocalStorage");function ei(m,f){var y=jt();if(y!==null)try{return y.getItem(f)}catch(b){on=!1,(0,I.kP)(m,2,1,"Browser failed read of local storage. "+(0,D.jj)(b),{exception:(0,Oe.eU)(b)})}return null}o(ei,"utlGetLocalStorage");function Bn(m,f,y){var b=jt();if(b!==null)try{return b.setItem(f,y),!0}catch(N){on=!1,(0,I.kP)(m,2,3,"Browser failed write to local storage. "+(0,D.jj)(N),{exception:(0,Oe.eU)(N)})}return!1}o(Bn,"utlSetLocalStorage");function jn(m,f){var y=jt();if(y!==null)try{return y[oe](f),!0}catch(b){on=!1,(0,I.kP)(m,2,5,"Browser failed removal of local storage item. "+(0,D.jj)(b),{exception:(0,Oe.eU)(b)})}return!1}o(jn,"utlRemoveStorage");function Mn(m){return(m||Tn===void 0)&&(Tn=!!sn(It.SessionStorage)),Tn}o(Mn,"utlCanUseSessionStorage");function zn(){var m=[];return Mn()&&(0,D.rW)((0,Oe.a8)("sessionStorage"),function(f){m.push(f)}),m}o(zn,"utlGetSessionStorageKeys");function qt(m,f){var y=wn();if(y!==null)try{return y.getItem(f)}catch(b){Tn=!1,(0,I.kP)(m,2,2,"Browser failed read of session storage. "+(0,D.jj)(b),{exception:(0,Oe.eU)(b)})}return null}o(qt,"utlGetSessionStorage");function Ot(m,f,y){var b=wn();if(b!==null)try{return b.setItem(f,y),!0}catch(N){Tn=!1,(0,I.kP)(m,2,4,"Browser failed write to session storage. "+(0,D.jj)(N),{exception:(0,Oe.eU)(N)})}return!1}o(Ot,"utlSetSessionStorage");function ri(m,f){var y=wn();if(y!==null)try{return y[oe](f),!0}catch(b){Tn=!1,(0,I.kP)(m,2,6,"Browser failed removal of session storage item. "+(0,D.jj)(b),{exception:(0,Oe.eU)(b)})}return!1}o(ri,"utlRemoveSessionStorage");var xi=(0,Oe.Me)()||{},Jn=0,ai=[null,null,null,null,null];function ti(m){var f=Jn,y=ai,b=y[f];return xi.createElement?y[f]||(b=y[f]=xi.createElement("a")):b={host:Ai(m,!0)},b.href=m,f++,f>=y[ae]&&(f=0),Jn=f,b}o(ti,"urlParseUrl");function Oi(m){var f,y=ti(m);return y&&(f=y.href),f}o(Oi,"urlGetAbsoluteUrl");function Yn(m){var f,y=ti(m);return y&&(f=y[E]),f}o(Yn,"urlGetPathName");function qn(m,f){return m?m.toUpperCase()+" "+f:f}o(qn,"urlGetCompleteUrl");function Ai(m,f){var y=Ri(m,f)||"";if(y){var b=y.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(b!=null&&b[ae]>3&&(0,D.HD)(b[2])&&b[2][ae]>0)return b[2]+(b[3]||"")}return y}o(Ai,"urlParseHost");function Ri(m,f){var y=null;if(m){var b=m.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(b!=null&&b[ae]>2&&(0,D.HD)(b[2])&&b[2][ae]>0&&(y=b[2]||"",f&&b[ae]>2)){var N=(b[1]||"")[ze](),q=b[3]||"";(N==="http"&&q===":80"||N==="https"&&q===":443")&&(q=""),y+=q}}return y}o(Ri,"urlParseFullHost");var Ci=[Pe+F,"https://breeze.aimon.applicationinsights.io"+F,"https://dc-int.services.visualstudio.com"+F];function Li(m){return(0,D.UA)(Ci,m[ze]())!==-1}o(Li,"isInternalApplicationInsightsEndpoint");var Ti={NotSpecified:_e,createDomEvent:Vn,disableStorage:In,isInternalApplicationInsightsEndpoint:Li,canUseLocalStorage:Ln,getStorage:ei,setStorage:Bn,removeStorage:jn,canUseSessionStorage:Mn,getSessionStorageKeys:zn,getSessionStorage:qt,setSessionStorage:Ot,removeSessionStorage:ri,disableCookies:an.oF,canUseCookies:an.vn,disallowsSameSiteNone:tn.UY,setCookie:an.d8,stringToBoolOrDefault:rn,getCookie:an.ej,deleteCookie:an.kT,trim:D.nd,newId:Sn.pZ,random32:function(){return(0,Sn._l)(!0)},generateW3CId:an.DO,isArray:D.kJ,isError:D.VZ,isDate:D.J_,toISOStringForIE8:D.Y6,getIEVersion:Oe.sA,msToTimeSpan:ln,isCrossOriginError:en,dump:Oe.eU,getExceptionName:D.jj,addEventHandler:yn.pZ,IsBeaconApiSupported:Oe.MF,getExtension:cn},Qi={parseUrl:ti,getAbsoluteUrl:Oi,getPathName:Yn,getCompleteUrl:qn,parseHost:Ai,parseFullHost:Ri},Hn={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(m,f,y){if(!f||m&&m.disableCorrelationHeaders)return!1;if(m&&m[Ne]){for(var b=0;b<m.correlationHeaderExcludePatterns[ae];b++)if(m[Ne][b].test(f))return!1}var N=ti(f).host[ze]();if(N&&(N[He](":443")!==-1||N[He](":80")!==-1)&&(N=(Ri(f,!0)||"")[ze]()),(!m||!m.enableCorsCorrelation)&&N&&N!==y)return!1;var q=m&&m.correlationHeaderDomains;if(q){var de;if((0,D.tO)(q,function(gt){var pt=new RegExp(gt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));de=de||pt.test(N)}),!de)return!1}var Le=m&&m.correlationHeaderExcludedDomains;if(!Le||Le[ae]===0)return!0;for(var b=0;b<Le[ae];b++){var ft=new RegExp(Le[b].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ft.test(N))return!1}return N&&N[ae]>0},getCorrelationContext:function(m){if(m){var f=Hn.getCorrelationContextValue(m,Un[1]);if(f&&f!==Hn.correlationIdPrefix)return f}},getCorrelationContextValue:function(m,f){if(m)for(var y=m[fe](","),b=0;b<y[ae];++b){var N=y[b][fe]("=");if(N[ae]===2&&N[0]===f)return N[1]}}};function ki(m,f,y,b){var N,q=b,de=b;if(f&&f[ae]>0){var Le=ti(f);if(N=Le.host,!q)if(Le[E]!=null){var ft=Le.pathname[ae]===0?"/":Le[E];ft.charAt(0)!=="/"&&(ft="/"+ft),de=Le[E],q=st(m,y?y+" "+ft:ft)}else q=st(m,f)}else N=b,q=b;return{target:N,name:q,data:de}}o(ki,"AjaxHelperParseDependencyPath");function fi(){var m=(0,Oe.r)();if(m&&m.now&&m.timing){var f=m.now()+m.timing.navigationStart;if(f>0)return f}return(0,D.m6)()}o(fi,"dateTimeUtilsNow");function dn(m,f){var y=null;return m!==0&&f!==0&&!(0,D.le)(m)&&!(0,D.le)(f)&&(y=f-m),y}o(dn,"dateTimeUtilsDuration");var Zi={Now:fi,GetDuration:dn};function oi(m,f){var y=m||{};return{getName:function(){return y[_DYN_NAME]},setName:function(b){f&&f.setName(b),y[_DYN_NAME]=b},getTraceId:function(){return y.traceID},setTraceId:function(b){f&&f.setTraceId(b),isValidTraceId(b)&&(y.traceID=b)},getSpanId:function(){return y.parentID},setSpanId:function(b){f&&f.setSpanId(b),isValidSpanId(b)&&(y.parentID=b)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(b){f&&f.setTraceFlags(b),y.traceFlags=b}}}o(oi,"createDistributedTraceContextFromTrace");var ci=function(){function m(f,y,b,N,q,de,Le,ft,gt,pt,Kt,Gt){gt===void 0&&(gt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Vt=this;Vt.ver=2,Vt.id=y,Vt[ve]=ln(q),Vt.success=de,Vt.resultCode=Le+"",Vt.type=st(f,gt);var pn=ki(f,b,ft,N);Vt.data=Dt(f,N)||pn.data,Vt.target=st(f,pn.target),pt&&(Vt.target="".concat(Vt.target," | ").concat(pt)),Vt[Q]=st(f,pn[Q]),Vt[Se]=mn(f,Kt),Vt[Re]=Dn(f,Gt)}return o(m,"RemoteDependencyData"),m.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",m.dataType="RemoteDependencyData",m}(),ar=T(883),Ui=T(63);function yi(m){var f="ai."+m+".";return function(y){return f+y}}o(yi,"_aiNameFunc");var Pn=yi("application"),kn=yi("device"),V=yi("location"),v=yi("operation"),_=yi("session"),H=yi("user"),ye=yi("cloud"),ct=yi("internal"),et=function(m){(0,w.ne)(f,m);function f(){return m.call(this)||this}return o(f,"ContextTagKeys"),f}((0,D.hl)({applicationVersion:Pn("ver"),applicationBuild:Pn("build"),applicationTypeId:Pn("typeId"),applicationId:Pn("applicationId"),applicationLayer:Pn("layer"),deviceId:kn("id"),deviceIp:kn("ip"),deviceLanguage:kn("language"),deviceLocale:kn("locale"),deviceModel:kn("model"),deviceFriendlyName:kn("friendlyName"),deviceNetwork:kn("network"),deviceNetworkName:kn("networkName"),deviceOEMName:kn("oemName"),deviceOS:kn("os"),deviceOSVersion:kn("osVersion"),deviceRoleInstance:kn("roleInstance"),deviceRoleName:kn("roleName"),deviceScreenResolution:kn("screenResolution"),deviceType:kn("type"),deviceMachineName:kn("machineName"),deviceVMName:kn("vmName"),deviceBrowser:kn("browser"),deviceBrowserVersion:kn("browserVersion"),locationIp:V("ip"),locationCountry:V("country"),locationProvince:V("province"),locationCity:V("city"),operationId:v("id"),operationName:v("name"),operationParentId:v("parentId"),operationRootId:v("rootId"),operationSyntheticSource:v("syntheticSource"),operationCorrelationVector:v("correlationVector"),sessionId:_("id"),sessionIsFirst:_("isFirst"),sessionIsNew:_("isNew"),userAccountAcquisitionDate:H("accountAcquisitionDate"),userAccountId:H("accountId"),userAgent:H("userAgent"),userId:H("id"),userStoreRegion:H("storeRegion"),userAuthUserId:H("authUserId"),userAnonymousUserAcquisitionDate:H("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:H("authUserAcquisitionDate"),cloudName:ye("name"),cloudRole:ye("role"),cloudRoleVer:ye("roleVer"),cloudRoleInstance:ye("roleInstance"),cloudEnvironment:ye("environment"),cloudLocation:ye("location"),cloudDeploymentUnit:ye("deploymentUnit"),internalNodeName:ct("nodeName"),internalSdkVersion:ct("sdkVersion"),internalAgentVersion:ct("agentVersion"),internalSnippet:ct("snippet"),internalSdkSrc:ct("sdkSrc")})),K={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},ie=new et,he=function(){function m(f,y,b){var N=this,q=this;q.ver=1,q.sampleRate=100,q.tags={},q[Q]=st(f,b)||_e,q.data=y,q.time=(0,D.Y6)(new Date),q.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return N.sampleRate===100?4:1},tags:1,data:1}}return o(m,"Envelope"),m}(),Me=function(){function m(f,y){this.aiDataContract={baseType:1,baseData:1},this.baseType=f,this.baseData=y}return o(m,"Data"),m}(),Ve="duration",dt="tags",Tt="deviceType",kt="data",Jt="name",si="traceID",Wt="length",ui="stringify",ni="measurements",Fn="dataType",Mi="envelopeType",hr="toString",ea="onLine",Er="enqueue",Bi="count",Hi="push",ta="emitLineDelimitedJson",fr="clear",Wi="batchPayloads",gr="markAsSent",Nr="clearSent",Or="BUFFER_KEY",vr="SENT_BUFFER_KEY",Ur="MAX_BUFFER_SIZE",Ki="namePrefix",na="maxBatchSizeInBytes",or="triggerSend",Gn="diagLog",gi="onunloadDisableBeacon",Jr="isBeaconApiDisabled",pr="_sender",xn="_senderConfig",Dr="_buffer",va="enableSessionStorageBuffer",Br="samplingPercentage",Vr="instrumentationKey",sr="endpointUrl",Ar="customHeaders",mr="disableXhr",ia="onunloadDisableFetch",Hr="disableTelemetry",Rr="baseType",Ji="sampleRate",Tr="convertUndefined",bi="_xhrReadyStateChange",vi="_onError",Mr="_onPartialSuccess",lr="_onSuccess",cr="itemsAccepted",Wr="itemsReceived",Pr="isRetryDisabled",Kr="setRequestHeader",pa="maxBatchInterval",go="eventsSendRequest",ma="disableInstrumentationKeyValidation",ya="getSamplingScore",ra="getHashCodeScore",aa="baseType",bn="baseData",li="properties",wa="true";function ii(m,f,y){return(0,D.sO)(m,f,y,D.fQ)}o(ii,"_setValueIf");function Ba(m,f,y){var b=y[dt]=y[dt]||{},N=f.ext=f.ext||{},q=f[dt]=f[dt]||[],de=N.user;de&&(ii(b,ie.userAuthUserId,de.authId),ii(b,ie.userId,de.id||de.localId));var Le=N.app;Le&&ii(b,ie.sessionId,Le.sesId);var ft=N.device;ft&&(ii(b,ie.deviceId,ft.id||ft.localId),ii(b,ie[Tt],ft.deviceClass),ii(b,ie.deviceIp,ft.ip),ii(b,ie.deviceModel,ft.model),ii(b,ie[Tt],ft[Tt]));var gt=f.ext.web;if(gt){ii(b,ie.deviceLanguage,gt.browserLang),ii(b,ie.deviceBrowserVersion,gt.browserVer),ii(b,ie.deviceBrowser,gt.browser);var pt=y[kt]=y[kt]||{},Kt=pt[bn]=pt[bn]||{},Gt=Kt[li]=Kt[li]||{};ii(Gt,"domain",gt.domain),ii(Gt,"isManual",gt.isManual?wa:null),ii(Gt,"screenRes",gt.screenRes),ii(Gt,"userConsent",gt.userConsent?wa:null)}var Vt=N.os;Vt&&ii(b,ie.deviceOS,Vt[Jt]);var pn=N.trace;pn&&(ii(b,ie.operationParentId,pn.parentID),ii(b,ie.operationName,st(m,pn[Jt])),ii(b,ie.operationId,pn[si]));for(var gn={},we=q[Wt]-1;we>=0;we--){var Qn=q[we];(0,D.rW)(Qn,function(Ir,Lr){gn[Ir]=Lr}),q.splice(we,1)}(0,D.rW)(q,function(Ir,Lr){gn[Ir]=Lr});var wi=(0,w.uc)((0,w.uc)({},b),gn);wi[ie.internalSdkVersion]||(wi[ie.internalSdkVersion]="javascript:".concat(oa.Version)),y[dt]=(0,D.Ax)(wi)}o(Ba,"_extractPartAExtensions");function ur(m,f,y){(0,D.le)(m)||(0,D.rW)(m,function(b,N){(0,D.hj)(N)?y[b]=N:(0,D.HD)(N)?f[b]=N:(0,Oe.nS)()&&(f[b]=(0,Oe.xA)()[ui](N))})}o(ur,"_extractPropsAndMeasurements");function yr(m,f){(0,D.le)(m)||(0,D.rW)(m,function(y,b){m[y]=b||f})}o(yr,"_convertPropsUndefinedToCustomDefinedValue");function wr(m,f,y,b){var N=new he(m,b,f);ii(N,"sampleRate",y[J]),(y[bn]||{}).startTime&&(N.time=(0,D.Y6)(y[bn].startTime)),N.iKey=y.iKey;var q=y.iKey.replace(/-/g,"");return N[Jt]=N[Jt].replace("{0}",q),Ba(m,y,N),y[dt]=y[dt]||[],(0,D.Ax)(N)}o(wr,"_createEnvelope");function Sr(m,f){(0,D.le)(f[bn])&&(0,I.kP)(m,1,46,"telemetryItem.baseData cannot be null.")}o(Sr,"EnvelopeCreatorInit");var oa={Version:"2.8.9"};function Ha(m,f,y){Sr(m,f);var b=f[bn][ni]||{},N=f[bn][li]||{};ur(f[kt],N,b),(0,D.le)(y)||yr(N,y);var q=f[bn];if((0,D.le)(q))return(0,I.jV)(m,"Invalid input for dependency data"),null;var de=q[li]&&q[li][Fe]?q[li][Fe]:"GET",Le=new ci(m,q.id,q.target,q[Jt],q[Ve],q.success,q.responseCode,de,q.type,q.correlationContext,N,b),ft=new Me(ci[Fn],Le);return wr(m,ci[Mi],f,ft)}o(Ha,"DependencyEnvelopeCreator");function Sa(m,f,y){Sr(m,f);var b={},N={};f[aa]!==Pt[Fn]&&(b.baseTypeSource=f[aa]),f[aa]===Pt[Fn]?(b=f[bn][li]||{},N=f[bn][ni]||{}):f[bn]&&ur(f[bn],b,N),ur(f[kt],b,N),(0,D.le)(y)||yr(b,y);var q=f[bn][Jt],de=new Pt(m,q,b,N),Le=new Me(Pt[Fn],de);return wr(m,Pt[Mi],f,Le)}o(Sa,"EventEnvelopeCreator");function Wa(m,f,y){Sr(m,f);var b=f[bn][ni]||{},N=f[bn][li]||{};ur(f[kt],N,b),(0,D.le)(y)||yr(N,y);var q=f[bn],de=Nt.CreateFromInterface(m,q,N,b),Le=new Me(Nt[Fn],de);return wr(m,Nt[Mi],f,Le)}o(Wa,"ExceptionEnvelopeCreator");function jr(m,f,y){Sr(m,f);var b=f[bn],N=b[li]||{},q=b[ni]||{};ur(f[kt],N,q),(0,D.le)(y)||yr(N,y);var de=new mt(m,b[Jt],b.average,b.sampleCount,b.min,b.max,b.stdDev,N,q),Le=new Me(mt[Fn],de);return wr(m,mt[Mi],f,Le)}o(jr,"MetricEnvelopeCreator");function Ka(m,f,y){Sr(m,f);var b,N=f[bn];!(0,D.le)(N)&&!(0,D.le)(N[li])&&!(0,D.le)(N[li][Ve])?(b=N[li][Ve],delete N[li][Ve]):!(0,D.le)(f[kt])&&!(0,D.le)(f[kt][Ve])&&(b=f[kt][Ve],delete f[kt][Ve]);var q=f[bn],de;((f.ext||{}).trace||{})[si]&&(de=f.ext.trace[si]);var Le=q.id||de,ft=q[Jt],gt=q.uri,pt=q[li]||{},Kt=q[ni]||{};if((0,D.le)(q.refUri)||(pt.refUri=q.refUri),(0,D.le)(q.pageType)||(pt.pageType=q.pageType),(0,D.le)(q.isLoggedIn)||(pt.isLoggedIn=q.isLoggedIn[hr]()),!(0,D.le)(q[li])){var Gt=q[li];(0,D.rW)(Gt,function(gn,we){pt[gn]=we})}ur(f[kt],pt,Kt),(0,D.le)(y)||yr(pt,y);var Vt=new _n(m,ft,gt,b,pt,Kt,Le),pn=new Me(_n[Fn],Vt);return wr(m,_n[Mi],f,pn)}o(Ka,"PageViewEnvelopeCreator");function Ca(m,f,y){Sr(m,f);var b=f[bn],N=b[Jt],q=b.uri||b.url,de=b[li]||{},Le=b[ni]||{};ur(f[kt],de,Le),(0,D.le)(y)||yr(de,y);var ft=new Nn(m,N,q,void 0,de,Le,b),gt=new Me(Nn[Fn],ft);return wr(m,Nn[Mi],f,gt)}o(Ca,"PageViewPerformanceEnvelopeCreator");function ba(m,f,y){Sr(m,f);var b=f[bn].message,N=f[bn].severityLevel,q=f[bn][li]||{},de=f[bn][ni]||{};ur(f[kt],q,de),(0,D.le)(y)||yr(q,y);var Le=new nn(m,b,N,q,de),ft=new Me(nn[Fn],Le);return wr(m,nn[Mi],f,ft)}o(ba,"TraceEnvelopeCreator");function _a(m,f){(0,yn.QY)(m,null,null,f)}o(_a,"_disableEvents");function $a(m){var f=(0,Oe.Me)(),y=(0,Oe.jW)(),b=!1,N=!0,q=(0,yn.jU)((0,ar.J)("OfflineListener"),m);try{if(Le((0,Oe.Jj)())&&(b=!0),f){var de=f.body||f;de.ononline&&Le(de)&&(b=!0)}b&&y&&!(0,D.le)(y[ea])&&(N=y[ea])}catch(Gt){b=!1}function Le(Gt){var Vt=!1;return Gt&&(Vt=(0,yn.XO)(Gt,"online",ft,q),Vt&&(0,yn.XO)(Gt,"offline",gt,q)),Vt}o(Le,"_enableEvents");function ft(){N=!0}o(ft,"_setOnline");function gt(){N=!1}o(gt,"_setOffline");function pt(){var Gt=!0;return b?Gt=N:y&&!(0,D.le)(y[ea])&&(Gt=y[ea]),Gt}o(pt,"_isOnline");function Kt(){var Gt=(0,Oe.Jj)();if(Gt&&b){if(_a(Gt,q),f){var Vt=f.body||f;(0,D.o8)(Vt.ononline)||_a(Vt,q)}b=!1}}return o(Kt,"_unload"),{isOnline:pt,isListening:function(){return b},unload:Kt}}o($a,"createOfflineListener");var Vi=function(){function m(f,y){var b=[],N=!1;this._get=function(){return b},this._set=function(q){return b=q,b},(0,R.Z)(m,this,function(q){q[Er]=function(de){if(q[Bi]()>=y.eventsLimitInMem()){N||((0,I.kP)(f,2,105,"Maximum in-memory buffer size reached: "+q[Bi](),!0),N=!0);return}b[Hi](de)},q[Bi]=function(){return b[Wt]},q.size=function(){for(var de=b[Wt],Le=0;Le<b[Wt];Le++)de+=b[Le][Wt];return y[ta]()||(de+=2),de},q[fr]=function(){b=[],N=!1},q.getItems=function(){return b.slice(0)},q[Wi]=function(de){if(de&&de[Wt]>0){var Le=y[ta]()?de.join(`
`):"["+de.join(",")+"]";return Le}return null}})}return o(m,"BaseSendBuffer"),m.__ieDyn=1,m}(),Ga=function(m){(0,w.ne)(f,m);function f(y,b){var N=m.call(this,y,b)||this;return(0,R.Z)(f,N,function(q,de){q[gr]=function(Le){de[fr]()},q[Nr]=function(Le){}}),N}return o(f,"ArraySendBuffer"),f.__ieDyn=1,f}(Vi),za=function(m){(0,w.ne)(f,m);function f(y,b){var N=m.call(this,y,b)||this,q=!1;return(0,R.Z)(f,N,function(de,Le){var ft=Gt(f[Or]),gt=Gt(f[vr]),pt=de._set(ft.concat(gt));pt[Wt]>f[Ur]&&(pt[Wt]=f[Ur]),Vt(f[vr],[]),Vt(f[Or],pt),de[Er]=function(pn){if(de[Bi]()>=f[Ur]){q||((0,I.kP)(y,2,67,"Maximum buffer size reached: "+de[Bi](),!0),q=!0);return}Le[Er](pn),Vt(f[Or],de._get())},de[fr]=function(){Le[fr](),Vt(f[Or],de._get()),Vt(f[vr],[]),q=!1},de[gr]=function(pn){Vt(f[Or],de._set(Kt(pn,de._get())));var gn=Gt(f[vr]);gn instanceof Array&&pn instanceof Array&&(gn=gn.concat(pn),gn[Wt]>f[Ur]&&((0,I.kP)(y,1,67,"Sent buffer reached its maximum size: "+gn[Wt],!0),gn[Wt]=f[Ur]),Vt(f[vr],gn))},de[Nr]=function(pn){var gn=Gt(f[vr]);gn=Kt(pn,gn),Vt(f[vr],gn)};function Kt(pn,gn){var we=[];return(0,D.tO)(gn,function(Qn){!(0,D.mf)(Qn)&&(0,D.UA)(pn,Qn)===-1&&we[Hi](Qn)}),we}o(Kt,"_removePayloadsFromBuffer");function Gt(pn){var gn=pn;try{gn=b[Ki]&&b[Ki]()?b[Ki]()+"_"+gn:gn;var we=qt(y,gn);if(we){var Qn=(0,Oe.xA)().parse(we);if((0,D.HD)(Qn)&&(Qn=(0,Oe.xA)().parse(Qn)),Qn&&(0,D.kJ)(Qn))return Qn}}catch(wi){(0,I.kP)(y,1,42," storage key: "+gn+", "+(0,D.jj)(wi),{exception:(0,Oe.eU)(wi)})}return[]}o(Gt,"_getBuffer");function Vt(pn,gn){var we=pn;try{we=b[Ki]&&b[Ki]()?b[Ki]()+"_"+we:we;var Qn=JSON[ui](gn);Ot(y,we,Qn)}catch(wi){Ot(y,we,JSON[ui]([])),(0,I.kP)(y,2,41," storage key: "+we+", "+(0,D.jj)(wi)+". Buffer cleared",{exception:(0,Oe.eU)(wi)})}}o(Vt,"_setBuffer")}),N}return o(f,"SessionStorageSendBuffer"),f.BUFFER_KEY="AI_buffer",f.SENT_BUFFER_KEY="AI_sentBuffer",f.MAX_BUFFER_SIZE=2e3,f}(Vi),Ja=function(){function m(f){(0,R.Z)(m,this,function(y){y.serialize=function(de){var Le=b(de,"root");try{return(0,Oe.xA)()[ui](Le)}catch(ft){(0,I.kP)(f,1,48,ft&&(0,D.mf)(ft[hr])?ft[hr]():"Error serializing object",null,!0)}};function b(de,Le){var ft="__aiCircularRefCheck",gt={};if(!de)return(0,I.kP)(f,1,48,"cannot serialize object because it is null or undefined",{name:Le},!0),gt;if(de[ft])return(0,I.kP)(f,2,50,"Circular reference detected while serializing object",{name:Le},!0),gt;if(!de.aiDataContract){if(Le==="measurements")gt=q(de,"number",Le);else if(Le==="properties")gt=q(de,"string",Le);else if(Le==="tags")gt=q(de,"string",Le);else if((0,D.kJ)(de))gt=N(de,Le);else{(0,I.kP)(f,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Le},!0);try{(0,Oe.xA)()[ui](de),gt=de}catch(pt){(0,I.kP)(f,1,48,pt&&(0,D.mf)(pt[hr])?pt[hr]():"Error serializing object",null,!0)}}return gt}return de[ft]=!0,(0,D.rW)(de.aiDataContract,function(pt,Kt){var Gt=(0,D.mf)(Kt)?Kt()&1:Kt&1,Vt=(0,D.mf)(Kt)?Kt()&4:Kt&4,pn=Kt&2,gn=de[pt]!==void 0,we=(0,D.Kn)(de[pt])&&de[pt]!==null;if(Gt&&!gn&&!pn)(0,I.kP)(f,1,24,"Missing required field specification. The field is required but not present on source",{field:pt,name:Le});else if(!Vt){var Qn=void 0;we?pn?Qn=N(de[pt],pt):Qn=b(de[pt],pt):Qn=de[pt],Qn!==void 0&&(gt[pt]=Qn)}}),delete de[ft],gt}o(b,"_serializeObject");function N(de,Le){var ft;if(de)if(!(0,D.kJ)(de))(0,I.kP)(f,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Le},!0);else{ft=[];for(var gt=0;gt<de[Wt];gt++){var pt=de[gt],Kt=b(pt,Le+"["+gt+"]");ft[Hi](Kt)}}return ft}o(N,"_serializeArray");function q(de,Le,ft){var gt;return de&&(gt={},(0,D.rW)(de,function(pt,Kt){if(Le==="string")Kt===void 0?gt[pt]="undefined":Kt===null?gt[pt]="null":Kt[hr]?gt[pt]=Kt[hr]():gt[pt]="invalid field: toString() is not defined.";else if(Le==="number")if(Kt===void 0)gt[pt]="undefined";else if(Kt===null)gt[pt]="null";else{var Gt=parseFloat(Kt);isNaN(Gt)?gt[pt]="NaN":gt[pt]=Gt}else gt[pt]="invalid field: "+ft+" is of unknown type.",(0,I.kP)(f,1,gt[pt],null,!0)})),gt}o(q,"_serializeStringMap")})}return o(m,"Serializer"),m.__ieDyn=1,m}(),Va=8,ja=function(){function m(){}return o(m,"HashCodeScoreGenerator"),m.prototype.getHashCodeScore=function(f){var y=this.getHashCode(f)/m.INT_MAX_VALUE;return y*100},m.prototype.getHashCode=function(f){if(f==="")return 0;for(;f[Wt]<Va;)f=f.concat(f);for(var y=5381,b=0;b<f[Wt];++b)y=(y<<5)+y+f.charCodeAt(b),y=y&y;return Math.abs(y)},m.INT_MAX_VALUE=2147483647,m}(),Ya=function(){function m(){var f=this,y=new ja,b=new et;f[ya]=function(N){var q=0;return N[dt]&&N[dt][b.userId]?q=y.getHashCodeScore(N[dt][b.userId]):N.ext&&N.ext.user&&N.ext.user.id?q=y[ra](N.ext.user.id):N[dt]&&N[dt][b.operationId]?q=y.getHashCodeScore(N[dt][b.operationId]):N.ext&&N.ext.telemetryTrace&&N.ext.telemetryTrace[si]?q=y.getHashCodeScore(N.ext.telemetryTrace[si]):q=Math.random()*100,q}}return o(m,"SamplingScoreGenerator"),m}(),Bo=function(){function m(f,y){this.INT_MAX_VALUE=2147483647;var b=y||(0,I.vH)(null);(f>100||f<0)&&(b.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:f},!0),f=100),this[Ji]=f,this.samplingScoreGenerator=new Ya}return o(m,"Sample"),m.prototype.isSampledIn=function(f){var y=this[Ji],b=!1;return y==null||y>=100||f.baseType===mt[Fn]?!0:(b=this.samplingScoreGenerator[ya](f)<y,b)},m}(),Xi,vo=65e3;function Ee(m){try{return m.responseText}catch(f){}return null}o(Ee,"_getResponseText");function $r(){var m,f,y;return m={endpointUrl:function(){return Pe+F}},m[ta]=function(){return!1},m[pa]=function(){return 15e3},m[na]=function(){return 102400},m[Hr]=function(){return!1},m[va]=function(){return!0},m[Pr]=function(){return!1},m[Jr]=function(){return!0},m[mr]=function(){return!1},m[ia]=function(){return!1},m[gi]=function(){return!1},m[Vr]=function(){return f},m[Ki]=function(){return f},m[Br]=function(){return 100},m[Ar]=function(){return y},m[Tr]=function(){return f},m.eventsLimitInMem=function(){return 1e4},m}o($r,"_getDefaultAppInsightsChannelConfig");var Ea=(Xi={},Xi[Pt.dataType]=Sa,Xi[nn.dataType]=ba,Xi[_n.dataType]=Ka,Xi[Nn.dataType]=Ca,Xi[Nt.dataType]=Wa,Xi[mt.dataType]=jr,Xi[ci.dataType]=Ha,Xi),Da=function(m){(0,w.ne)(f,m);function f(){var y=m.call(this)||this;y.priority=1001,y.identifier=S,y._senderConfig=$r();var b,N,q,de,Le,ft,gt,pt,Kt=0,Gt,Vt,pn,gn;return(0,R.Z)(f,y,function(we,Qn){Ma(),we.pause=function(){ua(),de=!0},we.resume=function(){de&&(de=!1,N=null,we._buffer.size()>we._senderConfig[na]()&&we[or](!0,null,10),kr())},we.flush=function(le,rt,Ct){if(le===void 0&&(le=!0),!de){ua();try{we[or](le,null,Ct||1)}catch(Ut){(0,I.kP)(we[Gn](),1,22,"flush failed, telemetry will not be collected: "+(0,D.jj)(Ut),{exception:(0,Oe.eU)(Ut)})}}},we.onunloadFlush=function(){if(!de)if((we._senderConfig[gi]()===!1||we[xn][Jr]()===!1)&&(0,Oe.MF)())try{we[or](!0,qa,2)}catch(le){(0,I.kP)(we[Gn](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,D.jj)(le),{exception:(0,Oe.eU)(le)})}else we.flush()},we.addHeader=function(le,rt){pt[le]=rt},we.initialize=function(le,rt,Ct,Ut){we.isInitialized()&&(0,I.kP)(we[Gn](),1,28,"Sender is already initialized"),Qn.initialize(le,rt,Ct,Ut);var vn=we._getTelCtx(),En=we.identifier;ft=new Ja(rt.logger),b=0,N=null,q=0,we[pr]=null,gt=0;var An=we[Gn]();gn=(0,yn.jU)((0,ar.J)("Sender"),rt.evtNamespace&&rt.evtNamespace()),pn=$a(gn);var pi=$r();(0,D.rW)(pi,function(Fi,qi){we[xn][Fi]=function(){var Wn=vn.getConfig(En,Fi,qi());return!Wn&&Fi==="endpointUrl"&&(Wn=qi()),Wn}}),we._buffer=we[xn][va]()&&Mn()?new za(An,we[xn]):new Ga(An,we[xn]),we._sample=new Bo(we[xn][Br](),An),to(le)||(0,I.kP)(An,1,100,"Invalid Instrumentation key "+le[Vr]),!Li(we._senderConfig.endpointUrl())&&we._senderConfig.customHeaders()&&we._senderConfig.customHeaders()[Wt]>0&&(0,D.tO)(we[xn][Ar](),function(Fi){y.addHeader(Fi.header,Fi.value)});var _i=we[xn],mi=null;!_i[mr]()&&(0,Oe.cp)()?mi=Xa:!_i[mr]()&&(0,Oe.Z3)()&&(mi=ca),!mi&&(0,Oe.JO)()&&(mi=Qa),Gt=mi||ca,!_i[Jr]()&&(0,Oe.MF)()&&(mi=la),we[pr]=mi||ca,!_i[ia]()&&(0,Oe.JO)(!0)?Vt=Pi:(0,Oe.MF)()?Vt=la:!_i[mr]()&&(0,Oe.cp)()?Vt=Xa:!_i[mr]()&&(0,Oe.Z3)()?Vt=ca:Vt=Gt},we.processTelemetry=function(le,rt){rt=we._getTelCtx(rt);var Ct=rt[Gn]();try{if(we[xn][Hr]())return;if(!le){(0,I.kP)(Ct,1,7,"Cannot send empty telemetry");return}if(le.baseData&&!le[Rr]){(0,I.kP)(Ct,1,70,"Cannot send telemetry without baseData and baseType");return}if(le[Rr]||(le[Rr]="EventData"),!we[pr]){(0,I.kP)(Ct,1,28,"Sender was not initialized");return}if(wi(le))le[J]=we._sample[Ji];else{(0,I.kP)(Ct,2,33,"Telemetry item was sampled out and not sent",{SampleRate:we._sample[Ji]});return}var Ut=we[xn][Tr]()||void 0,vn=le.iKey||we[xn][Vr](),En=f.constructEnvelope(le,vn,Ct,Ut);if(!En){(0,I.kP)(Ct,1,47,"Unable to create an AppInsights envelope");return}var An=!1;if(le[dt]&&le[dt][ke]&&((0,D.tO)(le[dt][ke],function(Fi){try{Fi&&Fi(En)===!1&&(An=!0,(0,I.jV)(Ct,"Telemetry processor check returns false"))}catch(qi){(0,I.kP)(Ct,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,D.jj)(qi),{exception:(0,Oe.eU)(qi)},!0)}}),delete le[dt][ke]),An)return;var pi=ft.serialize(En),_i=we[Dr],mi=_i.size();mi+pi[Wt]>we[xn][na]()&&we[or](!0,null,10),_i[Er](pi),kr()}catch(Fi){(0,I.kP)(Ct,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,D.jj)(Fi),{exception:(0,Oe.eU)(Fi)})}we.processNext(le,rt)},we[bi]=function(le,rt,Ct){le.readyState===4&&Ir(le.status,rt,le.responseURL,Ct,Yi(le),Ee(le)||le.response)},we[or]=function(le,rt,Ct){if(le===void 0&&(le=!0),!de)try{var Ut=we[Dr];if(we[xn][Hr]())Ut[fr]();else{if(Ut[Bi]()>0){var vn=Ut.getItems();Ho(Ct||0,le),rt?rt.call(y,vn,le):we[pr](vn,le)}q=+new Date}ua()}catch(An){var En=(0,Oe.sA)();(!En||En>9)&&(0,I.kP)(we[Gn](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,D.jj)(An),{exception:(0,Oe.eU)(An)})}},we._doTeardown=function(le,rt){we.onunloadFlush(),pn.unload(),Ma()},we[vi]=function(le,rt,Ct){(0,I.kP)(we[Gn](),2,26,"Failed to send telemetry.",{message:rt}),we._buffer[Nr](le)},we[Mr]=function(le,rt){for(var Ct=[],Ut=[],vn=rt.errors.reverse(),En=0,An=vn;En<An.length;En++){var pi=An[En],_i=le.splice(pi.index,1)[0];Ta(pi.statusCode)?Ut[Hi](_i):Ct[Hi](_i)}le[Wt]>0&&we[lr](le,rt[cr]),Ct[Wt]>0&&we[vi](Ct,Yi(null,["partial success",rt[cr],"of",rt.itemsReceived].join(" "))),Ut[Wt]>0&&(qr(Ut),(0,I.kP)(we[Gn](),2,40,"Partial success. Delivered: "+le[Wt]+", Failed: "+Ct[Wt]+". Will retry to send "+Ut[Wt]+" our of "+rt[Wr]+" items"))},we[lr]=function(le,rt){we._buffer[Nr](le)},we._xdrOnLoad=function(le,rt){var Ct=Ee(le);if(le&&(Ct+""=="200"||Ct===""))b=0,we[lr](rt,0);else{var Ut=Aa(Ct);Ut&&Ut.itemsReceived&&Ut.itemsReceived>Ut[cr]&&!we[xn][Pr]()?we[Mr](rt,Ut):we[vi](rt,eo(le))}};function wi(le){return we._sample.isSampledIn(le)}o(wi,"_isSampledIn");function Ir(le,rt,Ct,Ut,vn,En){var An=null;if(we._appId||(An=Aa(En),An&&An.appId&&(we._appId=An.appId)),(le<200||le>=300)&&le!==0){if((le===301||le===307||le===308)&&!Lr(Ct)){we[vi](rt,vn);return}!we[xn][Pr]()&&Ta(le)?(qr(rt),(0,I.kP)(we[Gn](),2,40,". Response code "+le+". Will retry to send "+rt[Wt]+" items.")):we[vi](rt,vn)}else if(pn&&!pn.isOnline()){if(!we[xn][Pr]()){var pi=10;qr(rt,pi),(0,I.kP)(we[Gn](),2,40,". Offline - Response Code: ".concat(le,". Offline status: ").concat(!pn.isOnline(),". Will retry to send ").concat(rt.length," items."))}}else Lr(Ct),le===206?(An||(An=Aa(En)),An&&!we[xn][Pr]()?we[Mr](rt,An):we[vi](rt,vn)):(b=0,we[lr](rt,Ut))}o(Ir,"_checkResponsStatus");function Lr(le){return gt>=10?!1:!(0,D.le)(le)&&le!==""&&le!==we[xn][sr]()?(we[xn][sr]=function(){return le},++gt,!0):!1}o(Lr,"_checkAndUpdateEndPointUrl");function qa(le,rt){Vt?Vt(le,!1):la(le,rt)}o(qa,"_doUnloadSend");function Ni(le){var rt=(0,Oe.jW)(),Ct=we[Dr],Ut=we[xn][sr](),vn=we._buffer[Wi](le),En=new Blob([vn],{type:"text/plain;charset=UTF-8"}),An=rt.sendBeacon(Ut,En);return An&&(Ct[gr](le),we._onSuccess(le,le[Wt])),An}o(Ni,"_doBeaconSend");function la(le,rt){if((0,D.kJ)(le)&&le[Wt]>0&&!Ni(le)){for(var Ct=[],Ut=0;Ut<le[Wt];Ut++){var vn=le[Ut];Ni([vn])||Ct[Hi](vn)}Ct[Wt]>0&&(Gt&&Gt(Ct,!0),(0,I.kP)(we[Gn](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(la,"_beaconSender");function ca(le,rt){var Ct=new XMLHttpRequest,Ut=we[xn][sr]();try{Ct[U]=!0}catch(En){}Ct.open("POST",Ut,rt),Ct[Kr]("Content-type","application/json"),Li(Ut)&&Ct[Kr](Un[6],Un[7]),(0,D.tO)((0,D.FY)(pt),function(En){Ct[Kr](En,pt[En])}),Ct.onreadystatechange=function(){return we._xhrReadyStateChange(Ct,le,le[Wt])},Ct.onerror=function(En){return we[vi](le,Yi(Ct),En)};var vn=we._buffer[Wi](le);Ct.send(vn),we._buffer[gr](le)}o(ca,"_xhrSender");function Pi(le,rt){if((0,D.kJ)(le)){for(var Ct=le[Wt],Ut=0;Ut<le[Wt];Ut++)Ct+=le[Ut][Wt];Kt+Ct<=vo?Za(le,!1):(0,Oe.MF)()?la(le,rt):(Gt&&Gt(le,!0),(0,I.kP)(we[Gn](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(Pi,"_fetchKeepAliveSender");function Qa(le,rt){Za(le,!0)}o(Qa,"_fetchSender");function Za(le,rt){var Ct,Ut=we[xn][sr](),vn=we._buffer[Wi](le),En=new Blob([vn],{type:"application/json"}),An=new Headers,pi=vn[Wt],_i=!1,mi=!1;Li(Ut)&&An.append(Un[6],Un[7]),(0,D.tO)((0,D.FY)(pt),function(Wn){An.append(Wn,pt[Wn])});var Fi=(Ct={method:"POST",headers:An,body:En},Ct[U]=!0,Ct);rt||(Fi.keepalive=!0,_i=!0,Kt+=pi);var qi=new Request(Ut,Fi);try{qi[U]=!0}catch(Wn){}we._buffer[gr](le);try{fetch(qi).then(function(Wn){rt||(Kt-=pi,pi=0),mi||(mi=!0,Wn.ok?Wn.text().then(function(mo){Ir(Wn.status,le,Wn.url,le[Wt],Wn.statusText,mo)}):we[vi](le,Wn.statusText))}).catch(function(Wn){rt||(Kt-=pi,pi=0),mi||(mi=!0,we[vi](le,Wn.message))})}catch(Wn){mi||we[vi](le,(0,Oe.eU)(Wn))}_i&&!mi&&(mi=!0,we._onSuccess(le,le[Wt]))}o(Za,"_doFetchSender");function Aa(le){try{if(le&&le!==""){var rt=(0,Oe.xA)().parse(le);if(rt&&rt.itemsReceived&&rt.itemsReceived>=rt[cr]&&rt.itemsReceived-rt.itemsAccepted===rt.errors[Wt])return rt}}catch(Ct){(0,I.kP)(we[Gn](),1,43,"Cannot parse the response. "+(0,D.jj)(Ct),{response:le})}return null}o(Aa,"_parseResponse");function qr(le,rt){if(rt===void 0&&(rt=1),!(!le||le[Wt]===0)){var Ct=we[Dr];Ct[Nr](le),b++;for(var Ut=0,vn=le;Ut<vn.length;Ut++){var En=vn[Ut];Ct[Er](En)}Ra(rt),kr()}}o(qr,"_resendPayload");function Ra(le){var rt=10,Ct;if(b<=1)Ct=rt;else{var Ut=(Math.pow(2,b)-1)/2,vn=Math.floor(Math.random()*Ut*rt)+1;vn=le*vn,Ct=Math.max(Math.min(vn,3600),rt)}var En=(0,D.m6)()+Ct*1e3;N=En}o(Ra,"_setRetryTime");function kr(){if(!Le&&!de){var le=N?Math.max(0,N-(0,D.m6)()):0,rt=Math.max(we[xn][pa](),le);Le=setTimeout(function(){Le=null,we[or](!0,null,1)},rt)}}o(kr,"_setupTimer");function ua(){clearTimeout(Le),Le=null,N=null}o(ua,"_clearScheduledTimer");function Ta(le){return le===401||le===403||le===408||le===429||le===500||le===502||le===503||le===504}o(Ta,"_isRetriable");function Yi(le,rt){return le?"XMLHttpRequest,Status:"+le.status+",Response:"+Ee(le)||0||0:rt}o(Yi,"_formatErrorMessageXhr");function Xa(le,rt){var Ct=we[Dr],Ut=(0,Oe.Jj)(),vn=new XDomainRequest;vn.onload=function(){return we._xdrOnLoad(vn,le)},vn.onerror=function(_i){return we[vi](le,eo(vn),_i)};var En=Ut&&Ut.location&&Ut.location.protocol||"";if(we[xn][sr]().lastIndexOf(En,0)!==0){(0,I.kP)(we[Gn](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Ct[fr]();return}var An=we[xn][sr]().replace(/^(https?:)/,"");vn.open("POST",An);var pi=Ct[Wi](le);vn.send(pi),Ct[gr](le)}o(Xa,"_xdrSender");function eo(le,rt){return le?"XDomainRequest,Response:"+Ee(le)||0:rt}o(eo,"_formatErrorMessageXdr");function po(){var le="getNotifyMgr";return we.core[le]?we.core[le]():we.core._notificationManager}o(po,"_getNotifyMgr");function Ho(le,rt){var Ct=po();if(Ct&&Ct[go])try{Ct[go](le,rt)}catch(Ut){(0,I.kP)(we[Gn](),1,74,"send request notification failed: "+(0,D.jj)(Ut),{exception:(0,Oe.eU)(Ut)})}}o(Ho,"_notifySendRequest");function to(le){var rt=(0,D.le)(le[ma])?!1:le[ma];if(rt)return!0;var Ct="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Ut=new RegExp(Ct);return Ut.test(le[Vr])}o(to,"_validateInstrumentationKey");function Ma(){we[pr]=null,we[Dr]=null,we._appId=null,we._sample=null,pt={},pn=null,b=0,N=null,q=null,de=!1,Le=null,ft=null,gt=0,Kt=0,Gt=null,Vt=null,gn=null}o(Ma,"_initDefaults")}),y}return o(f,"Sender"),f.constructEnvelope=function(y,b,N,q){var de;b!==y.iKey&&!(0,D.le)(b)?de=(0,w.uc)((0,w.uc)({},y),{iKey:b}):de=y;var Le=Ea[de.baseType]||Sa;return Le(N,de,q)},f}(Ui.i),ji=T(121),Gr="initialize",sa="diagnosticLogInterval",er=T(310),Cr=(0,Cn.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Yr=function(){function m(f){var y=new ji.F;((0,D.le)(f)||(0,D.le)(f.instrumentationKey))&&(0,D._y)("Invalid input configuration"),(0,R.Z)(m,this,function(b){b.config=f,N(),b[Gr]=N,b.getSKUDefaults=function(){b.config[sa]=b.config[sa]&&b.config[sa]>0?b.config[sa]:1e4},b.getSKUDefaults(),(0,D.Vb)(b,y,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function N(){var q=[],de=new Da;q.push(de),y[Gr](b.config,q),de[Gr](b.config,y,q),y.pollInternalLogs()}o(N,"_initialize")})}return o(m,"ApplicationInsights"),m.__ieDyn=1,m}()},679:(At,l,T)=>{"use strict";T.d(l,{Z:()=>$e});/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,w="undefined",M="constructor",S="prototype",B="function",U="_dynInstFuncs",J="_isDynProxy",ke="_dynClass",Fe="_dynCls$",Pe="_dynInstChk",F=Pe,_e="_dfOpts",Ie="_unknown_",fe="__proto__",ae="_dyn"+fe,ze="__dynProto$Gbl",X="_dynInstProto",Te="useBaseInst",oe="setInstFuncs",Q=Object,z=Q.getPrototypeOf,Z=Q.getOwnPropertyNames;function se(){var $;return typeof globalThis!==w&&($=globalThis),!$&&typeof self!==w&&($=self),!$&&typeof window!==w&&($=window),!$&&typeof T.g!==w&&($=T.g),$||{}}o(se,"_getGlobal");var Ke=se(),xe=Ke[ze]||(Ke[ze]={o:(R={},R[oe]=!0,R[Te]=!0,R),n:1e3});function We($,pe){return $&&Q[S].hasOwnProperty.call($,pe)}o(We,"_hasOwnProperty");function Je($){return $&&($===Q[S]||$===Array[S])}o(Je,"_isObjectOrArrayPrototype");function Y($){return Je($)||$===Function[S]}o(Y,"_isObjectArrayOrFunctionPrototype");function E($){var pe;if($){if(z)return z($);var j=$[fe]||$[S]||($[M]?$[M][S]:null);pe=$[ae]||j,We($,ae)||(delete $[X],pe=$[ae]=$[X]||$[ae],$[X]=j)}return pe}o(E,"_getObjProto");function Ne($,pe){var j=[];if(Z)j=Z($);else for(var ue in $)typeof ue=="string"&&We($,ue)&&j.push(ue);if(j&&j.length>0)for(var Ge=0;Ge<j.length;Ge++)pe(j[Ge])}o(Ne,"_forEachProp");function He($,pe,j){return pe!==M&&typeof $[pe]===B&&(j||We($,pe))}o(He,"_isDynamicCandidate");function Ue($){throw new TypeError("DynamicProto: "+$)}o(Ue,"_throwTypeError");function re($){var pe={};return Ne($,function(j){!pe[j]&&He($,j,!1)&&(pe[j]=$[j])}),pe}o(re,"_getInstanceFuncs");function L($,pe){for(var j=$.length-1;j>=0;j--)if($[j]===pe)return!0;return!1}o(L,"_hasVisited");function Se($,pe,j,ue){function Ge(ee,W,me){var ge=W[me];if(ge[J]&&ue){var vt=ee[U]||{};vt[F]!==!1&&(ge=(vt[W[ke]]||{})[me]||ge)}return function(){return ge.apply(ee,arguments)}}o(Ge,"_instFuncProxy");var at={};Ne(j,function(ee){at[ee]=Ge(pe,j,ee)});for(var ne=E($),ve=[];ne&&!Y(ne)&&!L(ve,ne);)Ne(ne,function(ee){!at[ee]&&He(ne,ee,!z)&&(at[ee]=Ge(pe,ne,ee))}),ve.push(ne),ne=E(ne);return at}o(Se,"_getBaseFuncs");function Re($,pe,j,ue){var Ge=null;if($&&We(j,ke)){var at=$[U]||{};if(Ge=(at[j[ke]]||{})[pe],Ge||Ue("Missing ["+pe+"] "+B),!Ge[Pe]&&at[F]!==!1){for(var ne=!We($,pe),ve=E($),ee=[];ne&&ve&&!Y(ve)&&!L(ee,ve);){var W=ve[pe];if(W){ne=W===ue;break}ee.push(ve),ve=E(ve)}try{ne&&($[pe]=Ge),Ge[Pe]=1}catch(me){at[F]=!1}}}return Ge}o(Re,"_getInstFunc");function Ae($,pe,j){var ue=pe[$];return ue===j&&(ue=E(pe)[$]),typeof ue!==B&&Ue("["+$+"] is not a "+B),ue}o(Ae,"_getProtoFunc");function qe($,pe,j,ue,Ge){function at(ee,W){var me=o(function(){var ge=Re(this,W,ee,me)||Ae(W,ee,me);return ge.apply(this,arguments)},"dynProtoProxy");return me[J]=1,me}if(o(at,"_createDynamicPrototype"),!Je($)){var ne=j[U]=j[U]||{},ve=ne[pe]=ne[pe]||{};ne[F]!==!1&&(ne[F]=!!Ge),Ne(j,function(ee){He(j,ee,!1)&&j[ee]!==ue[ee]&&(ve[ee]=j[ee],delete j[ee],(!We($,ee)||$[ee]&&!$[ee][J])&&($[ee]=at($,ee)))})}}o(qe,"_populatePrototype");function Rt($,pe){if(z){for(var j=[],ue=E(pe);ue&&!Y(ue)&&!L(j,ue);){if(ue===$)return!0;j.push(ue),ue=E(ue)}return!1}return!0}o(Rt,"_checkPrototype");function nt($,pe){return We($,S)?$.name||pe||Ie:(($||{})[M]||{}).name||pe||Ie}o(nt,"_getObjName");function $e($,pe,j,ue){We($,S)||Ue("theClass is an invalid class definition.");var Ge=$[S];Rt(Ge,pe)||Ue("["+nt($)+"] not in hierarchy of ["+nt(pe)+"]");var at=null;We(Ge,ke)?at=Ge[ke]:(at=Fe+nt($,"_")+"$"+xe.n,xe.n++,Ge[ke]=at);var ne=$e[_e],ve=!!ne[Te];ve&&ue&&ue[Te]!==void 0&&(ve=!!ue[Te]);var ee=re(pe),W=Se(Ge,pe,ee,ve);j(pe,W);var me=!!z&&!!ne[oe];me&&ue&&(me=!!ue[oe]),qe(Ge,at,pe,ee,me!==!1)}o($e,"dynamicProto"),$e[_e]=xe.o},179:(At,l,T)=>{At=T.nmd(At);var R=200,w="__lodash_hash_undefined__",M=1,S=2,B=9007199254740991,U="[object Arguments]",J="[object Array]",ke="[object AsyncFunction]",Fe="[object Boolean]",Pe="[object Date]",F="[object Error]",_e="[object Function]",Ie="[object GeneratorFunction]",fe="[object Map]",ae="[object Number]",ze="[object Null]",X="[object Object]",Te="[object Promise]",oe="[object Proxy]",Q="[object RegExp]",z="[object Set]",Z="[object String]",se="[object Symbol]",Ke="[object Undefined]",xe="[object WeakMap]",We="[object ArrayBuffer]",Je="[object DataView]",Y="[object Float32Array]",E="[object Float64Array]",Ne="[object Int8Array]",He="[object Int16Array]",Ue="[object Int32Array]",re="[object Uint8Array]",L="[object Uint8ClampedArray]",Se="[object Uint16Array]",Re="[object Uint32Array]",Ae=/[\\^$.*+?()[\]{}|]/g,qe=/^\[object .+?Constructor\]$/,Rt=/^(?:0|[1-9]\d*)$/,nt={};nt[Y]=nt[E]=nt[Ne]=nt[He]=nt[Ue]=nt[re]=nt[L]=nt[Se]=nt[Re]=!0,nt[U]=nt[J]=nt[We]=nt[Fe]=nt[Je]=nt[Pe]=nt[F]=nt[_e]=nt[fe]=nt[ae]=nt[X]=nt[Q]=nt[z]=nt[Z]=nt[xe]=!1;var $e=typeof T.g=="object"&&T.g&&T.g.Object===Object&&T.g,$=typeof self=="object"&&self&&self.Object===Object&&self,pe=$e||$||Function("return this")(),j=l&&!l.nodeType&&l,ue=j&&!0&&At&&!At.nodeType&&At,Ge=ue&&ue.exports===j,at=Ge&&$e.process,ne=function(){try{return at&&at.binding&&at.binding("util")}catch(v){}}(),ve=ne&&ne.isTypedArray;function ee(v,_){for(var H=-1,ye=v==null?0:v.length,ct=0,et=[];++H<ye;){var K=v[H];_(K,H,v)&&(et[ct++]=K)}return et}o(ee,"arrayFilter");function W(v,_){for(var H=-1,ye=_.length,ct=v.length;++H<ye;)v[ct+H]=_[H];return v}o(W,"arrayPush");function me(v,_){for(var H=-1,ye=v==null?0:v.length;++H<ye;)if(_(v[H],H,v))return!0;return!1}o(me,"arraySome");function ge(v,_){for(var H=-1,ye=Array(v);++H<v;)ye[H]=_(H);return ye}o(ge,"baseTimes");function vt(v){return function(_){return v(_)}}o(vt,"baseUnary");function Ce(v,_){return v.has(_)}o(Ce,"cacheHas");function D(v,_){return v==null?void 0:v[_]}o(D,"getValue");function I(v){var _=-1,H=Array(v.size);return v.forEach(function(ye,ct){H[++_]=[ct,ye]}),H}o(I,"mapToArray");function Oe(v,_){return function(H){return v(_(H))}}o(Oe,"overArg");function St(v){var _=-1,H=Array(v.size);return v.forEach(function(ye){H[++_]=ye}),H}o(St,"setToArray");var ht=Array.prototype,Ft=Function.prototype,st=Object.prototype,Dt=pe["__core-js_shared__"],bt=Ft.toString,hn=st.hasOwnProperty,mn=function(){var v=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Dn=st.toString,$n=RegExp("^"+bt.call(hn).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=Ge?pe.Buffer:void 0,Et=pe.Symbol,Yt=pe.Uint8Array,Pt=st.propertyIsEnumerable,nn=ht.splice,it=Et?Et.toStringTag:void 0,rn=Object.getOwnPropertySymbols,ln=Ye?Ye.isBuffer:void 0,cn=Oe(Object.keys,Object),en=ai(pe,"DataView"),_n=ai(pe,"Map"),Nn=ai(pe,"Promise"),Xn=ai(pe,"Set"),di=ai(pe,"WeakMap"),On=ai(Object,"create"),hi=Ti(en),ir=Ti(_n),Gi=Ti(Nn),rr=Ti(Xn),zi=Ti(di),Di=Et?Et.prototype:void 0,k=Di?Di.valueOf:void 0;function Be(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var ye=v[_];this.set(ye[0],ye[1])}}o(Be,"Hash");function Xe(){this.__data__=On?On(null):{},this.size=0}o(Xe,"hashClear");function ut(v){var _=this.has(v)&&delete this.__data__[v];return this.size-=_?1:0,_}o(ut,"hashDelete");function lt(v){var _=this.__data__;if(On){var H=_[v];return H===w?void 0:H}return hn.call(_,v)?_[v]:void 0}o(lt,"hashGet");function Lt(v){var _=this.__data__;return On?_[v]!==void 0:hn.call(_,v)}o(Lt,"hashHas");function Kn(v,_){var H=this.__data__;return this.size+=this.has(v)?0:1,H[v]=On&&_===void 0?w:_,this}o(Kn,"hashSet"),Be.prototype.clear=Xe,Be.prototype.delete=ut,Be.prototype.get=lt,Be.prototype.has=Lt,Be.prototype.set=Kn;function Rn(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var ye=v[_];this.set(ye[0],ye[1])}}o(Rn,"ListCache");function yt(){this.__data__=[],this.size=0}o(yt,"listCacheClear");function _t(v){var _=this.__data__,H=wn(_,v);if(H<0)return!1;var ye=_.length-1;return H==ye?_.pop():nn.call(_,H,1),--this.size,!0}o(_t,"listCacheDelete");function Nt(v){var _=this.__data__,H=wn(_,v);return H<0?void 0:_[H][1]}o(Nt,"listCacheGet");function ot(v){return wn(this.__data__,v)>-1}o(ot,"listCacheHas");function Qt(v,_){var H=this.__data__,ye=wn(H,v);return ye<0?(++this.size,H.push([v,_])):H[ye][1]=_,this}o(Qt,"listCacheSet"),Rn.prototype.clear=yt,Rn.prototype.delete=_t,Rn.prototype.get=Nt,Rn.prototype.has=ot,Rn.prototype.set=Qt;function Ht(v){var _=-1,H=v==null?0:v.length;for(this.clear();++_<H;){var ye=v[_];this.set(ye[0],ye[1])}}o(Ht,"MapCache");function mt(){this.size=0,this.__data__={hash:new Be,map:new(_n||Rn),string:new Be}}o(mt,"mapCacheClear");function an(v){var _=Jn(this,v).delete(v);return this.size-=_?1:0,_}o(an,"mapCacheDelete");function tn(v){return Jn(this,v).get(v)}o(tn,"mapCacheGet");function Sn(v){return Jn(this,v).has(v)}o(Sn,"mapCacheHas");function yn(v,_){var H=Jn(this,v),ye=H.size;return H.set(v,_),this.size+=H.size==ye?0:1,this}o(yn,"mapCacheSet"),Ht.prototype.clear=mt,Ht.prototype.delete=an,Ht.prototype.get=tn,Ht.prototype.has=Sn,Ht.prototype.set=yn;function Vn(v){var _=-1,H=v==null?0:v.length;for(this.__data__=new Ht;++_<H;)this.add(v[_])}o(Vn,"SetCache");function Cn(v){return this.__data__.set(v,w),this}o(Cn,"setCacheAdd");function Un(v){return this.__data__.has(v)}o(Un,"setCacheHas"),Vn.prototype.add=Vn.prototype.push=Cn,Vn.prototype.has=Un;function zt(v){var _=this.__data__=new Rn(v);this.size=_.size}o(zt,"Stack");function It(){this.__data__=new Rn,this.size=0}o(It,"stackClear");function $t(v){var _=this.__data__,H=_.delete(v);return this.size=_.size,H}o($t,"stackDelete");function on(v){return this.__data__.get(v)}o(on,"stackGet");function Tn(v){return this.__data__.has(v)}o(Tn,"stackHas");function jt(v,_){var H=this.__data__;if(H instanceof Rn){var ye=H.__data__;if(!_n||ye.length<R-1)return ye.push([v,_]),this.size=++H.size,this;H=this.__data__=new Ht(ye)}return H.set(v,_),this.size=H.size,this}o(jt,"stackSet"),zt.prototype.clear=It,zt.prototype.delete=$t,zt.prototype.get=on,zt.prototype.has=Tn,zt.prototype.set=jt;function sn(v,_){var H=ki(v),ye=!H&&Hn(v),ct=!H&&!ye&&dn(v),et=!H&&!ye&&!ct&&yi(v),K=H||ye||ct||et,ie=K?ge(v.length,String):[],he=ie.length;for(var Me in v)(_||hn.call(v,Me))&&!(K&&(Me=="length"||ct&&(Me=="offset"||Me=="parent")||et&&(Me=="buffer"||Me=="byteLength"||Me=="byteOffset")||qn(Me,he)))&&ie.push(Me);return ie}o(sn,"arrayLikeKeys");function wn(v,_){for(var H=v.length;H--;)if(Qi(v[H][0],_))return H;return-1}o(wn,"assocIndexOf");function In(v,_,H){var ye=_(v);return ki(v)?ye:W(ye,H(v))}o(In,"baseGetAllKeys");function un(v){return v==null?v===void 0?Ke:ze:it&&it in Object(v)?ti(v):Li(v)}o(un,"baseGetTag");function Ln(v){return Ui(v)&&un(v)==U}o(Ln,"baseIsArguments");function ei(v,_,H,ye,ct){return v===_?!0:v==null||_==null||!Ui(v)&&!Ui(_)?v!==v&&_!==_:Bn(v,_,H,ye,ei,ct)}o(ei,"baseIsEqual");function Bn(v,_,H,ye,ct,et){var K=ki(v),ie=ki(_),he=K?J:Yn(v),Me=ie?J:Yn(_);he=he==U?X:he,Me=Me==U?X:Me;var Ve=he==X,dt=Me==X,Tt=he==Me;if(Tt&&dn(v)){if(!dn(_))return!1;K=!0,Ve=!1}if(Tt&&!Ve)return et||(et=new zt),K||yi(v)?qt(v,_,H,ye,ct,et):Ot(v,_,he,H,ye,ct,et);if(!(H&M)){var kt=Ve&&hn.call(v,"__wrapped__"),Jt=dt&&hn.call(_,"__wrapped__");if(kt||Jt){var si=kt?v.value():v,Wt=Jt?_.value():_;return et||(et=new zt),ct(si,Wt,H,ye,et)}}return Tt?(et||(et=new zt),ri(v,_,H,ye,ct,et)):!1}o(Bn,"baseIsEqualDeep");function jn(v){if(!ar(v)||Ri(v))return!1;var _=oi(v)?$n:qe;return _.test(Ti(v))}o(jn,"baseIsNative");function Mn(v){return Ui(v)&&ci(v.length)&&!!nt[un(v)]}o(Mn,"baseIsTypedArray");function zn(v){if(!Ci(v))return cn(v);var _=[];for(var H in Object(v))hn.call(v,H)&&H!="constructor"&&_.push(H);return _}o(zn,"baseKeys");function qt(v,_,H,ye,ct,et){var K=H&M,ie=v.length,he=_.length;if(ie!=he&&!(K&&he>ie))return!1;var Me=et.get(v);if(Me&&et.get(_))return Me==_;var Ve=-1,dt=!0,Tt=H&S?new Vn:void 0;for(et.set(v,_),et.set(_,v);++Ve<ie;){var kt=v[Ve],Jt=_[Ve];if(ye)var si=K?ye(Jt,kt,Ve,_,v,et):ye(kt,Jt,Ve,v,_,et);if(si!==void 0){if(si)continue;dt=!1;break}if(Tt){if(!me(_,function(Wt,ui){if(!Ce(Tt,ui)&&(kt===Wt||ct(kt,Wt,H,ye,et)))return Tt.push(ui)})){dt=!1;break}}else if(!(kt===Jt||ct(kt,Jt,H,ye,et))){dt=!1;break}}return et.delete(v),et.delete(_),dt}o(qt,"equalArrays");function Ot(v,_,H,ye,ct,et,K){switch(H){case Je:if(v.byteLength!=_.byteLength||v.byteOffset!=_.byteOffset)return!1;v=v.buffer,_=_.buffer;case We:return!(v.byteLength!=_.byteLength||!et(new Yt(v),new Yt(_)));case Fe:case Pe:case ae:return Qi(+v,+_);case F:return v.name==_.name&&v.message==_.message;case Q:case Z:return v==_+"";case fe:var ie=I;case z:var he=ye&M;if(ie||(ie=St),v.size!=_.size&&!he)return!1;var Me=K.get(v);if(Me)return Me==_;ye|=S,K.set(v,_);var Ve=qt(ie(v),ie(_),ye,ct,et,K);return K.delete(v),Ve;case se:if(k)return k.call(v)==k.call(_)}return!1}o(Ot,"equalByTag");function ri(v,_,H,ye,ct,et){var K=H&M,ie=xi(v),he=ie.length,Me=xi(_),Ve=Me.length;if(he!=Ve&&!K)return!1;for(var dt=he;dt--;){var Tt=ie[dt];if(!(K?Tt in _:hn.call(_,Tt)))return!1}var kt=et.get(v);if(kt&&et.get(_))return kt==_;var Jt=!0;et.set(v,_),et.set(_,v);for(var si=K;++dt<he;){Tt=ie[dt];var Wt=v[Tt],ui=_[Tt];if(ye)var ni=K?ye(ui,Wt,Tt,_,v,et):ye(Wt,ui,Tt,v,_,et);if(!(ni===void 0?Wt===ui||ct(Wt,ui,H,ye,et):ni)){Jt=!1;break}si||(si=Tt=="constructor")}if(Jt&&!si){var Fn=v.constructor,Mi=_.constructor;Fn!=Mi&&"constructor"in v&&"constructor"in _&&!(typeof Fn=="function"&&Fn instanceof Fn&&typeof Mi=="function"&&Mi instanceof Mi)&&(Jt=!1)}return et.delete(v),et.delete(_),Jt}o(ri,"equalObjects");function xi(v){return In(v,Pn,Oi)}o(xi,"getAllKeys");function Jn(v,_){var H=v.__data__;return Ai(_)?H[typeof _=="string"?"string":"hash"]:H.map}o(Jn,"getMapData");function ai(v,_){var H=D(v,_);return jn(H)?H:void 0}o(ai,"getNative");function ti(v){var _=hn.call(v,it),H=v[it];try{v[it]=void 0;var ye=!0}catch(et){}var ct=Dn.call(v);return ye&&(_?v[it]=H:delete v[it]),ct}o(ti,"getRawTag");var Oi=rn?function(v){return v==null?[]:(v=Object(v),ee(rn(v),function(_){return Pt.call(v,_)}))}:kn,Yn=un;(en&&Yn(new en(new ArrayBuffer(1)))!=Je||_n&&Yn(new _n)!=fe||Nn&&Yn(Nn.resolve())!=Te||Xn&&Yn(new Xn)!=z||di&&Yn(new di)!=xe)&&(Yn=o(function(v){var _=un(v),H=_==X?v.constructor:void 0,ye=H?Ti(H):"";if(ye)switch(ye){case hi:return Je;case ir:return fe;case Gi:return Te;case rr:return z;case zi:return xe}return _},"getTag"));function qn(v,_){return _=_==null?B:_,!!_&&(typeof v=="number"||Rt.test(v))&&v>-1&&v%1==0&&v<_}o(qn,"isIndex");function Ai(v){var _=typeof v;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?v!=="__proto__":v===null}o(Ai,"isKeyable");function Ri(v){return!!mn&&mn in v}o(Ri,"isMasked");function Ci(v){var _=v&&v.constructor,H=typeof _=="function"&&_.prototype||st;return v===H}o(Ci,"isPrototype");function Li(v){return Dn.call(v)}o(Li,"objectToString");function Ti(v){if(v!=null){try{return bt.call(v)}catch(_){}try{return v+""}catch(_){}}return""}o(Ti,"toSource");function Qi(v,_){return v===_||v!==v&&_!==_}o(Qi,"eq");var Hn=Ln(function(){return arguments}())?Ln:function(v){return Ui(v)&&hn.call(v,"callee")&&!Pt.call(v,"callee")},ki=Array.isArray;function fi(v){return v!=null&&ci(v.length)&&!oi(v)}o(fi,"isArrayLike");var dn=ln||V;function Zi(v,_){return ei(v,_)}o(Zi,"isEqual");function oi(v){if(!ar(v))return!1;var _=un(v);return _==_e||_==Ie||_==ke||_==oe}o(oi,"isFunction");function ci(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=B}o(ci,"isLength");function ar(v){var _=typeof v;return v!=null&&(_=="object"||_=="function")}o(ar,"isObject");function Ui(v){return v!=null&&typeof v=="object"}o(Ui,"isObjectLike");var yi=ve?vt(ve):Mn;function Pn(v){return fi(v)?sn(v):zn(v)}o(Pn,"keys");function kn(){return[]}o(kn,"stubArray");function V(){return!1}o(V,"stubFalse"),At.exports=Zi},724:()=>{}},Ua={};function Zn(At){var l=Ua[At];if(l!==void 0)return l.exports;var T=Ua[At]={id:At,loaded:!1,exports:{}};return ho[At](T,T.exports,Zn),T.loaded=!0,T.exports}o(Zn,"__webpack_require__"),(()=>{Zn.n=At=>{var l=At&&At.__esModule?()=>At.default:()=>At;return Zn.d(l,{a:l}),l}})(),(()=>{Zn.d=(At,l)=>{for(var T in l)Zn.o(l,T)&&!Zn.o(At,T)&&Object.defineProperty(At,T,{enumerable:!0,get:l[T]})}})(),(()=>{Zn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(At){if(typeof window=="object")return window}}()})(),(()=>{Zn.o=(At,l)=>Object.prototype.hasOwnProperty.call(At,l)})(),(()=>{Zn.r=At=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(At,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(At,"__esModule",{value:!0})}})(),(()=>{Zn.nmd=At=>(At.paths=[],At.children||(At.children=[]),At)})();var fo={};(()=>{"use strict";Zn.r(fo),Zn.d(fo,{StateKeys:()=>Xr,activate:()=>Pl,ensureProvidersRegistered:()=>Si,getOpenActionsService:()=>lo,getState:()=>Ds,isPreRelease:()=>Ml,updateState:()=>Lo});var At={};Zn.r(At),Zn.d(At,{max:()=>Xs,min:()=>Zs});const l=require("vscode"),T=new TextDecoder,R=new TextEncoder,w=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function M(t){const e=R.encode(t),n=new Array(e.length);for(let i=0;i<e.length;++i)n[i]=w[e[i]];return n.join("")}o(M,"encodeUtf8Hex");function S(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(i=>parseInt(i,16)));return T.decode(n)}o(S,"decodeUtf8Hex");const B=/^[0-9a-f]{40}$/i;function U(t){return t!==void 0&&B.test(t)}o(U,"isSha");const J=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function ke(t){return J.test(t)}o(ke,"isValidBranchName");function Fe(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(Fe,"shortenRef");const Pe=47;function F(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(F,"asKey");function _e(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o(_e,"asFileKey");function Ie(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(Ie,"asFileStorageKey");function fe(t){const e=t.path;let n=0,i=-1,r=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===Pe){if(!r){n=a+1;break}}else i===-1&&(r=!1,i=a+1);return i===-1?"":e.slice(n,i)}o(fe,"basename");function ae(t){const e=t.path;if(e.length===1)return"/";let n,i=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===Pe){if(!r){i=a;break}}else r=!1;return i===-1?"/":e.slice(0,i)}o(ae,"dirname");function ze(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(ze,"getParent");function X(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(X,"joinRelativePath");function Te(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),oe(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):oe(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(Te,"isChild");function oe(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),e.length===1||t.path.startsWith(e.endsWith("/")?e:`${e}/`)):e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(oe,"isDescendent");function Q(t){return t&&typeof t=="object"&&"scheme"in t}o(Q,"isSerializedUri");var z;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:h}=d,g=h.indexOf(t.authoritySeparator);return g!==-1?h.substr(0,g):h}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function i(d,h){const g=new Map,p=l.workspace.textDocuments;if(p.length===0)return g;for(const C of p)C.uri.scheme===d&&h.some(O=>oe(C.uri,O))&&g.set(F(C.uri),C.uri);return g}o(i,"getOpenUris"),t.getOpenUris=i;function r(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(r,"getVirtualUri"),t.getVirtualUri=r;function a(d,h){const[g,p]=d.authority.split(t.authoritySeparator);let C;if(p)try{const O=JSON.parse(S(p));C=h?h(O):O}catch{}return{scheme:g,metadata:C}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,h){const g=h?`${t.authoritySeparator}${M(JSON.stringify(h))}`:"";return`${d}${g}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,h;return(h=(d=l.workspace.workspaceFolders)==null?void 0:d.every(g=>g.uri.scheme===t.scheme))!=null?h:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(z||(z={}));var Z;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(Z||(Z={}));var se;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(se||(se={}));var Ke;(function(t){function e(n){return n!==void 0&&n.type===Je.Active}o(e,"isActive"),t.isActive=e})(Ke||(Ke={}));var xe;(function(t){function e(n){const i=z.decodeAuthority(n).metadata;if(!(i===void 0||i.idx===void 0)){if(i.idx==="latest")return{type:We.Latest};if(U(i.idx))return{type:We.SHA,sha:i.idx}}}o(e,"decode"),t.decode=e})(xe||(xe={}));var We;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(We||(We={}));var Je;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Je||(Je={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Je||(Je={}));var Y;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(Y||(Y={}));var E;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(E||(E={}));var Ne;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(Ne||(Ne={}));var He;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(He||(He={}));var Ue;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(Ue||(Ue={}));var re;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(re||(re={}));var L;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(L||(L={}));var Se;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Se||(Se={}));var Re;(function(t){t.Browse="browse",t.Edit="edit"})(Re||(Re={}));var Ae;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(Ae||(Ae={}));class qe extends Error{constructor(e,n,i){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=i}static CommitFailedError(){return new qe("Failed to create and push commit",Ae.CommitFailedError)}static DetachedHEADError(e){return new qe(e,Ae.DetachedHEADError)}static CommitToProtectedBranchError(e){return new qe(e,Ae.CommitToProtectedBranchError)}static InvalidBranchNameError(e,n=!1){const i=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new qe(i,Ae.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new qe(e,Ae.InvalidCredentialsError,n)}static MergeConflictError(e){return new qe(e,Ae.MergeConflictError)}static NothingToCommitError(e){return new qe(e,Ae.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new qe(n,Ae.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new qe(e,Ae.SyncConflictsError)}static UnresolvedConflictsError(){return new qe("You have unresolved merge conflicts.",Ae.UnresolvedConflictsError)}static InvalidRepositoryError(){return new qe("The current repository is invalid",Ae.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:Ae.Unknown}}o(qe,"VirtualProviderError");const Rt=6;var nt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(nt||(nt={}));var $e;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})($e||($e={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}($e||($e={}));var $;(function(t){t.Browse="browse",t.Edit="edit"})($||($={})),function(t){function e(i){return i===t.Browse||i===t.Edit?i:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(i){return i===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}($||($={}));var pe;(function(t){function e(n,i){return n.display===i.display&&n.index===i.index}o(e,"equals"),t.equals=e})(pe||(pe={}));var j;(function(t){const e=new Map([[L.Branch,$e.None],[L.RemoteBranch,$e.None],[L.PullRequestBranch,$e.Match],[L.PullRequestRemoteBranch,$e.Match],[L.Commit,$e.Match],[L.Tag,$e.Match]]),n=new Map([[L.Branch,$.Edit],[L.RemoteBranch,$.Edit],[L.PullRequestBranch,$.Browse],[L.PullRequestRemoteBranch,$.Browse],[L.Commit,$.Browse],[L.Tag,$.Browse]]);function i(a){var s,c;return{display:(s=n.get(a))!=null?s:$.Edit,index:(c=e.get(a))!=null?c:$e.None}}o(i,"getDefault"),t.getDefault=i;function r(a){switch(a){case L.Branch:case L.RemoteBranch:return{display:$.Browse,index:$e.Latest};case L.PullRequestBranch:case L.PullRequestRemoteBranch:return{display:$.Browse,index:$e.Match};case L.Commit:case L.Tag:return{display:$.Browse,index:$e.Match};default:return{display:$.Edit,index:$e.None}}}o(r,"getIndexDefault"),t.getIndexDefault=r})(j||(j={}));const ue=null;var Ge=Zn(179),at=Zn.n(Ge);const ne="modes",ve="indexMemento";class ee{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){W.configPrefix=e,W.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(W.onConfigurationChanged,W))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(ne),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(ne,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(ve),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,i){const r=this.inspect(e,n);return r===void 0&&i!==void 0?i:(r==null?void 0:r.workspaceFolderValue)!==void 0?r.workspaceFolderValue:(r==null?void 0:r.workspaceValue)!==void 0?r.workspaceValue:r==null?void 0:r.globalValue}get(e,n,i){return i===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,i)}getMode(e,n,i){var r;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:$.sanitize(s.display),index:$e.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===L.Branch||n===L.RemoteBranch)switch((r=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:r.get("branch")){case"none":return{display:$.Edit,index:$e.None};case"latest":return{display:$.Browse,index:$e.Latest};case"tipPlusLatest":return{display:$.Edit,index:$e.TipPlusLatest}}if(!i)return j.getDefault(n)}setMode(e,n){const i=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(i,n),Promise.resolve()):(this.modes[i]=n,this._state.update(ne,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(ve,this.indexMemento))}getAny(e,n,i){return i===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,i)}changed(e,n,i){var r;return(r=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,i))!=null?r:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,i){const r=W.inspect(e);if(r===void 0)return!1;let a=!1;return r.globalValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.globalValue):r.globalValue,l.ConfigurationTarget.Global),a=!0),r.workspaceValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceValue):r.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),r.workspaceFolderValue!==void 0&&(await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceFolderValue):r.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&i.fallbackValue!==void 0&&(await this.update(n,i.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,i){const r=W.inspect(e);if(r===void 0)return;const a=W.inspect(n);r.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.globalValue):r.globalValue,l.ConfigurationTarget.Global),r.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceValue):r.workspaceValue,l.ConfigurationTarget.Workspace),r.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,i.migrationFn!=null?i.migrationFn(r.workspaceFolderValue):r.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,i){return l.workspace.getConfiguration(this.configPrefix).update(e,n,i)}updateAny(e,n,i,r){return l.workspace.getConfiguration(void 0,i===l.ConfigurationTarget.Global?void 0:r).update(e,n,i)}updateEffective(e,n){const i=W.inspect(e);return i.workspaceFolderValue!==void 0?n===i.workspaceFolderValue?Promise.resolve(void 0):W.update(e,n,l.ConfigurationTarget.WorkspaceFolder):i.workspaceValue!==void 0?n===i.workspaceValue?Promise.resolve(void 0):W.update(e,n,l.ConfigurationTarget.Workspace):i.globalValue===n||i.globalValue===void 0&&n===i.defaultValue?Promise.resolve(void 0):W.update(e,at()(n,i.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(ee,"Configuration");const W=new ee,me="";var ge;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(ge||(ge={}));var vt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(vt||(vt={}));const Ce="[RemoteHub]",D=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===ge.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:l.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case ge.Off:return 0;case ge.Error:return 1;case ge.Warn:return 2;case ge.Info:return 3;case ge.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){D.isDebugging&&console.log(this.timestamp,Ce,t!=null?t:me,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:me}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!D.isDebugging)){if(e===void 0){const i=t instanceof Error?t.stack:void 0;if(i){const r=/.*\s*?at\s(.+?)\s/.exec(i);r!==null&&(e=r[1])}}D.isDebugging&&console.error(this.timestamp,Ce,e!=null?e:me,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:me}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){D.isDebugging&&console.log(this.timestamp,Ce,t!=null?t:me,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:me}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){D.isDebugging&&console.warn(this.timestamp,Ce,t!=null?t:me,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:me}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,i;let r;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;r=(e=t.prototype.constructor.name)!=null?e:me}else r=(i=(n=t.constructor)==null?void 0:n.name)!=null?i:me;const a=r.indexOf("_");return a===-1?r:r.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,me)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!D.isDebugging)return me;const n=e.map(i=>this.toLoggable(i)).join(", ");return n.length!==0?` \u2014 ${n}`:me}},"_Logger");let I=D;I.level=0,I._logLevel=ge.Off;const Oe=new TextDecoder,St=new TextEncoder;async function ht(t){const e=typeof t=="string"?St.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const i=new hn;i.update(e),n=i.digest()}return globalThis.btoa(encodeURIComponent(Oe.decode(n)))}o(ht,"sha1");var Ft;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Ft||(Ft={}));function st(t,e,n=32){const i=n-e,r=~((1<<i)-1);return(t<<e|(r&t)>>>i)>>>0}o(st,"leftRotate");function Dt(t,e=0,n=t.byteLength,i=0){for(let r=0;r<n;r++)t[e+r]=i}o(Dt,"fill");const bt=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,i=0;const r=t.byteLength;for(;i<r;){const a=Math.min(64-n,r-i);for(let s=0;s<a;s++)e[n++]=t[i++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,Dt(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Dt(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=bt._bigBlock32,e=this._buffDV;for(let h=0;h<64;h+=4)t.setUint32(h,e.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,st(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,r=this._h2,a=this._h3,s=this._h4,c,u,d;for(let h=0;h<80;h++)h<20?(c=i&r|~i&a,u=1518500249):h<40?(c=i^r^a,u=1859775393):h<60?(c=i&r|i&a|r&a,u=2400959708):(c=i^r^a,u=3395469782),d=st(n,5)+c+s+u+t.getUint32(h*4,!1)&4294967295,s=a,a=r,r=st(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let hn=bt;hn._bigBlock32=new DataView(new ArrayBuffer(320));function mn(t){const e=globalThis.atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i}o(mn,"fromBase64");const{fromCharCode:Dn}=String;function $n(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:i}=t;n<i;n++)e+=Dn(t[n])}return globalThis.btoa(e)}o($n,"toBase64");function Ye(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(Ye,"indexOfDifference");let Et;var Yt;(function(t){function e(n){const i=nn(n);return Et=l.env.uiKind===l.UIKind.Web,I.warn(`Running on the ${Et?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${i}; storageUri=${n.globalStorageUri.toString(!0)}`),i}o(e,"configure"),t.configure=e})(Yt||(Yt={}));const Pt=/\/workspaceStorage\/(?<id>[^/]+)/i;function nn(t){var e;if(t.storageUri===void 0)return"";const n=Pt.exec(t.storageUri.path);let i;if((e=n==null?void 0:n.groups)==null?void 0:e.id)i=n.groups.id;else{i=t.storageUri.path;const r=Ye(t.globalStorageUri.path,i),a=`/${t.extension.id}`;i.endsWith(a)?i=i.slice(r,-a.length):i=i.substr(r)}return/-[0-9]$/.test(i)?i.slice(0,-2):i}o(nn,"getWorkspaceId");var it;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(it||(it={}));const rn=new Map;function ln(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):rn.get(t)}o(ln,"getContext");function cn(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(cn,"isSupportedContextKey");async function en(t,e){rn.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(en,"setContext");const _n=o(async(t,e,n)=>{const i=await Promise.resolve().then(Zn.bind(Zn,326)),r=await Promise.resolve().then(Zn.bind(Zn,865)),a=new i.AppInsightsCore,s=new r.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const h={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=h}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(h=>{var g,p;!d||(h.ext=(g=h.ext)!=null?g:{},h.ext.utc=(p=h.ext.utc)!=null?p:{},h.ext.utc.flags=8462029)}),a},"getAICore"),Nn=o(async(t,e,n)=>{const i=await _n(t,e,n);return{logEvent:(a,s)=>{try{i==null||i.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{i==null||i.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var Xn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Xn||(Xn={}));class di{constructor(e,n){this._instantiationStatus=Xn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Xn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Xn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Xn.NOT_INSTANTIATED&&(this._instantiationStatus=Xn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Xn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Xn.INSTANTIATED}))}}o(di,"BaseTelemetrySender");class On{constructor(e,n,i){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,i),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender()}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,i,r){r?this.telemetrySender.sendEventData(e,{properties:n,measurements:i}):this.telemetryLogger.logUsage(e,{properties:n,measurements:i})}sendTelemetryEvent(e,n,i){this.internalSendTelemetryEvent(e,n,i,!1)}sendDangerousTelemetryEvent(e,n,i){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,i,!0)}internalSendTelemetryErrorEvent(e,n,i,r){r?this.telemetrySender.sendEventData(e,{properties:n,measurements:i}):this.telemetryLogger.logError(e,{properties:n,measurements:i})}sendTelemetryErrorEvent(e,n,i){this.internalSendTelemetryErrorEvent(e,n,i,!1)}sendDangerousTelemetryErrorEvent(e,n,i){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,i,!0)}internalSendTelemetryException(e,n,i,r){r?this.telemetrySender.sendErrorData(e,{properties:n,measurements:i}):this.telemetryLogger.logError(e,{properties:n,measurements:i})}sendTelemetryException(e,n,i){this.internalSendTelemetryException(e,n,i,!1)}sendDangerousTelemetryException(e,n,i){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,i,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(On,"BaseTelemetryReporter");class hi{static applyReplacements(e,n){for(const i of Object.keys(e))for(const r of n)r.lookup.test(i)&&(r.replacementString!==void 0?e[i]=r.replacementString:delete e[i])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.4-preview"}}static getInstance(){return hi._instance||(hi._instance=new hi),hi._instance}}o(hi,"TelemetryUtil");const ir=o(async(t,e)=>{let n;try{const r=await Promise.resolve().then(Zn.bind(Zn,783));n=new r.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),n.initialize()}catch(r){return Promise.reject(r)}return{logEvent:(r,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&hi.applyReplacements(s,e),n==null||n.track({name:r,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");class Gi extends On{constructor(e,n){let i=o(s=>ir(s,n),"clientFactory");hi.shouldUseOneDataSystemSDK(e)&&(i=o(s=>Nn(s,l),"clientFactory"));const r={release:navigator.appVersion,platform:"web",architecture:"web"},a=new di(e,i);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:hi.getAdditionalCommonProperties(r)})}}o(Gi,"TelemetryReporter");const rr="Type of classified event does not match event properties",zi=o(class{constructor(t){this.context=t,this.sharedProperties={},zi._instance=this,this.reporter=new Gi(zi.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==rr&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(I.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{I.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let Di=zi;Di.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function k(t){const e=performance.now()*.001;let n=Math.floor(e),i=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],i=i-t[1],i<0&&(n--,i+=1e9)),[n,i]}o(k,"hrtime");let Be=0;function Xe(){return Be===Number.MAX_SAFE_INTEGER&&(Be=0),++Be}o(Xe,"getNextInstanceId");const ut=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Xe().toString().padStart(5)}] `;var i,r,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(i=e==null?void 0:e.log)!=null?i:{},this.logLevel=(r=e==null?void 0:e.logLevel)!=null?r:ge.Info,this.time=k(),d){if(!I.enabled(this.logLevel))return;n.length?Lt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):Lt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:k(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=k()}stop(t){this.restart(t)}logCore(t,e,n){var i,r,a,s,c,u,d;if(!I.enabled(this.logLevel))return;let h="";if(this.step){const[O,A]=k(this.step.time),G=O*1e3+Math.floor(A/1e6);h=`${this.step.label?`${this.step.label} took `:""}${G} ms`}if(!n){Lt(this.logLevel,`${this.instance}${(i=e==null?void 0:e.prefix)!=null?i:""}${t}${(r=e==null?void 0:e.message)!=null?r:""}${h?` ${h}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[g,p]=k(this.time),C=g*1e3+Math.floor(p/1e6);Lt(C>500?ge.Warn:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${C} ms${h?` (${h})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var i;(i=ut.watches.get(t))==null||i.log(),ut.watches.set(t,new ut(t,e,...n))}static log(t,e){var n;(n=ut.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=ut.watches.get(t))==null||n.stop(e),ut.watches.delete(t)}},"_Stopwatch");let lt=ut;lt.watches=new Map;function Lt(t,e,...n){switch(t){case ge.Warn:I.warn(e,...n);break;case ge.Info:I.log(e,...n);break;default:I.debug(e,...n);break}}o(Lt,"log");class Kn{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const i of n.added)this.repositoryOpened(i);for(const i of n.removed)this.repositoryClosed(i)}),W.onDidChange(n=>{for(const i of this.services.values()){const r=i.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",r.uri)&&i.service.updateIndexMode().catch(a=>{I.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=F(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const i of this.providers){const r=await i.createNavigationService(this.providerService,e);if(r!==void 0){const a=r();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=F(e.uri);this.handledRepositories.delete(n);const i=this.services.get(n);i!==void 0&&(i.service.dispose(),this.services.delete(F(e.uri)))}}o(Kn,"CodeNavigationServices");const Rn=globalThis.fetch;async function yt(t,e,n){const i=new AbortController;n.onCancellationRequested(()=>i.abort());try{return await globalThis.fetch(t,{...e,signal:i.signal})}catch(r){throw n.isCancellationRequested?new CancellationError:r}}o(yt,"fetchWithCancellation");async function _t(t,e,n,i,r){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;i.onCancellationRequested(()=>a.cancel());try{const s=await yt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let h=3;for(;;){let{done:g,value:p}=await d.read();if(g){const O=c.reduce((te,x)=>te+x.length,0),A=new Uint8Array(O);let G=0;for(const te of c)A.set(te,G),G+=te.length;return A}p&&(c.push(p),u+=p.length);const C=Math.floor(u/(1024*1024));if(h<C){h=C;const O={message:C+" MB"};r.report(O)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw i.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(_t,"fetchUInt8ArrayWithMaxSizeAndCancellation");const Nt=globalThis.crypto;function ot(){return Nt.randomUUID()}o(ot,"uuid");/*! (c) Andrea Giammarchi - ISC */var Qt={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Qt.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,i){"use strict";var r=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},h={append:function(x,ce){O(this._ungap,x,ce)},delete:function(x){delete this._ungap[x]},get:function(x){return this.has(x)?this._ungap[x][0]:null},getAll:function(x){return this.has(x)?this._ungap[x].slice(0):[]},has:function(x){return x in this._ungap},set:function(x,ce){this._ungap[x]=[n(ce)]},forEach:function(x,ce){var be=this;for(var De in be._ungap)be._ungap[De].forEach(je,De);function je(wt){x.call(ce,wt,n(De),be)}o(je,"invoke")},toJSON:function(){return{}},toString:function(){var x=[];for(var ce in this._ungap)for(var be=G(ce),De=0,je=this._ungap[ce];De<je.length;De++)x.push(be+"="+G(je[De]));return x.join("&")}};for(var g in h)a(p.prototype,g,{configurable:!0,writable:!0,value:h[g]});Qt.URLSearchParams=p;function p(x){var ce=r(null);switch(a(this,"_ungap",{value:ce}),!0){case!x:break;case typeof x=="string":x.charAt(0)==="?"&&(x=x.slice(1));for(var be=x.split("&"),De=0,je=be.length;De<je;De++){var wt=be[De],Ze=wt.indexOf("=");-1<Ze?O(ce,A(wt.slice(0,Ze)),A(wt.slice(Ze+1))):wt.length&&O(ce,A(wt),"")}break;case i(x):for(var De=0,je=x.length;De<je;De++){var wt=x[De];O(ce,wt[0],wt[1])}break;case"forEach"in x:x.forEach(C,ce);break;default:for(var xt in x)O(ce,xt,x[xt])}}o(p,"URLSearchParams");function C(x,ce){O(this,ce,x)}o(C,"addEach");function O(x,ce,be){var De=i(be)?be.join(","):be;ce in x?x[ce].push(De):x[ce]=[De]}o(O,"appendTo");function A(x){return decodeURIComponent(x.replace(c,"%25").replace(u," "))}o(A,"decode");function G(x){return encodeURIComponent(x).replace(s,te)}o(G,"encode");function te(x){return d[x]}o(te,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(i){}"forEach"in t||(t.forEach=o(function(r,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){r.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(r,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(r,a){this.push(r)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(r,a){this.push([a,r])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var r=this.entries(),a=r.next(),s=a.done,c=[],u=Object.create(null),d,h,g;!s;)g=a.value,h=g[0],c.push(h),h in u||(u[h]=[]),u[h].push(g[1]),a=r.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)h=c[d],this.append(h,u[h].shift())},"sort"));function n(i,r){var a=[];return i.forEach(r,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(i){var r=i.defineProperty,a=i.getOwnPropertyDescriptor,s=o(function(g){function p(A,G){t.append.call(this,A,G),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}o(p,"append");function C(A){t.delete.call(this,A),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}o(C,"del");function O(A,G){t.set.call(this,A,G),A=this.toString(),g.set.call(this._usp,A?"?"+A:"")}return o(O,"set"),function(A,G){return A.append=p,A.delete=C,A.set=O,r(A,"_usp",{configurable:!0,writable:!0,value:G})}},"createSearchParamsPollute"),c=o(function(g){return function(p,C){return r(p,"_searchParams",{configurable:!0,writable:!0,value:g(C,p)}),C}},"createSearchParamsCreate"),u=o(function(g){var p=g.append;g.append=t.append,URLSearchParams.call(g,g._usp.search.slice(1)),g.append=p},"updateSearchParams"),d=o(function(g,p){if(!(g instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),h=o(function(g){var p=g.prototype,C=a(p,"searchParams"),O=a(p,"href"),A=a(p,"search"),G;!C&&A&&A.set&&(G=c(s(A)),i.defineProperties(p,{href:{get:function(){return O.get.call(this)},set:function(te){var x=this._searchParams;O.set.call(this,te),x&&u(x)}},search:{get:function(){return A.get.call(this)},set:function(te){var x=this._searchParams;A.set.call(this,te),x&&u(x)}},searchParams:{get:function(){return d(this,g),this._searchParams||G(this,new URLSearchParams(this.search.slice(1)))},set:function(te){d(this,g),G(this,te)}}}))},"upgradeClass");try{h(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&h(URL)}catch(g){}}(Object)})(Qt.URLSearchParams.prototype,Object);const Ht=Qt.URLSearchParams,mt=60,an=mt*60,tn=an*24,Sn=tn*7,yn=tn*30,Vn=tn*365;function Cn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",Cn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let i;return n<mt?(i=n,(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",i):l.l10n.t("{0} second ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",i):l.l10n.t("{0} seconds ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",i):l.l10n.t("{0} second",i):(e==null?void 0:e.short)?l.l10n.t("{0} secs",i):l.l10n.t("{0} seconds",i)):n<an?(i=Math.floor(n/mt),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",i):l.l10n.t("{0} minute ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",i):l.l10n.t("{0} minutes ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",i):l.l10n.t("{0} minute",i):(e==null?void 0:e.short)?l.l10n.t("{0} mins",i):l.l10n.t("{0} minutes",i)):n<tn?(i=Math.floor(n/an),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",i):l.l10n.t("{0} hour ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",i):l.l10n.t("{0} hours ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",i):l.l10n.t("{0} hour",i):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",i):l.l10n.t("{0} hours",i)):n<Sn?(i=Math.floor(n/tn),(e==null?void 0:e.ago)?i===1?l.l10n.t("{0} day ago",i):l.l10n.t("{0} days ago",i):i===1?l.l10n.t("{0} day",i):l.l10n.t("{0} days",i)):n<yn?(i=Math.floor(n/Sn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",i):l.l10n.t("{0} week ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",i):l.l10n.t("{0} weeks ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",i):l.l10n.t("{0} week",i):(e==null?void 0:e.short)?l.l10n.t("{0} wks",i):l.l10n.t("{0} weeks",i)):n<Vn?(i=Math.floor(n/yn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",i):l.l10n.t("{0} month ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",i):l.l10n.t("{0} months ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",i):l.l10n.t("{0} month",i):(e==null?void 0:e.short)?l.l10n.t("{0} mos",i):l.l10n.t("{0} months",i)):(i=Math.floor(n/Vn),(e==null?void 0:e.ago)?i===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",i):l.l10n.t("{0} year ago",i):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",i):l.l10n.t("{0} years ago",i):i===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",i):l.l10n.t("{0} year",i):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",i):l.l10n.t("{0} years",i))}o(Cn,"fromNow");var Un,zt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(zt||(zt={}));class It{constructor(){this[Un]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=zt.None){const i=this._map.get(e);if(!!i)return n!==zt.None&&this.touch(i,n),i.value}set(e,n,i=zt.None){let r=this._map.get(e);if(r)r.value=n,i!==zt.None&&this.touch(r,i);else{switch(r={key:e,value:n,next:void 0,previous:void 0},i){case zt.None:this.addItemLast(r);break;case zt.First:this.addItemFirst(r);break;case zt.Last:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const i=this._state;let r=this._head;for(;r;){if(n?e.bind(n)(r.value,r.key,this):e(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}values(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}entries(){const e=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}return{value:void 0,done:!0}}};return i}[(Un=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,i=this.size;for(;n&&i>e;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,i=e.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==zt.First&&n!==zt.Last)){if(n===zt.First){if(e===this._head)return;const i=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===zt.Last){if(e===this._tail)return;const i=e.next,r=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,i)=>{e.push([i,n])}),e}fromJSON(e){this.clear();for(const[n,i]of e)this.set(n,i)}}o(It,"LinkedMap");class $t extends It{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=zt.AsNew){return super.get(e,n)}peek(e){return super.get(e,zt.None)}set(e,n){return super.set(e,n,zt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o($t,"LRUCache");function on(t,e){return t.reduce((i,r)=>{const a=e(r),s=i.get(a);return s===void 0?i.set(a,[r]):s.push(r),i},new Map)}o(on,"groupBy");function Tn(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Tn,"isBinary");function jt(t,e,n=i=>i){return[...t.reduce((r,a)=>{const s=e(a),c=r.get(s);if(c===void 0)r.set(s,a);else{const u=n(c,a);u!==void 0&&r.set(s,u)}return r},new Map).values()]}o(jt,"uniqueBy");function sn(t,e){switch(t){case se.Branch:case se.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case se.Tag:return"$(tag)";case se.Commit:return"$(git-commit)"}}o(sn,"headTypeToCodicon");function wn(t){switch(t){case Je.Active:return"$(layers-active)";case Je.Match:return"$(layers-dot)";case Je.Indexed:return"$(layers)"}}o(wn,"indexTypeToCodicon");function In(t,e){switch(t){case se.Branch:case se.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case se.Tag:return new l.ThemeIcon("tag");case se.Commit:return new l.ThemeIcon("git-commit")}}o(In,"headTypeToThemeIcon");function*un(t,e){for(const n of t)yield*e(n)}o(un,"flatMap");function*Ln(t,e){for(const n of t)e(n)&&(yield n)}o(Ln,"filter");function*ei(t,e){for(const n of t){const i=e(n);i!=null&&(yield i)}}o(ei,"filterMap");function Bn(t,e){for(const n of t)if(e(n))return n}o(Bn,"find");function jn(t,e){let n="";const i=t[Symbol.iterator]();let r=i.next();if(r.done)return n;for(;;){const a=r.value.toString();if(r=i.next(),r.done){n+=a;break}n+=a,n+=e}return n}o(jn,"join");function*Mn(t,e){for(const n of t)yield e(n)}o(Mn,"map");function zn(t,e){for(const n of t)if(e(n))return!0;return!1}o(zn,"some");function*qt(...t){for(const e of t)for(const n of e)yield n}o(qt,"union");function*Ot(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(Ot,"unique");const ri="";function xi(...t){if(t.length===1){const e=t[0];return e===void 0?ri:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(xi,"defaultResolver");function Jn(t){return(e,n,i)=>{let r;if(typeof i.value=="function"?r=i.value:typeof i.get=="function"&&(r=i.get),r===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;i.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:xi)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>r.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(Jn,"serialize");let ai=0;function ti(){return ai===Number.MAX_SAFE_INTEGER&&(ai=0),String(++ai)}o(ti,"getNextLockId");class Oi{constructor(){this.id=ti()}async synchronize(e){let n;const i=this.promise;this.promise=new Promise(r=>n=r),await i;try{return await e()}finally{n()}}}o(Oi,"Lock");class Yn{constructor(e){this.lock=new Oi,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let i;const r=new lt(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:ge.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>i=s),this.readers.add(a)}),r.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{r.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),i()}}async synchronizeWrite(e,n){let i;const r=new lt(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:ge.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>i=a)}),r.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{r.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),i(),this.writer=void 0}}}o(Yn,"ReaderWriterLock");class qn{constructor(){this.locks=new Map}async synchronizeRead(e,n,i){let r=this.locks.get(e);return r===void 0&&(r=new Yn(String(e)),this.locks.set(e,r)),r.synchronizeRead(n,i)}async synchronizeWrite(e,n,i){let r=this.locks.get(e);return r===void 0&&(r=new Yn(String(e)),this.locks.set(e,r)),r.synchronizeWrite(n,i)}}o(qn,"KeyedReaderWriterLock");const Ai=o(class{constructor(t,e,n,i,r){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=i,this.context=r,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new Yn("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),W.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!W.changed(t,"experimental.syncRecentList"))return;const e=W.get("experimental.syncRecentList")===!0?[Ai.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=jt(t.map(n=>n.rootUri),n=>F(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((i,r)=>r.timestamp-i.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=F(t);e=e.filter(i=>F(i.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Ai.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${F(t.uri)}`,i=e.get(n);if(i===void 0)return;const r=this.changeStore.getScopedChangeStore(i),a=await r.getChanges(i.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await r.discardAll(i.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Ai.storageKey,this.toStorage(e))}catch(s){throw I.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:i,pullRequest:r},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${F(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:i.type,name:i.name},idx:(a==null?void 0:a.type)&&Je.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:r?{id:r.id}:void 0,changes:Ti(s),timestamp:Date.now()})}try{await this.storageService.store(Ai.storageKey,this.toStorage(e))}catch(n){throw I.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?l.Uri.from(i):i);return new Map(e.workspaceRepositories)}catch(e){return I.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Ai.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let Ri=Ai;Ri.storageKey="workspaceRepositories",Ri.storageSchemaVersion=1;function Ci(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(Ci,"hasChanges");function Li(t){return Ci(t.changes)}o(Li,"hasUncommittedChanges");function Ti(t){let e=0,n=0,i=0;for(const r of t)switch(r.type){case E.Created:e++;break;case E.Changed:n++;break;case E.Deleted:i++;break}return e||n||i?{added:e,changed:n,deleted:i,timestamp:Date.now()}:void 0}o(Ti,"toChangesSummary");function Qi(t,{compact:e=!0,preamble:n,separator:i=", ",short:r=!1,single:a=!1}={}){if(!Ci(t))return l.l10n.t("Everything up to date");const{added:s,changed:c,deleted:u}=t;if(a){const h=s+c+u;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let d=`${n!=null?n:""}`;return(s||!e)&&(d+=r?`+${s}`:s===1?l.l10n.t("{0} file added",s):l.l10n.t("{0} files added",s),(c||u||!e)&&(d+=i)),(c||!e)&&(d+=r?`~${c}`:c===1?l.l10n.t("{0} file changed",c):l.l10n.t("{0} files changed",c),(u||!e)&&(d+=i)),(u||!e)&&(d+=r?`-${u}`:u===1?l.l10n.t("{0} file deleted",u):l.l10n.t("{0} files deleted",u)),d}o(Qi,"formatChangesSummary");class Hn extends Error{constructor(e){var n;const i=typeof e=="string"?e:Ve.getProviderId(e);super(`No provider registered with ${i}`);this.id=i,(n=Error.captureStackTrace)==null||n.call(Error,this,Hn)}}o(Hn,"ProviderNotFoundError");class ki{constructor(e,n,i,r,a){this.providerService=e,this.uri=n,this.id=i,this.name=r,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(ki,"VirtualRepository");var fi;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(fi||(fi={}));var dn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(dn||(dn={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(dn||(dn={}));var Zi;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(Zi||(Zi={}));var oi;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(oi||(oi={}));var ci;(function(t){function e(n){const i=z.decodeAuthority(n).metadata;if(!(i===void 0||i.idx===void 0)){if(i.idx==="latest")return{type:1};if(U(i.idx))return{type:2,sha:i.idx}}}o(e,"decode"),t.decode=e})(ci||(ci={}));function ar(t){return t!==void 0&&typeof t.then=="function"}o(ar,"isPromise");const Ui="";function yi(...t){if(t.length===1){const e=t[0];return e===void 0?Ui:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(yi,"gate_defaultResolver");function Pn(t){return(e,n,i)=>{let r;if(typeof i.value=="function"?r=i.value:typeof i.get=="function"&&(r=i.get),r===void 0)throw new Error("Not supported");const a=`$gate$${n}`;i.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:yi)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=r.apply(this,s),d==null||!ar(d))return d;this[c]=u=d.then(h=>(this[c]=void 0,h)).catch(h=>{throw this[c]=void 0,h})}catch(h){throw this[c]=void 0,h}}return u}}}o(Pn,"gate");var kn=Object.defineProperty,V=Object.getOwnPropertyDescriptor,v=o((t,e,n,i)=>{for(var r=i>1?void 0:i?V(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&kn(e,n,r),r},"__decorateClass");class _{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),i=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(i,n)===n&&e()}async showProviderNotFoundMessage(e){const n=H.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const i=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},i)!==i)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(_,"Messages"),v([Pn(()=>"")],_.prototype,"showRepositoryNotValidMessage",1),v([Pn(()=>"")],_.prototype,"showGitHubStatus500Message",1),v([Pn(()=>"")],_.prototype,"showStatus401Message",1),v([Pn(()=>"")],_.prototype,"showStatus403Message",1),v([Pn()],_.prototype,"showProviderNotFoundMessage",1);const H=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),ye=new _;async function ct(t,e,n){var i,r,a,s,c;if(Di.instance.publicLog2("openWorkspace",{location:e.location}),e.location===Ne.AddToWorkspace){const d=(r=(i=l.workspace.workspaceFolders)==null?void 0:i.length)!=null?r:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===Ne.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const h={title:l.l10n.t("Continue")},g={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(Et?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(C=>C.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(C=>C.name).join(", ")),{modal:!0},h,g)!==h){Di.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===Ne.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=lo())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=lo())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),Di.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===Ne.NewWindow,forceLocalWindow:u})}o(ct,"openWorkspace");var et=Zn(724),K=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,he=o((t,e,n,i)=>{for(var r=i>1?void 0:i?ie(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&K(e,n,r),r},"providers_decorateClass");const Me=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(F(t.uri));!e||(I.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=F(t.uri);if(t.uri.scheme!==Me.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:i,name:r}=this.getVirtualUriMetadata(t.uri),a=new ki(this,t.uri,i,r,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=F(e.uri);if(e.uri.scheme!==Me.scheme||!this._repositories.has(n))continue;const i=this._repositories.get(n);this._repositories.delete(n),i&&(this._onDidChangeRepositories.fire({added:[],removed:[i]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}en(it.HasVirtualFolders,this._repositories.size!==0),en(it.VirtualFolderProviders,jn(Ot(Mn(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Mn(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,i,r,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:i,storage:r,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const h=l.Disposable.from(d.metadataStore.onDidChange(g=>this.onMetadataChanged(g)),d.changeStore.onDidChange(g=>this._onDidChangeChangeStore.fire(g)),d.workspaceRepositories.onDidChange(async()=>{const g=await this.workspaceRepositoriesGetRepositories();en(it.HasRecentRepositories,g.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const g=[];for(const[p,C]of[...this._repositories])(C==null?void 0:C.provider.id)===t&&(this._repositories.delete(p),g.push(C));this._onDidChangeRepositories.fire({added:[],removed:g}),this._onDidChangeProviders.fire({added:[],removed:[d]}),h.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Mn(this.getRepositories(n.id),r=>r.uri));const i=this._indexProviders.get(n.id);i!==void 0&&e.push(i)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const i=l.workspace.getWorkspaceFolder(t);if(!i||i.uri.scheme!==Me.scheme)return;const r=(n=this._repositories.get(F(i.uri)))!=null?n:this.addRepository(i);if(!(e!==void 0&&(r==null?void 0:r.provider.id)!==e))return r!=null?r:void 0}getRepositories(t){return Ln(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:Me.getProviderId(t),i=this._providers.get(n);return e!==void 0&&(i==null?void 0:i.id)!==e?!1:i!==void 0}getProvider(t){const e=typeof t=="string"?t:Me.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Hn(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Hn(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Hn(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Hn(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Hn(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Hn(t)}async getRecentRemoteSourceProviders(){return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),getRemoteSources:async()=>{const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return Promise.all(t.sort((e,n)=>n.timestamp-e.timestamp).map(async e=>({providerId:e.provider.id,name:e.name,icon:"repo",description:Cn(e.timestamp,{ago:!0}),detail:`${e.provider.name}${e.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${e.pullRequest.id}`:""}${z.isCanonicalUri(e.uri)?"":`\xA0\xA0\u2022\xA0\xA0${sn(e.ref.type)} ${e.ref.name}`}\xA0\xA0\u2022\xA0\xA0${Qi(e.changes)}${e.idx?`\xA0\xA0\u2022\xA0\xA0${wn(e.idx.type)}`:""}`,url:(await this.getBestRemoteUri(e.uri)).toString()})))}}}getRemoteSourceProviders(t){const e=o(n=>n.provider.getRemoteSourceProviders().map(r=>{var a;return{...r,getRecentRemoteSources:(a=r.getRecentRemoteSources)!=null?a:async()=>{var s;const c=(s=await n.workspaceRepositories.getRemoteWorkspaceSourceProvider(n.id))!=null?s:[];return Promise.all(c.map(async u=>({providerId:u.provider.id,name:u.name,icon:"repo",timestamp:u.timestamp,description:Cn(u.timestamp,{ago:!0}),detail:`${u.provider.name}${u.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${u.pullRequest.id}`:""}${z.isCanonicalUri(u.uri)?"":`\xA0\xA0\u2022\xA0\xA0${sn(u.ref.type)} ${u.ref.name}`}\xA0\xA0\u2022\xA0\xA0${Qi(u.changes)}${u.idx?`\xA0\xA0\u2022\xA0\xA0${wn(u.idx.type)}`:""}`,url:(await this.getBestRemoteUri(u.uri)).toString()})))}}}),"createRemoteSourceProviders");if(t){const n=this.getProvider(t);return n?e(n):[]}return[...un(this._providers.values(),n=>{var i;return(i=e(n))!=null?i:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const i of(t=l.workspace.workspaceFolders)!=null?t:[])if(i.uri.scheme===z.scheme&&await this.getChangeStore(i.uri).hasChanges(i.uri)){const r=(e=this.getRepository(i.uri))==null?void 0:e.provider;if(!r)continue;n.set(r.id,r)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Hn(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),i=n==null?void 0:n.provider.canOpenRemoteUrl(t);return i!==void 0?{provider:n,urlType:i}:void 0}for(const n of this._providers.values()){const i=n.provider.canOpenRemoteUrl(t);if(i!==void 0)return{provider:n,urlType:i}}}async createWorkspaceForRemoteUrl(t,e,n=Ne.CurrentWindow){var i;const r=this.canOpenRemoteUrl(t,e);return(i=r==null?void 0:r.provider)==null?void 0:i.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return ct(this,t,e)}createProviderUri(t,e,n){return z.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(Me.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return z.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let i=`${n.path}/`;i.endsWith("/")&&(i=i.slice(0,-1));const r=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===Me.scheme?z.getVirtualUri(r):r}createRelativeVirtualUri(t,e){return z.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(Me.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e){const{provider:n,repo:i,ref:r}=this.getVirtualUriMetadata(t);if(e===fi.Repository)return this.getRemoteUri(n.id,{repo:i});if(e===fi.PullRequest||e===void 0&&(r==null?void 0:r.type)===He.PullRequest){if((r==null?void 0:r.type)===He.PullRequest)return this.getRemoteUri(n.id,{repo:i,pullRequest:{id:r.id}});const{pullRequest:a}=await this.getMetadata(t);if(e===fi.PullRequest&&a)return this.getRemoteUri(n.id,{repo:i,pullRequest:{id:a.id}})}if(e===fi.Branch||e===void 0&&(r==null?void 0:r.type)===He.Branch){if((r==null?void 0:r.type)===He.Branch)return this.getRemoteUri(n.id,{repo:i,branch:r.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===se.Branch||a.type===se.RemoteBranch&&e===fi.Branch)return this.getRemoteUri(n.id,{repo:i,branch:a.branch.name})}if(e===fi.Tag||e===void 0&&(r==null?void 0:r.type)===He.Tag){if((r==null?void 0:r.type)===He.Tag)return this.getRemoteUri(n.id,{repo:i,tag:r.id});const{HEAD:a}=await this.getMetadata(t);if(a.type===se.Tag)return this.getRemoteUri(n.id,{repo:i,tag:a.detached.name})}if(e===fi.Commit||e===void 0&&((r==null?void 0:r.type)===He.Commit||(r==null?void 0:r.type)===He.Tree&&U(r.id))){if((r==null?void 0:r.type)===He.Commit||(r==null?void 0:r.type)===He.Tree&&U(r.id))return this.getRemoteUri(n.id,{repo:i,sha:r.id});const{HEAD:a}=await this.getMetadata(t);if(e===fi.Commit||a.type===se.Commit)return this.getRemoteUri(n.id,{repo:i,sha:a.sha})}if(e===void 0&&(r==null?void 0:r.type)===He.Tree&&!U(r.id))return this.getRemoteUri(n.id,{repo:i,branch:r.id});if(e===void 0)return this.getRemoteUri(n.id,{repo:i})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(Me.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){var n,i;return(i=(n=this.getRepositoryProvider(t)).getRemoteUri)==null?void 0:i.call(n,e)}getProviderRootUri(t){return t=z.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=z.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=z.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const i=n.indexOf(Me.authoritySeparator);return i!==-1&&(n=n.substr(0,i)),e.with({authority:n})}getVirtualRootUri(t){return z.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(z.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var i,r;const a=this.getChangeStore(t);return(r=(i=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:r.call(i,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let i;return(e==null?void 0:e.staged)?(i=await n.getStagedChanges(t),i.length===0&&e.staged==="auto"&&(i=await n.getChanges(t))):i=await n.getChanges(t),i.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case E.Created:case E.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await ht(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case E.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return W.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=F(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:i,cachedMetadata:r}=await this.getMetadataStore(t).get(t);if(r!==void 0)return r;await this.getChangeStore(t).hasChanges(t)||(i=void 0);const a=this.getProvider(t);if(!a)throw new Hn(t);const s=ci.decode(t);(s==null?void 0:s.type)===oi.SHA&&(i=s.sha);try{n=a.provider.createMetadata(t,i),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw qe.asVirtualProviderErrorCode(c)===Ae.InvalidRepositoryError&&ye.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new lt(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(z.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(z.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t){var e;const{HEAD:n}=await this.getMetadata(t.uri);if(((e=n.branch)==null?void 0:e.remote)!==void 0){const r=this.getRemoteUri(t.provider.id,{repo:n.branch.remote.repo});return{uri:r==null?void 0:r.toString(!0),ref:n.branch.name,name:n.branch.remote.name}}const i=this.getRemoteUri(t.provider.id,{repo:t.id});return{uri:i==null?void 0:i.toString(!0),ref:n.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");if(Et){let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;return n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),l.Uri.parse(r)}const i=o(async r=>{try{await r.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(a){I.error(a,"Unable to clone repository");const s=l.l10n.t("Could not clone your repository as Git is not installed."),c=l.l10n.t("Download Git");await l.window.showErrorMessage(s,{modal:!0},c)===c&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const r=l.extensions.getExtension("vscode.git");if(r)await i(r);else throw new Error("Git extension not found")}else{const r=l.extensions.onDidChange(async()=>{const s=l.extensions.getExtension("vscode.git");s&&(await i(s),r.dispose())});await l.workspace.requestWorkspaceTrust()||r.dispose()}}createBranch(t,e,n,i){return this.getRepositoryProvider(t).createBranch(t,e,n,i)}createAndPushCommit(t,e,n,i,r,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,i,r,a)}createPullRequest(t,e,n,i,r,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,i,r,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,i;return(i=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?i:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,i;return(i=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?i:Promise.resolve([])}async getTarGz(t,e,n){var i,r;return(r=(i=this.getRepositoryProvider(t)).getTarGz)==null?void 0:r.call(i,t,e,n)}async loadWorkspaceContents(t){return await Si(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(F(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const i=this.getProvider(t),r=this.getIndexProvider(t);if(i===void 0)throw new Hn(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&r&&(a=await r.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw qe.UnresolvedConflictsError();return await i.provider.sync(t,u,{conflictResolution:Ue.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,i){return this.getChangeStore(t).resolveDiffCommand(t,e,n,i)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,i){return this.getChangeStore(t).writeFile(t,e,n,i)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return on(t.sort((e,n)=>n.timestamp-e.timestamp),e=>F(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(i=>i.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,i){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,i)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(Me.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(Me.authoritySeparator)===-1}},"_VirtualProviderService");let Ve=Me;Ve.scheme="vscode-vfs",Ve.authoritySeparator="+",Ve.baseVirtualWorkspaceUri=l.Uri.parse(`${Me.scheme}://`),he([Jn()],Ve.prototype,"getMetadataCore",1);function dt(t,e,n){let i=!1;async function r(){var s;if(await Si(t,void 0),!i){const u=t.getRemoteSourceProviders(),d=await((s=l.extensions.getExtension("vscode.git-base"))==null?void 0:s.activate()),h=d==null?void 0:d.getAPI(1);if(!h)return;u.map(g=>h.registerRemoteSourceProvider(g)),i=!0}const c=await l.commands.executeCommand("git-base.api.getRemoteSources",{title:l.l10n.t("Open Remote Repository"),placeholder:l.l10n.t("Enter a remote url, or select a remote provider"),showRecentSources:!0,providerLabel:u=>{var d;return(d=u.label)!=null?d:l.l10n.t("Open Repository from {0}",u.name)},urlLabel:u=>{const d=t.canOpenRemoteUrl(u);if(d){const{provider:h,urlType:g}=d;switch(g){case re.Branch:return l.l10n.t("Open Branch from {0} Repository",h.name);case re.Tag:return l.l10n.t("Open Tag from {0} Repository",h.name);case re.Commit:return l.l10n.t("Open Commit from {0} Repository",h.name);case re.File:return l.l10n.t("Open File from {0} Repository",h.name);case re.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",h.name);default:return l.l10n.t("Open {0} Repository",h.name)}}return l.l10n.t("Enter a Remote Url")}});if(!c){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{const d=l.workspace.getConfiguration("window").get("openFoldersInNewWindow")==="on"?Ne.NewWindow:Ne.CurrentWindow,h=await t.createWorkspaceForRemoteUrl(c,void 0,d);if(!h){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});const g=l.l10n.t("Install");await l.window.showInformationMessage(l.l10n.t("Extension 'GitHub Repositories' is not installed or enabled. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},g)===g&&(await l.commands.executeCommand("workbench.extensions.installExtension","github.remotehub"),await l.commands.executeCommand("workbench.action.reloadWindow"))}if(!h)return;await ct(t,h)}catch(u){if(n.sendException(u),qe.asVirtualProviderErrorCode(u)===Ae.InvalidCredentialsError){const{action:d}=u;if(d){ye.showStatus401Message(()=>d());return}}I.error(u)}}o(r,"openRepository");async function a(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(h=>({label:h.name,description:h.provider.name,repository:h})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}return o(a,"getRepository"),[l.commands.registerCommand("remoteHub.openRepository",()=>(n.publicLog2("command.openRepository"),r())),l.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(n.publicLog2("command.continueOn.openRepository"),r())),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!Et)return;const s=await a(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await a(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Et)return;const s=await a(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${u}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(Et)return;const s=await a(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(d)}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async()=>{const s=await a(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri,fi.Commit);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});await l.env.clipboard.writeText(d.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await a(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=si();if(!c)return;const u=t.getRemoteUri(s.provider.id,{repo:s.id,path:t.getRelativeFilePath(c.uri),sha:(await t.getMetadata(s.uri)).HEAD.sha});if(u===void 0)return;const d=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",h=c.type===Jt.File?`${Wt(c.range)}`:`${ui(c.cellIndex,c.range)}`,g=u.with({authority:`${d}/${u.authority}`,fragment:h});await l.env.clipboard.writeText(g.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await a(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.enableDebugLogging",()=>W.updateEffective("logLevel",ge.Debug)),l.commands.registerCommand("remoteHub.disableDebugLogging",()=>W.updateEffective("logLevel",ge.Warn)),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await en(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Et?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(dt,"registerCommands");function Tt(t){return t}o(Tt,"command");async function kt(t,e){return l.commands.executeCommand(t,e)}o(kt,"executeCommand");var Jt;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(Jt||(Jt={}));function si(){var t,e;let n,i;if(l.window.activeTextEditor){if(n=l.window.activeTextEditor.document.uri,n.scheme==="vscode-notebook-cell"&&((t=l.window.activeNotebookEditor)==null?void 0:t.notebook.uri.fsPath)===n.fsPath){const r=l.window.activeNotebookEditor.notebook.getCells().find(c=>c.document.uri.fragment===(n==null?void 0:n.fragment)),a=(e=r==null?void 0:r.index)!=null?e:l.window.activeNotebookEditor.selection.start,s=r!==void 0?l.window.activeTextEditor.selection:void 0;return{type:2,uri:n,cellIndex:a,range:s}}return i=l.window.activeTextEditor.selection,{type:1,uri:n,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(si,"getFileAndPosition");function Wt(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}o(Wt,"rangeString");function ui(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}o(ui,"notebookCellRangeString");function ni(t,e,n){return new Wi(new Er(t),new Er(e)).ComputeDiff(n).changes}o(ni,"stringDiff");class Fn{constructor(e,n,i,r){this.originalStart=e,this.originalLength=n,this.modifiedStart=i,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Fn,"DiffChange");var Mi;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Mi||(Mi={}));function hr(t,e){return(e<<5)-e+t|0}o(hr,"numberHash");function ea(t,e){e=hr(149417,e);for(let n=0,i=t.length;n<i;n++)e=hr(t.charCodeAt(n),e);return e}o(ea,"stringHash");class Er{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}}o(Er,"StringDiffSequence");class Bi{static Assert(e,n){if(!e)throw new Error(n)}}o(Bi,"Debug");class Hi{static Copy(e,n,i,r,a){for(let s=0;s<a;s++)i[r+s]=e[n+s]}static Copy2(e,n,i,r,a){for(let s=0;s<a;s++)i[r+s]=e[n+s]}}o(Hi,"MyArray");var ta;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(ta||(ta={}));class fr{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Fn(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(fr,"DiffChangeHelper");class Wi{constructor(e,n,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=n;const[r,a,s]=Wi._getElements(e),[c,u,d]=Wi._getElements(n);this._hasStrings=s&&d,this._originalStringElements=r,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Wi._isStringArray(n)){const i=new Int32Array(n.length);for(let r=0,a=n.length;r<a;r++)i[r]=ea(n[r],0);return[n,i,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const i=Wi._getStrictElement(this._originalSequence,e),r=Wi._getStrictElement(this._modifiedSequence,n);return i===r}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,i,r,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,i,r,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,i,r,a){for(a[0]=!1;e<=n&&i<=r&&this.ElementsAreEqual(e,i);)e++,i++;for(;n>=e&&r>=i&&this.ElementsAreEqual(n,r);)n--,r--;if(e>n||i>r){let g;return i<=r?(Bi.Assert(e===n+1,"originalStart should only be one more than originalEnd"),g=[new Fn(e,0,i,r-i+1)]):e<=n?(Bi.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),g=[new Fn(e,n-e+1,i,0)]):(Bi.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Bi.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),g=[]),g}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,i,r,s,c,a),d=s[0],h=c[0];if(u!==null)return u;if(!a[0]){const g=this.ComputeDiffRecursive(e,d,i,h,a);let p=[];return a[0]?p=[new Fn(d+1,n-(d+1)+1,h+1,r-(h+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,h+1,r,a),this.ConcatenateChanges(g,p)}return[new Fn(e,n-e+1,i,r-i+1)]}WALKTRACE(e,n,i,r,a,s,c,u,d,h,g,p,C,O,A,G,te,x){let ce=null,be=null,De=new fr,je=n,wt=i,Ze=C[0]-G[0]-r,xt=-1073741824,Zt=this.m_forwardHistory.length-1;do{const Bt=Ze+e;Bt===je||Bt<wt&&d[Bt-1]<d[Bt+1]?(g=d[Bt+1],O=g-Ze-r,g<xt&&De.MarkNextChange(),xt=g,De.AddModifiedElement(g+1,O),Ze=Bt+1-e):(g=d[Bt-1]+1,O=g-Ze-r,g<xt&&De.MarkNextChange(),xt=g-1,De.AddOriginalElement(g,O+1),Ze=Bt-1-e),Zt>=0&&(d=this.m_forwardHistory[Zt],e=d[0],je=1,wt=d.length-1)}while(--Zt>=-1);if(ce=De.getReverseChanges(),x[0]){let Bt=C[0]+1,Mt=G[0]+1;if(ce!==null&&ce.length>0){const Xt=ce[ce.length-1];Bt=Math.max(Bt,Xt.getOriginalEnd()),Mt=Math.max(Mt,Xt.getModifiedEnd())}be=[new Fn(Bt,p-Bt+1,Mt,A-Mt+1)]}else{De=new fr,je=s,wt=c,Ze=C[0]-G[0]-u,xt=1073741824,Zt=te?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Bt=Ze+a;Bt===je||Bt<wt&&h[Bt-1]>=h[Bt+1]?(g=h[Bt+1]-1,O=g-Ze-u,g>xt&&De.MarkNextChange(),xt=g+1,De.AddOriginalElement(g+1,O+1),Ze=Bt+1-a):(g=h[Bt-1],O=g-Ze-u,g>xt&&De.MarkNextChange(),xt=g,De.AddModifiedElement(g+1,O+1),Ze=Bt-1-a),Zt>=0&&(h=this.m_reverseHistory[Zt],a=h[0],je=1,wt=h.length-1)}while(--Zt>=-1);be=De.getChanges()}return this.ConcatenateChanges(ce,be)}ComputeRecursionPoint(e,n,i,r,a,s,c){let u=0,d=0,h=0,g=0,p=0,C=0;e--,i--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const O=n-e+(r-i),A=O+1,G=new Int32Array(A),te=new Int32Array(A),x=r-i,ce=n-e,be=e-i,De=n-r,wt=(ce-x)%2==0;G[x]=e,te[ce]=n,c[0]=!1;for(let Ze=1;Ze<=O/2+1;Ze++){let xt=0,Zt=0;h=this.ClipDiagonalBound(x-Ze,Ze,x,A),g=this.ClipDiagonalBound(x+Ze,Ze,x,A);for(let Mt=h;Mt<=g;Mt+=2){Mt===h||Mt<g&&G[Mt-1]<G[Mt+1]?u=G[Mt+1]:u=G[Mt-1]+1,d=u-(Mt-x)-be;const Xt=u;for(;u<n&&d<r&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(G[Mt]=u,u+d>xt+Zt&&(xt=u,Zt=d),!wt&&Math.abs(Mt-ce)<=Ze-1&&u>=te[Mt])return a[0]=u,s[0]=d,Xt<=te[Mt]&&1447>0&&Ze<=1447+1?this.WALKTRACE(x,h,g,be,ce,p,C,De,G,te,u,n,a,d,r,s,wt,c):null}const Bt=(xt-e+(Zt-i)-Ze)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(xt,Bt))return c[0]=!0,a[0]=xt,s[0]=Zt,Bt>0&&1447>0&&Ze<=1447+1?this.WALKTRACE(x,h,g,be,ce,p,C,De,G,te,u,n,a,d,r,s,wt,c):(e++,i++,[new Fn(e,n-e+1,i,r-i+1)]);p=this.ClipDiagonalBound(ce-Ze,Ze,ce,A),C=this.ClipDiagonalBound(ce+Ze,Ze,ce,A);for(let Mt=p;Mt<=C;Mt+=2){Mt===p||Mt<C&&te[Mt-1]>=te[Mt+1]?u=te[Mt+1]-1:u=te[Mt-1],d=u-(Mt-ce)-De;const Xt=u;for(;u>e&&d>i&&this.ElementsAreEqual(u,d);)u--,d--;if(te[Mt]=u,wt&&Math.abs(Mt-x)<=Ze&&u<=G[Mt])return a[0]=u,s[0]=d,Xt>=G[Mt]&&1447>0&&Ze<=1447+1?this.WALKTRACE(x,h,g,be,ce,p,C,De,G,te,u,n,a,d,r,s,wt,c):null}if(Ze<=1447){let Mt=new Int32Array(g-h+2);Mt[0]=x-h+1,Hi.Copy2(G,h,Mt,1,g-h+1),this.m_forwardHistory.push(Mt),Mt=new Int32Array(C-p+2),Mt[0]=ce-p+1,Hi.Copy2(te,p,Mt,1,C-p+1),this.m_reverseHistory.push(Mt)}}return this.WALKTRACE(x,h,g,be,ce,p,C,De,G,te,u,n,a,d,r,s,wt,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const i=e[n],r=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=i.originalLength>0,c=i.modifiedLength>0;for(;i.originalStart+i.originalLength<r&&i.modifiedStart+i.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!c||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const d=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!d)break;i.originalStart++,i.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const i=e[n];let r=0,a=0;if(n>0){const g=e[n-1];r=g.originalStart+g.originalLength,a=g.modifiedStart+g.modifiedLength}const s=i.originalLength>0,c=i.modifiedLength>0;let u=0,d=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let g=1;;g++){const p=i.originalStart-g,C=i.modifiedStart-g;if(p<r||C<a||s&&!this.OriginalElementsAreEqual(p,p+i.originalLength)||c&&!this.ModifiedElementsAreEqual(C,C+i.modifiedLength))break;const A=(p===r&&C===a?5:0)+this._boundaryScore(p,i.originalLength,C,i.modifiedLength);A>d&&(d=A,u=g)}i.originalStart-=u,i.modifiedStart-=u;const h=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],h)){e[n-1]=h[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,i=e.length;n<i;n++){const r=e[n-1],a=e[n],s=a.originalStart-r.originalStart-r.originalLength,c=r.originalStart,u=a.originalStart+a.originalLength,d=u-c,h=r.modifiedStart,g=a.modifiedStart+a.modifiedLength,p=g-h;if(s<5&&d<20&&p<20){const C=this._findBetterContiguousSequence(c,d,h,p,s);if(C){const[O,A]=C;(O!==r.originalStart+r.originalLength||A!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=O-r.originalStart,r.modifiedLength=A-r.modifiedStart,a.originalStart=O+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=g-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,i,r,a){if(n<a||r<a)return null;const s=e+n-a+1,c=i+r-a+1;let u=0,d=0,h=0;for(let g=e;g<s;g++)for(let p=i;p<c;p++){const C=this._contiguousSequenceScore(g,p,a);C>0&&C>u&&(u=C,d=g,h=p)}return u>0?[d,h]:null}_contiguousSequenceScore(e,n,i){let r=0;for(let a=0;a<i;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;r+=this._originalStringElements[e+a].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const i=e+n;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const i=e+n;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,n,i,r){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(i,r)?1:0;return a+s}ConcatenateChanges(e,n){let i=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],i)){const r=new Array(e.length+n.length-1);return Hi.Copy(e,0,r,0,e.length-1),r[e.length-1]=i[0],Hi.Copy(n,1,r,e.length,n.length-1),r}else{const r=new Array(e.length+n.length);return Hi.Copy(e,0,r,0,e.length),Hi.Copy(n,0,r,e.length,n.length),r}}ChangesOverlap(e,n,i){if(Bi.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Bi.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const r=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),i[0]=new Fn(r,a,s,c),!0}else return i[0]=null,!1}ClipDiagonalBound(e,n,i,r){if(e>=0&&e<r)return e;const a=i,s=r-i-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?r-1:r-2}}}o(Wi,"LcsDiff");var gr;(function(t){function e(i,r){return i instanceof Ki?r:new l.Position(r.line,r.character)}o(e,"makePosition"),t.makePosition=e;function n(i,r){return i instanceof Ki?r:new l.Range(r.start.line,r.start.character,r.end.line,r.end.character)}o(n,"makeRange"),t.makeRange=n})(gr||(gr={}));var Nr;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Nr||(Nr={}));const Or=o(class{constructor(t,e,n,i){this.diffCache=new $t(32),this.indexDocumentCache=new $t(32),this.codeDocumentCache=new $t(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=i,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const r=await this.getIndexDocument(e);return r===void 0?!0:this.getDiff(1,r,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const r=(await this.changes).get(n.toString());if(r===E.Created||r===E.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),h=this.getWordAtOffset(a.lineAt(d.line).text,d.character),g=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(h===void 0||g===void 0||h!==g))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const r=(await this.changes).get(n.toString());if(r===E.Created||r===E.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const h=a.offsetAt(e.end);let g=h;for(const G of c){if(g<G.originalStart)break;const te=G.modifiedLength-G.originalLength;if(G.originalStart<=u){if(u<G.originalStart+G.originalLength)return;d+=te}else if(h<G.originalStart+G.originalLength)return;if(G.originalStart<=h){if(h<G.originalStart+G.originalLength)return;g+=te}}const p=s.positionAt(d),C=s.positionAt(g),O=a.getText(e),A=s.getText(gr.makeRange(s,{start:p,end:C}));if(O===A)return new l.Range(p.line,p.character,C.line,C.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let i=t.get(e.toString());if(i!==null)return i!==void 0||(i=this._getDocument(e,n),t.set(e.toString(),i),i.then(r=>{r===void 0&&t.set(e.toString(),null)},void 0)),i}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(i=>new Ki(t,Number.MAX_VALUE,Or.textDecoder.decode(i)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const i=`${t}${e.uri.toString()}`;let r=this.diffCache.get(i);return r!==void 0&&r.original===e.version&&r.modified===n.version||(r={original:e.version,modified:n.version,changes:ni(e.getText(),n.getText(),!0)},this.diffCache.set(i,r)),r.changes}getWordAtOffset(t,e){let n="findStart",i=0,r=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":i=a+1;break;case"findEnd":r=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(i,r):void 0}},"_DiffMapper");let vr=Or;vr.textDecoder=new TextDecoder("utf8");var Ur;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(Ur||(Ur={}));class Ki{static computeLineOffsets(e,n,i=0){const r=n?[i]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,r.push(i+a+1))}return r}constructor(e,n,i){this._content=i,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Ki.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const i=n[e],r=n[e+1];if(r===void 0)return{lineNumber:e,text:this._content.substring(i)};const a=this._content.substring(i,r);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let i=0,r=n.length;if(r===0)return{line:0,character:e};for(;i<r;){const s=Math.floor((i+r)/2);n[s]>e?r=s:i=s+1}const a=i-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)}get lineCount(){return this.getLineOffsets().length}}o(Ki,"TextDocument");var na;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(na||(na={}));var or;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(or||(or={}));var Gn;(function(t){function e(i,r){return i===Number.MAX_VALUE&&(i=or.MAX_VALUE),r===Number.MAX_VALUE&&(r=or.MAX_VALUE),{line:i,character:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.objectLiteral(r)&&Ee.uinteger(r.line)&&Ee.uinteger(r.character)}o(n,"is"),t.is=n})(Gn||(Gn={}));var gi;(function(t){function e(i,r,a,s){if(Ee.uinteger(i)&&Ee.uinteger(r)&&Ee.uinteger(a)&&Ee.uinteger(s))return{start:Gn.create(i,r),end:Gn.create(a,s)};if(Gn.is(i)&&Gn.is(r))return{start:i,end:r};throw new Error("Range#create called with invalid arguments["+i+", "+r+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.objectLiteral(r)&&Gn.is(r.start)&&Gn.is(r.end)}o(n,"is"),t.is=n})(gi||(gi={}));var Jr;(function(t){function e(i,r){return{uri:i,range:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&gi.is(r.range)&&(Ee.string(r.uri)||Ee.undefined(r.uri))}o(n,"is"),t.is=n})(Jr||(Jr={}));var pr;(function(t){function e(i,r,a,s){return{targetUri:i,targetRange:r,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&gi.is(r.targetRange)&&Ee.string(r.targetUri)&&(gi.is(r.targetSelectionRange)||Ee.undefined(r.targetSelectionRange))&&(gi.is(r.originSelectionRange)||Ee.undefined(r.originSelectionRange))}o(n,"is"),t.is=n})(pr||(pr={}));var xn;(function(t){function e(i,r,a,s){return{red:i,green:r,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.numberRange(r.red,0,1)&&Ee.numberRange(r.green,0,1)&&Ee.numberRange(r.blue,0,1)&&Ee.numberRange(r.alpha,0,1)}o(n,"is"),t.is=n})(xn||(xn={}));var Dr;(function(t){function e(i,r){return{range:i,color:r}}o(e,"create"),t.create=e;function n(i){var r=i;return gi.is(r.range)&&xn.is(r.color)}o(n,"is"),t.is=n})(Dr||(Dr={}));var va;(function(t){function e(i,r,a){return{label:i,textEdit:r,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.string(r.label)&&(Ee.undefined(r.textEdit)||Ji.is(r))&&(Ee.undefined(r.additionalTextEdits)||Ee.typedArray(r.additionalTextEdits,Ji.is))}o(n,"is"),t.is=n})(va||(va={}));var Br;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Br||(Br={}));var Vr;(function(t){function e(i,r,a,s,c){var u={startLine:i,endLine:r};return Ee.defined(a)&&(u.startCharacter=a),Ee.defined(s)&&(u.endCharacter=s),Ee.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.uinteger(r.startLine)&&Ee.uinteger(r.startLine)&&(Ee.undefined(r.startCharacter)||Ee.uinteger(r.startCharacter))&&(Ee.undefined(r.endCharacter)||Ee.uinteger(r.endCharacter))&&(Ee.undefined(r.kind)||Ee.string(r.kind))}o(n,"is"),t.is=n})(Vr||(Vr={}));var sr;(function(t){function e(i,r){return{location:i,message:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Jr.is(r.location)&&Ee.string(r.message)}o(n,"is"),t.is=n})(sr||(sr={}));var Ar;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Ar||(Ar={}));var mr;(function(t){t.Unnecessary=1,t.Deprecated=2})(mr||(mr={}));var ia;(function(t){function e(n){var i=n;return i!=null&&Ee.string(i.href)}o(e,"is"),t.is=e})(ia||(ia={}));var Hr;(function(t){function e(i,r,a,s,c,u){var d={range:i,message:r};return Ee.defined(a)&&(d.severity=a),Ee.defined(s)&&(d.code=s),Ee.defined(c)&&(d.source=c),Ee.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(i){var r,a=i;return Ee.defined(a)&&gi.is(a.range)&&Ee.string(a.message)&&(Ee.number(a.severity)||Ee.undefined(a.severity))&&(Ee.integer(a.code)||Ee.string(a.code)||Ee.undefined(a.code))&&(Ee.undefined(a.codeDescription)||Ee.string((r=a.codeDescription)===null||r===void 0?void 0:r.href))&&(Ee.string(a.source)||Ee.undefined(a.source))&&(Ee.undefined(a.relatedInformation)||Ee.typedArray(a.relatedInformation,sr.is))}o(n,"is"),t.is=n})(Hr||(Hr={}));var Rr;(function(t){function e(i,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:i,command:r};return Ee.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.string(r.title)&&Ee.string(r.command)}o(n,"is"),t.is=n})(Rr||(Rr={}));var Ji;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function i(a){return{range:a,newText:""}}o(i,"del"),t.del=i;function r(a){var s=a;return Ee.objectLiteral(s)&&Ee.string(s.newText)&&gi.is(s.range)}o(r,"is"),t.is=r})(Ji||(Ji={}));var Tr;(function(t){function e(i,r,a){var s={label:i};return r!==void 0&&(s.needsConfirmation=r),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r!==void 0&&Ee.objectLiteral(r)&&Ee.string(r.label)&&(Ee.boolean(r.needsConfirmation)||r.needsConfirmation===void 0)&&(Ee.string(r.description)||r.description===void 0)}o(n,"is"),t.is=n})(Tr||(Tr={}));var bi;(function(t){function e(n){var i=n;return typeof i=="string"}o(e,"is"),t.is=e})(bi||(bi={}));var vi;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function i(a,s){return{range:a,newText:"",annotationId:s}}o(i,"del"),t.del=i;function r(a){var s=a;return Ji.is(s)&&(Tr.is(s.annotationId)||bi.is(s.annotationId))}o(r,"is"),t.is=r})(vi||(vi={}));var Mr;(function(t){function e(i,r){return{textDocument:i,edits:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&ra.is(r.textDocument)&&Array.isArray(r.edits)}o(n,"is"),t.is=n})(Mr||(Mr={}));var lr;(function(t){function e(i,r,a){var s={kind:"create",uri:i};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="create"&&Ee.string(r.uri)&&(r.options===void 0||(r.options.overwrite===void 0||Ee.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||Ee.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||bi.is(r.annotationId))}o(n,"is"),t.is=n})(lr||(lr={}));var cr;(function(t){function e(i,r,a,s){var c={kind:"rename",oldUri:i,newUri:r};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="rename"&&Ee.string(r.oldUri)&&Ee.string(r.newUri)&&(r.options===void 0||(r.options.overwrite===void 0||Ee.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||Ee.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||bi.is(r.annotationId))}o(n,"is"),t.is=n})(cr||(cr={}));var Wr;(function(t){function e(i,r,a){var s={kind:"delete",uri:i};return r!==void 0&&(r.recursive!==void 0||r.ignoreIfNotExists!==void 0)&&(s.options=r),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&r.kind==="delete"&&Ee.string(r.uri)&&(r.options===void 0||(r.options.recursive===void 0||Ee.boolean(r.options.recursive))&&(r.options.ignoreIfNotExists===void 0||Ee.boolean(r.options.ignoreIfNotExists)))&&(r.annotationId===void 0||bi.is(r.annotationId))}o(n,"is"),t.is=n})(Wr||(Wr={}));var Pr;(function(t){function e(n){var i=n;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(r){return Ee.string(r.kind)?lr.is(r)||cr.is(r)||Wr.is(r):Mr.is(r)}))}o(e,"is"),t.is=e})(Pr||(Pr={}));var Kr=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,i){var r,a;if(i===void 0?r=Ji.insert(e,n):bi.is(i)?(a=i,r=vi.insert(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=vi.insert(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.replace=function(e,n,i){var r,a;if(i===void 0?r=Ji.replace(e,n):bi.is(i)?(a=i,r=vi.replace(e,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(i),r=vi.replace(e,n,a)),this.edits.push(r),a!==void 0)return a},t.prototype.delete=function(e,n){var i,r;if(n===void 0?i=Ji.del(e):bi.is(n)?(r=n,i=vi.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=vi.del(e,r)),this.edits.push(i),r!==void 0)return r},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),pa=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var i;if(bi.is(e)?i=e:(i=this.nextId(),n=e),this._annotations[i]!==void 0)throw new Error("Id "+i+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+i);return this._annotations[i]=n,this._size++,i},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),go=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new pa(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(i){if(Mr.is(i)){var r=new Kr(i.edits,n._changeAnnotations);n._textEditChanges[i.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(function(i){var r=new Kr(e.changes[i]);n._textEditChanges[i]=r})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(ra.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},i=this._textEditChanges[n.uri];if(!i){var r=[],a={textDocument:n,edits:r};this._workspaceEdit.documentChanges.push(a),i=new Kr(r,this._changeAnnotations),this._textEditChanges[n.uri]=i}return i}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[e];if(!i){var r=[];this._workspaceEdit.changes[e]=r,i=new Kr(r),this._textEditChanges[e]=i}return i}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new pa,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Tr.is(n)||bi.is(n)?r=n:i=n;var a,s;if(r===void 0?a=lr.create(e,i):(s=bi.is(r)?r:this._changeAnnotations.manage(r),a=lr.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;Tr.is(i)||bi.is(i)?a=i:r=i;var s,c;if(a===void 0?s=cr.create(e,n,r):(c=bi.is(a)?a:this._changeAnnotations.manage(a),s=cr.create(e,n,r,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Tr.is(n)||bi.is(n)?r=n:i=n;var a,s;if(r===void 0?a=Wr.create(e,i):(s=bi.is(r)?r:this._changeAnnotations.manage(r),a=Wr.create(e,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),ma;(function(t){function e(i){return{uri:i}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.string(r.uri)}o(n,"is"),t.is=n})(ma||(ma={}));var ya;(function(t){function e(i,r){return{uri:i,version:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.string(r.uri)&&Ee.integer(r.version)}o(n,"is"),t.is=n})(ya||(ya={}));var ra;(function(t){function e(i,r){return{uri:i,version:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.string(r.uri)&&(r.version===null||Ee.integer(r.version))}o(n,"is"),t.is=n})(ra||(ra={}));var aa;(function(t){function e(i,r,a,s){return{uri:i,languageId:r,version:a,text:s}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.string(r.uri)&&Ee.string(r.languageId)&&Ee.integer(r.version)&&Ee.string(r.text)}o(n,"is"),t.is=n})(aa||(aa={}));var bn;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(bn||(bn={})),function(t){function e(n){var i=n;return i===t.PlainText||i===t.Markdown}o(e,"is"),t.is=e}(bn||(bn={}));var li;(function(t){function e(n){var i=n;return Ee.objectLiteral(n)&&bn.is(i.kind)&&Ee.string(i.value)}o(e,"is"),t.is=e})(li||(li={}));var wa;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(wa||(wa={}));var ii;(function(t){t.PlainText=1,t.Snippet=2})(ii||(ii={}));var Ba;(function(t){t.Deprecated=1})(Ba||(Ba={}));var ur;(function(t){function e(i,r,a){return{newText:i,insert:r,replace:a}}o(e,"create"),t.create=e;function n(i){var r=i;return r&&Ee.string(r.newText)&&gi.is(r.insert)&&gi.is(r.replace)}o(n,"is"),t.is=n})(ur||(ur={}));var yr;(function(t){t.asIs=1,t.adjustIndentation=2})(yr||(yr={}));var wr;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(wr||(wr={}));var Sr;(function(t){function e(n,i){return{items:n||[],isIncomplete:!!i}}o(e,"create"),t.create=e})(Sr||(Sr={}));var oa;(function(t){function e(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(i){var r=i;return Ee.string(r)||Ee.objectLiteral(r)&&Ee.string(r.language)&&Ee.string(r.value)}o(n,"is"),t.is=n})(oa||(oa={}));var Ha;(function(t){function e(n){var i=n;return!!i&&Ee.objectLiteral(i)&&(li.is(i.contents)||oa.is(i.contents)||Ee.typedArray(i.contents,oa.is))&&(n.range===void 0||gi.is(n.range))}o(e,"is"),t.is=e})(Ha||(Ha={}));var Sa;(function(t){function e(n,i){return i?{label:n,documentation:i}:{label:n}}o(e,"create"),t.create=e})(Sa||(Sa={}));var Wa;(function(t){function e(n,i){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s={label:n};return Ee.defined(i)&&(s.documentation=i),Ee.defined(r)?s.parameters=r:s.parameters=[],s}o(e,"create"),t.create=e})(Wa||(Wa={}));var jr;(function(t){t.Text=1,t.Read=2,t.Write=3})(jr||(jr={}));var Ka;(function(t){function e(n,i){var r={range:n};return Ee.number(i)&&(r.kind=i),r}o(e,"create"),t.create=e})(Ka||(Ka={}));var Ca;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ca||(Ca={}));var ba;(function(t){t.Deprecated=1})(ba||(ba={}));var _a;(function(t){function e(n,i,r,a,s){var c={name:n,kind:i,location:{uri:a,range:r}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(_a||(_a={}));var $a;(function(t){function e(i,r,a,s,c,u){var d={name:i,detail:r,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(i){var r=i;return r&&Ee.string(r.name)&&Ee.number(r.kind)&&gi.is(r.range)&&gi.is(r.selectionRange)&&(r.detail===void 0||Ee.string(r.detail))&&(r.deprecated===void 0||Ee.boolean(r.deprecated))&&(r.children===void 0||Array.isArray(r.children))&&(r.tags===void 0||Array.isArray(r.tags))}o(n,"is"),t.is=n})($a||($a={}));var Vi;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Vi||(Vi={}));var Ga;(function(t){function e(i,r){var a={diagnostics:i};return r!=null&&(a.only=r),a}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.typedArray(r.diagnostics,Hr.is)&&(r.only===void 0||Ee.typedArray(r.only,Ee.string))}o(n,"is"),t.is=n})(Ga||(Ga={}));var za;(function(t){function e(i,r,a){var s={title:i},c=!0;return typeof r=="string"?(c=!1,s.kind=r):Rr.is(r)?s.command=r:s.edit=r,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(i){var r=i;return r&&Ee.string(r.title)&&(r.diagnostics===void 0||Ee.typedArray(r.diagnostics,Hr.is))&&(r.kind===void 0||Ee.string(r.kind))&&(r.edit!==void 0||r.command!==void 0)&&(r.command===void 0||Rr.is(r.command))&&(r.isPreferred===void 0||Ee.boolean(r.isPreferred))&&(r.edit===void 0||Pr.is(r.edit))}o(n,"is"),t.is=n})(za||(za={}));var Ja;(function(t){function e(i,r){var a={range:i};return Ee.defined(r)&&(a.data=r),a}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&gi.is(r.range)&&(Ee.undefined(r.command)||Rr.is(r.command))}o(n,"is"),t.is=n})(Ja||(Ja={}));var Va;(function(t){function e(i,r){return{tabSize:i,insertSpaces:r}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&Ee.uinteger(r.tabSize)&&Ee.boolean(r.insertSpaces)}o(n,"is"),t.is=n})(Va||(Va={}));var ja;(function(t){function e(i,r,a){return{range:i,target:r,data:a}}o(e,"create"),t.create=e;function n(i){var r=i;return Ee.defined(r)&&gi.is(r.range)&&(Ee.undefined(r.target)||Ee.string(r.target))}o(n,"is"),t.is=n})(ja||(ja={}));var Ya;(function(t){function e(i,r){return{range:i,parent:r}}o(e,"create"),t.create=e;function n(i){var r=i;return r!==void 0&&gi.is(r.range)&&(r.parent===void 0||t.is(r.parent))}o(n,"is"),t.is=n})(Ya||(Ya={}));var Bo=null,Xi;(function(t){function e(a,s,c,u){return new vo(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(Ee.defined(s)&&Ee.string(s.uri)&&(Ee.undefined(s.languageId)||Ee.string(s.languageId))&&Ee.uinteger(s.lineCount)&&Ee.func(s.getText)&&Ee.func(s.positionAt)&&Ee.func(s.offsetAt))}o(n,"is"),t.is=n;function i(a,s){for(var c=a.getText(),u=r(s,function(O,A){var G=O.range.start.line-A.range.start.line;return G===0?O.range.start.character-A.range.start.character:G}),d=c.length,h=u.length-1;h>=0;h--){var g=u[h],p=a.offsetAt(g.range.start),C=a.offsetAt(g.range.end);if(C<=d)c=c.substring(0,p)+g.newText+c.substring(C,c.length);else throw new Error("Overlapping edit");d=p}return c}o(i,"applyEdits"),t.applyEdits=i;function r(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);r(u,s),r(d,s);for(var h=0,g=0,p=0;h<u.length&&g<d.length;){var C=s(u[h],d[g]);C<=0?a[p++]=u[h++]:a[p++]=d[g++]}for(;h<u.length;)a[p++]=u[h++];for(;g<d.length;)a[p++]=d[g++];return a}o(r,"mergeSort")})(Xi||(Xi={}));var vo=function(){function t(e,n,i,r){this._uri=e,this._languageId=n,this._version=i,this._content=r,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(n,i)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,i=!0,r=0;r<n.length;r++){i&&(e.push(r),i=!1);var a=n.charAt(r);i=a==="\r"||a===`
`,a==="\r"&&r+1<n.length&&n.charAt(r+1)===`
`&&r++}i&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),i=0,r=n.length;if(r===0)return Gn.create(0,e);for(;i<r;){var a=Math.floor((i+r)/2);n[a]>e?r=a:i=a+1}var s=i-1;return Gn.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var i=n[e.line],r=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,r),i)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Ee;(function(t){var e=Object.prototype.toString;function n(C){return typeof C!="undefined"}o(n,"defined"),t.defined=n;function i(C){return typeof C=="undefined"}o(i,"undefined"),t.undefined=i;function r(C){return C===!0||C===!1}o(r,"boolean"),t.boolean=r;function a(C){return e.call(C)==="[object String]"}o(a,"string"),t.string=a;function s(C){return e.call(C)==="[object Number]"}o(s,"number"),t.number=s;function c(C,O,A){return e.call(C)==="[object Number]"&&O<=C&&C<=A}o(c,"numberRange"),t.numberRange=c;function u(C){return e.call(C)==="[object Number]"&&-2147483648<=C&&C<=2147483647}o(u,"integer"),t.integer=u;function d(C){return e.call(C)==="[object Number]"&&0<=C&&C<=2147483647}o(d,"uinteger"),t.uinteger=d;function h(C){return e.call(C)==="[object Function]"}o(h,"func"),t.func=h;function g(C){return C!==null&&typeof C=="object"}o(g,"objectLiteral"),t.objectLiteral=g;function p(C,O){return Array.isArray(C)&&C.every(O)}o(p,"typedArray"),t.typedArray=p})(Ee||(Ee={}));var $r;(function(t){function e(i){return typeof i=="string"||i instanceof String}o(e,"string"),t.string=e;function n(i){return typeof i=="number"||i instanceof Number}o(n,"number"),t.number=n})($r||($r={}));var Ea;(function(t){function e(n){const i=n;return i!=null&&($r.number(i.value)||$r.string(i.value))&&$r.string(i.target)}o(e,"is"),t.is=e})(Ea||(Ea={}));class Da extends l.Diagnostic{constructor(e,n,i,r){super(e,n,i);this.data=r,this.hasDiagnosticCode=!1}}o(Da,"ProtocolDiagnostic");var ji;(function(t){const e=Object.prototype.toString;function n(h){return typeof h!="undefined"}o(n,"defined"),t.defined=n;function i(h){return h===!0||h===!1}o(i,"boolean"),t.boolean=i;function r(h){return e.call(h)==="[object String]"}o(r,"string"),t.string=r;function a(h){return e.call(h)==="[object Number]"}o(a,"number"),t.number=a;function s(h){return h!==null&&typeof h=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(h){return Array.isArray(h)}o(c,"array"),t.array=c;function u(h){return c(h)&&h.every(g=>r(g))}o(u,"stringArray"),t.stringArray=u;function d(h,g){return Array.isArray(h)&&h.every(g)}o(d,"typedArray"),t.typedArray=d})(ji||(ji={}));var Gr;(function(t){function e(n){const i=n;return i&&ji.string(i.language)&&ji.string(i.value)}o(e,"is"),t.is=e})(Gr||(Gr={}));function sa(t){const e=o(P=>l.Uri.parse(P),"nullConverter"),n=t!=null?t:e;function i(P){return n(P)}o(i,"asUri");function r(P){return P.map(a)}o(r,"asDiagnostics");function a(P){const tt=new Da(g(P.range),P.message,C(P.severity),P.data);return P.code!==void 0&&(ia.is(P.codeDescription)?tt.code={value:P.code,target:i(P.codeDescription.href)}:Ea.is(P.code)?(tt.hasDiagnosticCode=!0,tt.code={value:P.code.value,target:i(P.code.target)}):tt.code=P.code),P.source&&(tt.source=P.source),P.relatedInformation&&(tt.relatedInformation=s(P.relatedInformation)),Array.isArray(P.tags)&&(tt.tags=u(P.tags)),tt}o(a,"asDiagnostic");function s(P){return P.map(c)}o(s,"asRelatedInformation");function c(P){return new l.DiagnosticRelatedInformation(Ze(P.location),P.message)}o(c,"asDiagnosticRelatedInformation");function u(P){if(!P)return;const tt=[];for(const fn of P){const Ii=d(fn);Ii!==void 0&&tt.push(Ii)}return tt.length>0?tt:void 0}o(u,"asDiagnosticTags");function d(P){switch(P){case mr.Unnecessary:return l.DiagnosticTag.Unnecessary;case mr.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function h(P){if(!!P)return new l.Position(P.line,P.character)}o(h,"asPosition");function g(P){if(!!P)return new l.Range(h(P.start),h(P.end))}o(g,"asRange");function p(P){return P.map(tt=>g(tt))}o(p,"asRanges");function C(P){if(P==null)return l.DiagnosticSeverity.Error;switch(P){case Ar.Error:return l.DiagnosticSeverity.Error;case Ar.Warning:return l.DiagnosticSeverity.Warning;case Ar.Information:return l.DiagnosticSeverity.Information;case Ar.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(C,"asDiagnosticSeverity");function O(P){if(ji.string(P))return new l.MarkdownString(P);if(Gr.is(P))return new l.MarkdownString().appendCodeblock(P.value,P.language);if(Array.isArray(P)){const fn=[];for(const Ii of P){const Oa=new l.MarkdownString;Gr.is(Ii)?Oa.appendCodeblock(Ii.value,Ii.language):Oa.appendMarkdown(Ii),fn.push(Oa)}return fn}let tt;switch(P.kind){case bn.Markdown:return new l.MarkdownString(P.value);case bn.PlainText:return tt=new l.MarkdownString,tt.appendText(P.value),tt;default:return tt=new l.MarkdownString,tt.appendText(`Unsupported Markup content received. Kind is: ${P.kind}`),tt}}o(O,"asHoverContent");function A(P){if(ji.string(P))return P;switch(P.kind){case bn.Markdown:return new l.MarkdownString(P.value);case bn.PlainText:return P.value;default:return`Unsupported Markup content received. Kind is: ${P.kind}`}}o(A,"asDocumentation");function G(P){if(!!P)return new l.Hover(O(P.contents),g(P.range))}o(G,"asHover");function te(P){if(!!P)return new l.TextEdit(g(P.range),P.newText)}o(te,"asTextEdit");function x(P){if(!!P)return P.map(te)}o(x,"asTextEdits");function ce(P){if(!P)return;const tt=new l.SignatureHelp;return ji.number(P.activeSignature)?tt.activeSignature=P.activeSignature:tt.activeSignature=0,ji.number(P.activeParameter)?tt.activeParameter=P.activeParameter:tt.activeParameter=0,P.signatures&&(tt.signatures=be(P.signatures)),tt}o(ce,"asSignatureHelp");function be(P){return P.map(De)}o(be,"asSignatureInformations");function De(P){const tt=new l.SignatureInformation(P.label);return P.documentation!==void 0&&(tt.documentation=A(P.documentation)),P.parameters!==void 0&&(tt.parameters=je(P.parameters)),P.activeParameter!==void 0&&(tt.activeParameter=P.activeParameter),tt}o(De,"asSignatureInformation");function je(P){return P.map(wt)}o(je,"asParameterInformations");function wt(P){const tt=new l.ParameterInformation(P.label);return P.documentation&&(tt.documentation=A(P.documentation)),tt}o(wt,"asParameterInformation");function Ze(P){if(!!P)return new l.Location(n(P.uri),g(P.range))}o(Ze,"asLocation");function xt(P){if(!!P)return Mt(P)}o(xt,"asDeclarationResult");function Zt(P){if(!!P)return Mt(P)}o(Zt,"asDefinitionResult");function Bt(P){if(!P)return;const tt={targetUri:n(P.targetUri),targetRange:g(P.targetSelectionRange),originSelectionRange:g(P.originSelectionRange),targetSelectionRange:g(P.targetSelectionRange)};if(!tt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return tt}o(Bt,"asLocationLink");function Mt(P){if(!!P)return ji.array(P)?P.length===0?[]:pr.is(P[0])?P.map(Ii=>Bt(Ii)):P.map(fn=>Ze(fn)):pr.is(P)?[Bt(P)]:Ze(P)}o(Mt,"asLocationResult");function Xt(P){if(!!P)return P.map(tt=>Ze(tt))}o(Xt,"asReferences");function Ei(P){if(!!P)return P.map(tr)}o(Ei,"asDocumentHighlights");function tr(P){const tt=new l.DocumentHighlight(g(P.range));return ji.number(P.kind)&&(tt.kind=nr(P.kind)),tt}o(tr,"asDocumentHighlight");function nr(P){switch(P){case jr.Text:return l.DocumentHighlightKind.Text;case jr.Read:return l.DocumentHighlightKind.Read;case jr.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(nr,"asDocumentHighlightKind");function zr(P,tt){if(!!P)return P.map(fn=>Ts(fn,tt))}o(zr,"asSymbolInformations");function dr(P){return P<=Ca.TypeParameter?P-1:l.SymbolKind.Property}o(dr,"asSymbolKind");function ga(P){switch(P){case ba.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(ga,"asSymbolTag");function uo(P){if(P==null)return;const tt=[];for(const fn of P){const Ii=ga(fn);Ii!==void 0&&tt.push(Ii)}return tt.length===0?void 0:tt}o(uo,"asSymbolTags");function Ts(P,tt){const fn=new l.SymbolInformation(P.name,dr(P.kind),g(P.location.range),P.location.uri?n(P.location.uri):tt);return Ms(fn,P),P.containerName&&(fn.containerName=P.containerName),fn}o(Ts,"asSymbolInformation");function Fl(P){if(P!=null)return P.map(xo)}o(Fl,"asDocumentSymbols");function xo(P){var tt;const fn=new l.DocumentSymbol(P.name,(tt=P.detail)!=null?tt:"",dr(P.kind),g(P.range),g(P.selectionRange));if(Ms(fn,P),P.children!==void 0&&P.children.length>0){const Ii=[];for(const Oa of P.children)Ii.push(xo(Oa));fn.children=Ii}return fn}o(xo,"asDocumentSymbol");function Ms(P,tt){P.tags=uo(tt.tags),tt.deprecated&&(P.tags?P.tags.includes(l.SymbolTag.Deprecated)||(P.tags=P.tags.concat(l.SymbolTag.Deprecated)):P.tags=[l.SymbolTag.Deprecated])}o(Ms,"fillTags");function No(P){const tt={title:P.title,command:P.command};return P.arguments&&(tt.arguments=P.arguments),tt}o(No,"asCommand");function xl(P){if(!!P)return P.map(No)}o(xl,"asCommands");const xr=new Map;xr.set(Vi.Empty,l.CodeActionKind.Empty),xr.set(Vi.QuickFix,l.CodeActionKind.QuickFix),xr.set(Vi.Refactor,l.CodeActionKind.Refactor),xr.set(Vi.RefactorExtract,l.CodeActionKind.RefactorExtract),xr.set(Vi.RefactorInline,l.CodeActionKind.RefactorInline),xr.set(Vi.RefactorRewrite,l.CodeActionKind.RefactorRewrite),xr.set(Vi.Source,l.CodeActionKind.Source),xr.set(Vi.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function Oo(P){if(P==null)return;let tt=xr.get(P);if(tt)return tt;const fn=P.split(".");tt=l.CodeActionKind.Empty;for(const Ii of fn)tt=tt.append(Ii);return tt}o(Oo,"asCodeActionKind");function Nl(P){if(P!=null)return P.map(tt=>Oo(tt))}o(Nl,"asCodeActionKinds");function Ol(P){if(P==null)return;const tt=new l.CodeAction(P.title);return P.kind!==void 0&&(tt.kind=Oo(P.kind)),P.diagnostics&&(tt.diagnostics=r(P.diagnostics)),P.edit&&(tt.edit=Ps(P.edit)),P.command&&(tt.command=No(P.command)),P.isPreferred!==void 0&&(tt.isPreferred=P.isPreferred),tt}o(Ol,"asCodeAction");function Ps(P){if(!P)return;const tt=new l.WorkspaceEdit;return P.documentChanges?P.documentChanges.forEach(fn=>{if(lr.is(fn))tt.createFile(n(fn.uri),fn.options);else if(cr.is(fn))tt.renameFile(n(fn.oldUri),n(fn.newUri),fn.options);else if(Wr.is(fn))tt.deleteFile(n(fn.uri),fn.options);else if(Mr.is(fn))tt.set(n(fn.textDocument.uri),x(fn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(fn,void 0,4)}`)}):P.changes&&Object.keys(P.changes).forEach(fn=>{tt.set(n(fn),x(P.changes[fn]))}),tt}o(Ps,"asWorkspaceEdit");function Is(P){return new l.Color(P.red,P.green,P.blue,P.alpha)}o(Is,"asColor");function Ls(P){return new l.ColorInformation(g(P.range),Is(P.color))}o(Ls,"asColorInformation");function Ul(P){if(Array.isArray(P))return P.map(Ls)}o(Ul,"asColorInformations");function ks(P){const tt=new l.ColorPresentation(P.label);return tt.additionalTextEdits=x(P.additionalTextEdits),P.textEdit&&(tt.textEdit=te(P.textEdit)),tt}o(ks,"asColorPresentation");function Bl(P){if(Array.isArray(P))return P.map(ks)}o(Bl,"asColorPresentations");function Fs(P){if(P)switch(P){case Br.Comment:return l.FoldingRangeKind.Comment;case Br.Imports:return l.FoldingRangeKind.Imports;case Br.Region:return l.FoldingRangeKind.Region}}o(Fs,"asFoldingRangeKind");function xs(P){return new l.FoldingRange(P.startLine,P.endLine,Fs(P.kind))}o(xs,"asFoldingRange");function Hl(P){if(Array.isArray(P))return P.map(xs)}o(Hl,"asFoldingRanges");function Uo(P){return new l.SelectionRange(g(P.range),P.parent?Uo(P.parent):void 0)}o(Uo,"asSelectionRange");function Wl(P){if(!Array.isArray(P))return[];const tt=[];for(const fn of P)tt.push(Uo(fn));return tt}return o(Wl,"asSelectionRanges"),{asUri:i,asDiagnostics:r,asDiagnostic:a,asRange:g,asRanges:p,asPosition:h,asDiagnosticSeverity:C,asDiagnosticTag:d,asHover:G,asTextEdit:te,asTextEdits:x,asSignatureHelp:ce,asSignatureInformations:be,asSignatureInformation:De,asParameterInformations:je,asParameterInformation:wt,asDeclarationResult:xt,asDefinitionResult:Zt,asLocation:Ze,asReferences:Xt,asDocumentHighlights:Ei,asDocumentHighlight:tr,asDocumentHighlightKind:nr,asSymbolKind:dr,asSymbolTag:ga,asSymbolTags:uo,asSymbolInformations:zr,asSymbolInformation:Ts,asDocumentSymbols:Fl,asDocumentSymbol:xo,asCommand:No,asCommands:xl,asCodeAction:Ol,asCodeActionKind:Oo,asCodeActionKinds:Nl,asWorkspaceEdit:Ps,asFoldingRangeKind:Fs,asFoldingRange:xs,asFoldingRanges:Hl,asColor:Is,asColorInformation:Ls,asColorInformations:Ul,asColorPresentation:ks,asColorPresentations:Bl,asSelectionRange:Uo,asSelectionRanges:Wl}}o(sa,"createConverter");var er;(function(t){function e(i,r){const{provider:a,repo:s}=r instanceof l.Uri?i.getVirtualUriMetadata(r):r;return i.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(i,r){const{provider:a,repo:s}=r instanceof l.Uri?i.getVirtualUriMetadata(r):r;return i.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(er||(er={}));var Cr;(function(t){function e(r){if(r.HEAD.type===se.Branch||r.HEAD.type===se.RemoteBranch)return r.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(r){if(r.HEAD.type!==se.Branch)return;if(r.pullRequest!==void 0)return r.HEAD.name;const a=r.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function i(r,a,s=y.timeout){const c=await r.getMetadata(a),u=er.externalIndexUri(r,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return y.getIndexedTip(u,d,{authentication:r.getAuthentication(a)},s)}o(i,"getIndexedTip"),t.getIndexedTip=i})(Cr||(Cr={}));var Yr;(function(t){const e=new $t(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function i(s,c,u){const d=[];for(const g of u)d.push(n(s,c,g));const h=[];for(const g of await Promise.all(d))g!==void 0&&h.push(g);return h}o(i,"all"),t.all=i;function r(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(r,"sort"),t.sort=r;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${Cn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",h=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:h}}o(a,"getCommitInfo"),t.getCommitInfo=a})(Yr||(Yr={}));var m;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(m||(m={}));var f;(function(t){function e(i){return{workspaceId:i.WorkspaceId,snapshotId:i.SnapshotId,state:i.State,commitId:i.commitId.toLowerCase(),branchName:n(i.BranchName),creationDate:new Date(i._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(i){if(i!==null)return i.startsWith("refs/heads/")?i.substr(11):i}o(n,"getBranchName")})(f||(f={}));var y;(function(t){t.timeout=5*60*1e3;const e=new $t(32),n=new $t(32);async function i(g,p,C,O=t.timeout){const A=await r(g,p,C,O);if(!(A===void 0||A.length===0))return A[0]}o(i,"getIndexedTip"),t.getIndexedTip=i;async function r(g,p,C,O=t.timeout){const A=c(g,p);let G=e.get(A);if(G===void 0||G!==void 0&&Date.now()-G.time>O){const te=N.getAllWorkspaceSnapshots(g,C,p);G={time:Date.now(),promise:te,snapshots:void 0},e.set(A,G)}if(G.snapshots!==null){if(G.snapshots===void 0){let te=await G.promise;if(te===void 0){G.snapshots=null;return}te.sort((x,ce)=>ce.creationDate.getTime()-x.creationDate.getTime()),te=te.filter(x=>x.state===5||x.state===3),G.snapshots=te}return G.snapshots}}o(r,"all"),t.all=r;async function a(g,p,C,O,A=t.timeout){const G=s(g,p);let te=n.get(G);if(te===null)return;if(te!==void 0)return te;const x=c(g,C),ce=e.get(x);if(ce!==void 0&&Date.now()-ce.time<=A){if(ce.snapshots===null)return;const be=ce.snapshots!==void 0?ce.snapshots:await r(g,C,O);if(be!==void 0){for(const De of be)if(De.commitId===p)return n.set(G,De),De}return}if(te=await N.getWorkspaceSnapshot(p,O),te===void 0){n.set(G,null);return}return n.set(G,te),te}o(a,"single"),t.single=a;function s(g,p){return`${g.toString()}/${p}`}o(s,"getSingleCacheKey");function c(g,p){return p!==void 0?`${p}\\${g.toString()}`:g.toString()}o(c,"getAllCacheKey");async function u(g,p,C,O=t.timeout){return await a(g,p,void 0,C,O)!==void 0}o(u,"exists"),t.exists=u;async function d(g,p,C,O=t.timeout){return await r(g,p,C,O)!==void 0}o(d,"branch"),t.branch=d;async function h(g,p,C){const O=new Map(C.map(te=>[te.commitId,te])),A=await Yr.all(g,p.uri,C.map(te=>te.commitId));if(A.length===0)return;const G=[];for(const te of A){const x=O.get(te.hash);x!==void 0&&G.push({...x,commit:te})}if(G.length!==0)return G}o(h,"resolve"),t.resolve=h})(y||(y={}));var b;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(b||(b={}));var N;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function i(x,ce,be){var De;const je=await Rn(x,{method:"POST",body:JSON.stringify(ce),headers:{"Content-Type":"application/json",...(await be.authentication).getRichNavigationHeaders(),"x-correlation-id":(De=be.correlationId)!=null?De:ot()}});if(!!je.ok)return je.json()}o(i,"postRequest");async function r(x,ce,be){const De=await Rn(x,{method:"POST",body:ce,headers:(await be.authentication).getRichNavigationHeaders()});if(!!De.ok)return await De.json()}o(r,"postForm");function a(x,ce){return`${n}/${e}/HttpLanguageService/${x}/${ce}`}o(a,"makeRequestUrl");async function s(x,ce){const be=await Rn(`${n}/${e}/WorkspaceSnapshot?commitId=${x}`,{headers:(await ce.authentication).getRichNavigationHeaders()});if(be.ok){const De=await be.json();return{workspaceId:De.workspaceId,snapshotId:De.snapshotId,state:De.state,commitId:x.toLowerCase(),branchName:void 0,creationDate:new Date}}}o(s,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=s;async function c(x,ce,be){const De=new Ht;De.append("uriString",x.toString(!0)),be!==void 0&&De.append("branchName",be);try{const je=await r(`${n}/${e}/WorkspaceSnapshot/all`,De,ce);return je===void 0?void 0:je.map(f.asWorkspaceSnapshot)}catch(je){I.error(je);return}}o(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(x,ce,be){const De=new Ht;De.append("uriString",x.toString(!0)),be!==void 0&&De.append("branchName",be);try{const je=await r(`${n}/${e}/WorkspaceSnapshot/latest`,De,ce);return je===void 0?void 0:f.asWorkspaceSnapshot(je)}catch(je){I.error(je);return}}o(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function d(x,ce,be){try{return i(a(x,"textDocument/capabilities"),ce,be)}catch(De){I.error(De);return}}o(d,"capabilities"),t.capabilities=d;async function h(x,ce,be){try{return i(a(x,"textDocument/hover"),ce,be)}catch(De){I.error(De);return}}o(h,"provideHover"),t.provideHover=h;async function g(x,ce,be){try{return i(a(x,"textDocument/definition"),ce,be)}catch(De){I.error(De);return}}o(g,"provideDefinition"),t.provideDefinition=g;async function p(x,ce,be){try{return i(a(x,"textDocument/declaration"),ce,be)}catch(De){I.error(De);return}}o(p,"provideDeclaration"),t.provideDeclaration=p;async function C(x,ce,be){try{return i(a(x,"textDocument/typeDefinition"),ce,be)}catch(De){I.error(De);return}}o(C,"provideTypeDefinition"),t.provideTypeDefinition=C;async function O(x,ce,be){try{return i(a(x,"textDocument/references"),ce,be)}catch(De){I.error(De);return}}o(O,"provideReferences"),t.provideReferences=O;async function A(x,ce,be){try{return i(a(x,"textDocument/foldingRange"),ce,be)}catch(De){I.error(De);return}}o(A,"providerFoldingRanges"),t.providerFoldingRanges=A;async function G(x,ce,be){if(ce=="")return;const De=await Rn(`${n}/${e}/Search/${x}/${ce}`,{headers:(await be.authentication).getRichNavigationHeaders()});if(De.ok)return await De.json()}o(G,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=G;async function te(x,ce,be){const De=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${x}/${ce}/assets/designtime`,query:`id=${be}`});try{const je=await Rn(De.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return je.ok?je.text():void 0}catch(je){I.error(je);return}}o(te,"getDesignTimeFileContent"),t.getDesignTimeFileContent=te})(N||(N={}));class q{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const i=[];i.push(this.providerService.onDidChangeRepositories(r=>{var a;for(const s of r.added){const c=s.uri,u=W.getIndexMemento(c);if(u!==void 0){const d=er.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?y.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&U(u.ref)&&y.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const h={},g=d.pullRequest===void 0?Cr.getIndexBranchName(d):void 0;g!==void 0?h.branch={name:g}:h.ref=d.HEAD.sha,W.setIndexMemento(c,h).then(void 0,void 0)},void 0)}})),i.push(this.providerService.onDidChangeRepository(r=>{const a=r.repository.uri,s=F(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...i)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const i=await this.providerService.getModeRefType(e),r=ci.decode(e);if(r!==void 0){if(r.type===oi.Latest)return i===L.Branch?this.getIndexedTip(e,n?0:y.timeout):void 0;if(r.type===oi.SHA){const s=er.externalIndexUri(this.providerService,e);return s===void 0?void 0:await y.exists(s,r.sha,{authentication:this.providerService.getAuthentication(e)},n?0:y.timeout)?r.sha:void 0}}if(this.providerService.getModeConfig(e,i).index===$e.Latest)return this.getIndexedTip(e,n?0:y.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),i=F(n);let r=this.metadata.get(i);return r!==void 0||(r=this.createIndexMetadata(e),this.metadata.set(i,r)),r}async getIndexedTip(e,n=y.timeout){const i=await Cr.getIndexedTip(this.providerService,e,n);return i!==void 0?i.commitId:void 0}async createIndexMetadata(e){const n=new lt(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const i=er.externalIndexUri(this.providerService,e);if(i===void 0)return;n.logStep("Getting metadata");const r=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,r),s=await r;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?Cr.getIndexBranchName(s):void 0,d=await y.single(i,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===se.Branch||s.HEAD.type===se.RemoteBranch){const C=ci.decode(e);if(C!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?C.type===oi.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await y.branch(i,u,{authentication:this.providerService.getAuthentication(e)})?{type:dn.Indexed}:{type:dn.NotIndexed}):{type:dn.NotIndexed}:C.type===oi.Latest||C.type===oi.SHA?{type:dn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:dn.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const g=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((g.index===$e.Latest||g.index===$e.Match)&&d!==void 0)return{type:dn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(g.index===$e.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:dn.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===se.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const C=await y.all(i,u,{authentication:c});if(C!==void 0&&C.length>0)return{type:dn.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,C),branch:{name:u}}}}return d!==void 0?{type:dn.Indexed}:s.HEAD.type===se.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await y.branch(i,u,{authentication:c}))?{type:dn.Indexed}:{type:dn.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,i){if(i.length===0)throw new Error("At least on snapshot should exist");const r=new Set(i.map(h=>h.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const h of a.commits)if(h.hash===n){s=h;break}if(s===void 0)return;const c=new Map(a.commits.map(h=>[h.hash,h])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!r.has(d.hash);)if(d.parents.length>0){for(let h=1;h<d.parents.length;h++){const g=c.get(d.parents[h]);g!==void 0&&u.push(g)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const i=er.externalIndexUri(this.providerService,e);if(i===void 0)return[];const r=await y.all(i,void 0,{authentication:this.providerService.getAuthentication(e)});if(r===void 0)return[];const a=[];for(const s of r)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[i,r]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,r);if(i===void 0)return[];const{HEAD:s}=n,c=[];if(i!==void 0){let u;const d=[`${Fe(s.sha)}`];if(i.type===dn.Active){const h=await i.sha;a.index===$e.Latest||a.index===$e.Match?(u=a.display===$.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===$e.TipPlusLatest&&(u="$(layers-dot)",h!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else i.type===dn.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):i.type===dn.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(Tt({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(q,"RichNavIndexProvider");var de;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",h=>{d(h).catch(g=>I.log("Selecting index mode failed.",g))})]}o(n,"create"),t.create=n;const i=new Map;function r(h){i.set(h.key(),h)}o(r,"addService"),t.addService=r;function a(h){i.delete(h.key())}o(a,"removeService"),t.removeService=a;function s(h){return i.get(F(h))}o(s,"getService");async function c(h){for(const g of i.values())if(await g.handles(h))return g}o(c,"getServiceForDocument");async function u(){try{let h=o(function(O){const A=O.lastIndexOf("/");return A<=0?O:O.substr(A+1)},"basename");const g=l.window.activeTextEditor;if(g===void 0){e.hide();return}const p=await c(g.document);if(p===void 0){e.hide();return}const C=await p.isDocumentIndexed(g.document);C===Kt.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",h(g.document.uri.path))),e.show()):C===Kt.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",h(g.document.uri.path))),e.show()):e.hide()}catch(h){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(h){var g;const p=h.uri,C=s(p);if(C===void 0)return;const[O,A,G,te]=await Promise.all([C.getBranchName(),C.getMetadata(),C.getIndexMetadata(),C.getModeRefType(p)]);if(G===void 0||!dn.hasIndex(G.type))return;let x,ce=!1;const be=ci.decode(p);(be==null?void 0:be.type)===oi.Latest||(be==null?void 0:be.type)===oi.SHA?(ce=!0,x={display:$.Browse,index:be.type===oi.Latest?$e.Latest:$e.Match}):x=(g=C.getCurrentIndexMode())!=null?g:C.getModeConfig(p,te);const De=C.getUriMetadata(),je=l.l10n.t("{0} current","$(check)"),wt={indexKind:"disable",label:l.l10n.t("Disable"),description:x.index===$e.None?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let Ze,xt;if(te===L.PullRequestBranch||te===L.PullRequestRemoteBranch||te===L.Commit||te===L.Tag){const Zt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:x.index===$e.Match&&x.display===$.Browse?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},Bt={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:x.index===$e.Match&&x.display===$.Edit?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let Mt=De.provider.id==="github";Mt&&(Mt=A.HEAD.type===se.RemoteBranch?A.HEAD.branch.remote.accessLevel>=Z.Write:!0);const Xt=Mt?[Zt,Bt,wt]:[Zt,wt];xt=await l.window.showQuickPick(Xt,{placeHolder:"Pick a rich navigation mode"})}else if(te===L.Branch||te===L.RemoteBranch){const Zt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:x.index===$e.Latest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},Bt={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:x.index===$e.TipPlusLatest?`  \u2022  ${je}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},Mt=De.provider.id==="github"?[Zt,Bt,wt]:[Zt,wt];xt=await l.window.showQuickPick(Mt,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",O)})}if(xt!==void 0&&(xt.indexKind==="disable"?Ze={display:$.Edit,index:$e.None}:xt.indexKind==="match"?Ze={display:$.Browse,index:$e.Match}:xt.indexKind==="match+writeable"?Ze={display:$.Edit,index:$e.Match}:xt.indexKind==="tip+latest"?Ze={display:$.Edit,index:$e.TipPlusLatest}:xt.indexKind==="latest"&&(Ze={display:$.Browse,index:$e.Latest}),Ze!==void 0&&!pe.equals(x,Ze))){if(await C.hasChanges()&&Ze.display===$.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await C.updateIndexMode(Ze),ce){const Zt=await C.getNonIndexedWorkspaceDescriptor();Zt!==void 0&&ct(C.getProviderService(),Zt)}}}o(d,"toggleIndexMode")})(de||(de={}));class Le{constructor(e){this.telemetryService=e}static createStatus(){return de.create()}async createNavigationService(e,n){const i=await e.getIndexMetadata(n.uri);if(!(i===void 0||i.type===dn.NotIndexed))return()=>new Vt(e,n,this.telemetryService)}}o(Le,"RichNavServiceProvider");var ft;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(r){const a=e.exec(r);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:pt.scheme,authority:M(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function i(r){if(r.scheme!==pt.scheme)return;let a;try{return a=JSON.parse(S(r.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${r.path}`}}catch{return}}o(i,"toRichNavComponents"),t.toRichNavComponents=i})(ft||(ft={}));const gt=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new $t(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return gt.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==gt.scheme)return;const n=ft.toRichNavComponents(t);if(n===void 0)return;const i=await N.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(i!==void 0)return e={content:this.textEncoder.encode(i),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let pt=gt;pt.scheme="vsck-fs",pt.emptyDisposable={dispose:()=>{}};var Kt;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(Kt||(Kt={}));const Gt=o(class{static registerCapability(t,e,n){var i;const r=this.disabledCapabilities.get(t);if(r==null?void 0:r[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(i=n[e])!=null?i:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const i=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[h,g,p]=this.currentlyResolved,[C,O,A]=c,G=this.providerService.getModeConfig(s,A);if(h!==void 0&&g!==void 0&&p!==void 0&&h.HEAD.sha===C.HEAD.sha&&O!==void 0&&g.type===O.type&&p.index===G.index&&p.display===G.display){const x=(g==null?void 0:g.type)===dn.Active?await g.sha:void 0,ce=(O==null?void 0:O.type)===dn.Active?await O.sha:void 0;if(x===ce)return}const te={newDisplayMode:G.display,newIndexMode:G.index,newIndexType:(O==null?void 0:O.type)===void 0?"undefined":dn[O==null?void 0:O.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(g==null?void 0:g.type)===void 0?"undefined":dn[g==null?void 0:g.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",te),this.currentlyResolved=[C,O,G];for(const x of this.registeredFeatures.values())x.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,Zi.isActive(O)){const x=er.externalIndexUri(this.providerService,C),ce=await O.sha;if(x!==void 0&&ce!==void 0){const be=await y.single(x,ce,Cr.getIndexBranchName(C),{authentication:this.providerService.getAuthentication(s)});be!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:be.snapshotId}),this.workspaceSnapshot=be,this.documentListeners=this.installDocumentListeners(),((G==null?void 0:G.display)===$.Edit||C.HEAD.sha!==ce)&&(this.mapper=new vr(this.providerService,s,ce,C.HEAD.sha)))}}await de.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new $t(2048),this.knownDesignTimeFiles=new Set;const r=[];r.push(this.providerService.onDidChangeRepository(a=>{F(a.repository.uri)===F(this.repository.uri)&&i()})),r.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(F(s)===F(this.repository.uri)){i();break}})),this.environmentListeners=l.Disposable.from(...r),i(!0),de.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=ci.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===oi.Latest&&a.type!==dn.Active||d.type===oi.SHA&&(a.type!==dn.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const h=await this.providerService.getModeRefType(c,this.metadata),g=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,h,!0);g!==void 0&&g.display===$.Browse&&a!==void 0&&g.index!==$e.None&&a.type!==dn.Active?u=!0:(a==null?void 0:a.type)===dn.Active&&await a.sha===void 0&&((g==null?void 0:g.display)===$.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Gt.fileSystemProvider===void 0&&(Gt.fileSystemProvider=new pt,l.workspace.registerFileSystemProvider(pt.scheme,Gt.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const i=this.repository.uri,r=await this.providerService.getModeRefType(i,this.metadata);t=this.providerService.getModeConfig(i,r),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===$e.Latest){await Promise.all([this.metadata,this.indexMetadata]);const i=await this.getIndexedTip();if(i===void 0)return;await this.sync(i.hash)}else t.index===$e.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await W.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return F(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),de.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Ve.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return Cr.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:Ne.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===dn.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=er.externalIndexUri(this.providerService,t),n=Cr.getIndexBranchName(t);if(e===void 0||n===void 0)return;const i=await y.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(i===void 0)return;const r=await Yr.get(this.providerService,this.repository.uri,i.commitId);if(r!==void 0)return{...r,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=er.externalIndexUri(this.providerService,e);if(n===void 0)return;const[i,r]=await Promise.all([Yr.get(this.providerService,this.repository.uri,t),y.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(i===void 0||r===void 0))return{...i,branchName:r.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const i=n.uri.scheme;if(Ve.scheme!==i&&pt.scheme!==i)return;const r=n.uri.toString();if(i===Ve.scheme&&!r.startsWith(this.repositoryRoot)||i===pt.scheme&&!this.knownDesignTimeFiles.has(r)||this.pendingCapabilitiesRequests.has(r))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(r);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(r,c),s=await c,this.pendingCapabilitiesRequests.delete(r),this.capabilitiesCache.set(r,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const i=n.uri.toString(),r=this.registeredFeatures.get(i);r!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),r.dispose()),this.pendingCapabilitiesRequests.delete(i)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const i=this.workspaceSnapshot,r=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,G)=>{const te=`/${i.snapshotId}/source/`;this.metadata.then(x=>{A(sa(ce=>{const be=l.Uri.parse(ce);if(x===void 0)return be;try{if(be.scheme==="vsck"&&be.authority===i.workspaceId&&be.path.startsWith(te))return this.repository.createRelativeUri(be.path.substr(te.length));const De=ft.toVSCode(ce);return De!==void 0?(this.knownDesignTimeFiles.add(De.toString()),De):be}catch(De){return be}}))},G)}),d=new RegExp(`^vsck:\\/\\/${i.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function h(A){const G=d.exec(A);return G===null||G.length===2}o(h,"designTimeFilter");function g(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const G=A[0];return typeof G.uri=="string"?A.filter(ce=>h(ce.uri)):typeof G.targetUri=="string"?A.filter(ce=>h(ce.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(g,"filterDesignTimeFiles");async function p(A,G,te){var x,ce,be;if(te==null||A===void 0)return te;const De=new Map(l.workspace.textDocuments.map(wt=>[wt.uri.toString(!0),wt]));if(Array.isArray(te)){const wt=[],Ze=[];if(te.length===0)return[];for(const xt of te){const Zt=xt;if(Zt.uri instanceof l.Uri){const Bt=await A.mapRangeFromIndexToCode((x=De.get(Zt.uri.toString()))!=null?x:Zt.uri,Zt.range);Bt!==void 0&&wt.push(new l.Location(Zt.uri,Bt))}else{const Bt=xt,Mt=(ce=De.get(Bt.targetUri.toString()))!=null?ce:Bt.targetUri,Xt=Bt.originSelectionRange?await A.mapRangeFromIndexToCode(G,Bt.originSelectionRange):void 0;if(Xt!==void 0||Bt.originSelectionRange===void 0){const Ei=await A.mapRangeFromIndexToCode(Mt,Bt.targetRange);if(Ei!==void 0){const tr=Bt.targetSelectionRange?await A.mapRangeFromIndexToCode(Mt,Bt.targetSelectionRange):void 0;(tr!==void 0||Bt.targetSelectionRange===void 0)&&Ze.push({targetUri:Bt.targetUri,targetRange:Ei,targetSelectionRange:tr,originSelectionRange:Xt})}}}}return wt.length>0?wt:Ze}const je=await A.mapRangeFromIndexToCode((be=De.get(te.uri.toString()))!=null?be:te.uri,te.range);if(je!==void 0)return new l.Location(te.uri,je)}o(p,"mapLocations");const C=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:ot()}),"getRestApiOptions"),O=o((A,G)=>{const te={method:A,correlationId:G.correlationId};this.telemetryService.publicLog2("codex.restAPICall",te)},"sendTelemetry");Gt.registerCapability(r,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=C(A);return O("codex.provideHover",x),(await u).asHover(await N.provideHover(n,te,x))}})),Gt.registerCapability(r,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=C(A);return O("codex.provideDefinition",x),p(this.mapper,A,(await u).asDefinitionResult(g(await N.provideDefinition(n,te,x))))}})),Gt.registerCapability(r,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=C(A);return O("codex.provideDeclaration",x),p(this.mapper,A,(await u).asDeclarationResult(g(await N.provideDeclaration(n,te,x))))}})),Gt.registerCapability(r,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,G)=>{const te=await this.createTextDocumentPositionParams(A,G);if(te===void 0)return;const x=C(A);return O("codex.provideTypeDefinition",x),p(this.mapper,A,(await u).asDefinitionResult(g(await N.provideTypeDefinition(n,te,x))))}})),Gt.registerCapability(r,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,G,te)=>{const x=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,G):G;if(x===void 0)return;const ce={position:{line:x.line,character:x.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:te.includeDeclaration}},be=C(A);return O("codex.provideReferences",be),p(this.mapper,A,(await u).asReferences(g(await N.provideReferences(n,ce,be))))}})),Gt.registerCapability(r,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async A=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const G=C(A);return O("codex.provideFoldingRanges",G),(await u).asFoldingRanges(await N.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),G))}})),Gt.registerCapability(r,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async A=>{const G=C(t),te=await N.provideWorkspaceSymbols(n,A,G);if(te!==void 0)return(await u).asSymbolInformations(te)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),de.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await N.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===pt.scheme){const i=ft.toRichNavComponents(t);return i===void 0?t:l.Uri.file(i.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let Vt=Gt;Vt.localCapabilities=new Map([["javascript",Object.assign(b.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(b.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(b.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(b.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Vt.disabledCapabilities=new Map([["javascript",Object.assign(b.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(b.create(),{declarationProvider:!0})],["typescript",Object.assign(b.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(b.create(),{declarationProvider:!0})]]);var pn=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),gn=o((t,e,n)=>(pn(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),we=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),Qn=o((t,e,n,i)=>(pn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),"__privateSet"),wi;class Ir{constructor(e){we(this,wi,void 0),Qn(this,wi,e)}async provideEditSessionIdentity(e,n){await Si(gn(this,wi),e.uri);const i=gn(this,wi).getRepository(e.uri);if(!i||n.isCancellationRequested)return null;const{uri:r,ref:a}=await gn(this,wi).getRepositoryContext(i),s=await gn(this,wi).getMetadata(i.uri);return JSON.stringify({remote:r!=null?r:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const i=Lr(e),r=Lr(n);return i.remote===r.remote&&i.ref===r.ref&&i.sha===r.sha?l.EditSessionIdentityMatch.Complete:i.remote===r.remote&&i.ref===r.ref&&i.sha!==r.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(i){return l.EditSessionIdentityMatch.Partial}}}o(Ir,"EditSessionIdentityProvider"),wi=new WeakMap;function Lr(t){let{remote:e,ref:n,sha:i}=JSON.parse(t);return typeof e=="string"&&e.endsWith(".git")&&(e=e.slice(0,e.length-4)),{remote:e,ref:n,sha:i}}o(Lr,"normalizeEditSessionIdentity");var qa=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Ni=o((t,e,n)=>(qa(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),la=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),ca=o((t,e,n,i)=>(qa(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Pi;class Qa{constructor(e){la(this,Pi,void 0),ca(this,Pi,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await Si(Ni(this,Pi),e);const n=Ni(this,Pi).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Ni(this,Pi).getRepositoryContext(n)})}async getMetadata(e){const n=Ni(this,Pi).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:i,repo:r}=n;return{provider:{id:i.id,name:i.name},repo:r,getRevision:async()=>{const{HEAD:a}=await Ni(this,Pi).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Ni(this,Pi).getRegisteredProvider(e)}getProviderUri(e){return z.getProviderUri(e)}getProviderRootUri(e){return Ni(this,Pi).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Ve.scheme&&Ni(this,Pi).hasProvider(e,n)}getVirtualUri(e){return z.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Ni(this,Pi).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==z.scheme)return!1;await Si(Ni(this,Pi),e);const n=Ni(this,Pi).getProviderRootUri(e);if(n.scheme!=="github")return!1;const i=new lt(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:ge.Debug}),r=await Ni(this,Pi).loadWorkspaceContents(n);return i.stop(),r}}o(Qa,"ExtensionApi"),Pi=new WeakMap;var Za=Object.defineProperty,Aa=Object.getOwnPropertyDescriptor,qr=o((t,e,n,i)=>{for(var r=i>1?void 0:i?Aa(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&Za(e,n,r),r},"fs_decorateClass");const Ra=l.FileSystemError.FileNotFound().code;class kr{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const i=n.map(r=>{switch(r.type){case E.Created:return{type:l.FileChangeType.Created,uri:r.uri};case E.Changed:return{type:l.FileChangeType.Changed,uri:r.uri};case E.Deleted:return{type:l.FileChangeType.Deleted,uri:r.uri}}});setTimeout(()=>this._onDidChangeFile.fire(i),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Ve.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(I.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=z.getOpenUris(this.scheme,e);for(const[r,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>oe(a,s))&&(this.implicitlyWatchedUris.delete(r),n.set(r,a));I.debug(`fs.updateOpenOrWatchedUris(${e.map(r=>r.toString()).join(", ")}): uris=${n.size}`);for(const r of e)n.set(F(r),r);const i=[...n.values()].map(r=>({type:l.FileChangeType.Changed,uri:r}));setTimeout(()=>{I.debug(`fs.updateOpenOrWatchedUris: Firing events=${i.map(r=>r.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(i)},0)}watch(e,n){const i=F(e);this.watchedUris.set(i,e);const r=Si(this.providerService,e).then(()=>this.providerService.watch(z.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(i),(await r).dispose()}}}async stat(e){const n=new lt(`fs.stat(${e.toString()})`);await Si(this.providerService,e);const i=this.providerService.getVirtualRootUri(e),r=i.toString();this.syncedRootUris.has(r)||(this.syncedRootUris.add(r),await this.providerService.fetchOrSync(i));let a;try{if(this.providerService.changeStoreMaybeHasChanges(i,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(F(e),e);return a=await this.providerService.stat(z.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(F(e)),n.stop()}}async readDirectory(e){const n=new lt(`fs.readDirectory(${e.toString()})`);await Si(this.providerService,e),this.implicitlyWatchedUris.set(F(e),e);try{n.logStep("Provider query");let i=await this.providerService.readDirectory(z.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),i=await this.providerService.changeStoreUpdateDirectoryEntries(e,i)),i}finally{n.stop()}}async createDirectory(e){const n=new lt(`fs.createDirectory(${e.toString()})`);await Si(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(i){throw I.error(i,n.context),i}finally{n.stop()}}async readFile(e){const n=new lt(`fs.readFile(${e.toString()})`),i=F(e);let r;await Si(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(i,e);return r=await this.providerService.readFile(z.getProviderUri(e)),r}catch(a){throw a instanceof Hn&&ye.showProviderNotFoundMessage(a),a}finally{r===void 0&&this.implicitlyWatchedUris.delete(i),n.stop()}}async writeFile(e,n,i){const r=new lt(`fs.writeFile(${e.toString()})`,{},n.length,i);await Si(this.providerService,e);try{let a;try{if(a=await this.stat(e),!i.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===Ra){if(!i.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{r.logStep("Provider original query");let s;try{s=await this.providerService.readFile(z.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===Ra)s=new Uint8Array;else throw c}r.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw I.error(s,r.context),s}}catch(a){throw a instanceof Hn&&ye.showProviderNotFoundMessage(a),a}finally{r.stop()}}async delete(e,n){const i=new lt(`fs.delete(${e.toString()})`,{},n);await Si(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(r){throw I.error(r,i.context),r}finally{i.stop()}}async deleteDirectory(e,n){const i=new lt(`fs.deleteDirectory(${e.toString()})`,{},n);try{const r=await this.readDirectory(e);if(r.length!==0){if(!n.recursive&&r.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of r)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(r){throw I.error(r,i.context),r}finally{i.stop()}}async rename(e,n,i){const r=new lt(`fs.rename(${e.toString()} -> ${n.toString()})`,{},i);await Si(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:i.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,i);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async renameDirectory(e,n,i){const r=new lt(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},i);try{await this.copyDirectory(e,n,i),await this.delete(e,{recursive:!0})}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async copy(e,n,i){const r=new lt(`fs.copy(${e.toString()} -> ${n.toString()})`,{},i);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:i.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,i);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw I.error(a,r.context),a}finally{r.stop()}}async copyDirectory(e,n,i){const r=new lt(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},i);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),i):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),i)}catch(a){throw I.error(a,r.context),a}}finally{r.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===Ra)return!1;throw n}}async provideFileSearchResults(e,n,i){var r;const a=new lt(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:ge.Debug});await Si(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:z.getProviderUri(n.folder)},i),s==null?void 0:s.map(c=>z.getVirtualUri(c))}catch(c){throw I.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(r=s==null?void 0:s.length)!=null?r:0} results found`})}}async provideTextSearchResults(e,n,i,r){return await Si(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:z.getProviderUri(n.folder)},{report:a=>i.report({...a,uri:z.getVirtualUri(a.uri)})},r)}}o(kr,"ChangeTrackingFileSystem"),qr([Jn()],kr.prototype,"stat",1),qr([Jn()],kr.prototype,"readDirectory",1),qr([Jn()],kr.prototype,"readFile",1);const ua=o(class{constructor(t){this.providerService=t,this.lock=new Yn("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const i=W.getEffective("uncommittedChangesOnEntry");if(i==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&i==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const h=[u,d].join(`

`),g={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},C={title:l.l10n.t("Don't Show Again")},O=await l.window.showInformationMessage(h,{modal:!0},g,p,C);switch(O==null?void 0:O.title){case g.title:await l.commands.executeCommand("remoteHub.sync");break;case C.title:await W.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){I.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){I.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){I.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const i=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let r,a;(i==null?void 0:i.groups)!==void 0&&(r=Number(i.groups.start),isNaN(r)&&(r=void 0),a=Number(i.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,i.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;r!==void 0&&(u={selection:new l.Range(Number(r)-1,0,a!=null?a:r,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return I.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return I.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){I.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){I.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${F(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?l.Uri.from(i):i);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return I.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:ua.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Ta=ua;Ta.storageSchemaVersion=1;function Yi(){}o(Yi,"Diff"),Yi.prototype={diff:o(function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.callback;typeof i=="function"&&(r=i,i={}),this.options=i;var a=this;function s(A){return r?(setTimeout(function(){r(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,h=c+u,g=[{newPos:-1,components:[]}],p=this.extractCommon(g[0],n,e,0);if(g[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function C(){for(var A=-1*d;A<=d;A+=2){var G=void 0,te=g[A-1],x=g[A+1],ce=(x?x.newPos:0)-A;te&&(g[A-1]=void 0);var be=te&&te.newPos+1<c,De=x&&0<=ce&&ce<u;if(!be&&!De){g[A]=void 0;continue}if(!be||De&&te.newPos<x.newPos?(G=eo(x),a.pushComponent(G.components,void 0,!0)):(G=te,G.newPos++,a.pushComponent(G.components,!0,void 0)),ce=a.extractCommon(G,n,e,A),G.newPos+1>=c&&ce+1>=u)return s(Xa(a,G.components,n,e,a.useLongestToken));g[A]=G}d++}if(o(C,"execEditLength"),r)o(function A(){setTimeout(function(){if(d>h)return r();C()||A()},0)},"exec")();else for(;d<=h;){var O=C();if(O)return O}},"diff"),pushComponent:o(function(e,n,i){var r=e[e.length-1];r&&r.added===n&&r.removed===i?e[e.length-1]={count:r.count+1,added:n,removed:i}:e.push({count:1,added:n,removed:i})},"pushComponent"),extractCommon:o(function(e,n,i,r){for(var a=n.length,s=i.length,c=e.newPos,u=c-r,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],i[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],i=0;i<e.length;i++)e[i]&&n.push(e[i]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function Xa(t,e,n,i,r){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(i.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var g=e[a-1];e[a-1]=e[a],e[a]=g}}else{if(!d.added&&r){var h=n.slice(c,c+d.count);h=h.map(function(C,O){var A=i[u+O];return A.length>C.length?A:C}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(Xa,"buildValues");function eo(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(eo,"clonePath");var po=new Yi;function Ho(t,e,n){return po.diff(t,e,n)}o(Ho,"diffChars");function to(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(to,"generateOptions");var Ma=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,le=/\S/,rt=new Yi;rt.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!le.test(t)&&!le.test(e)},rt.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Ma.test(e[n])&&Ma.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Ct(t,e,n){return n=to(n,{ignoreWhitespace:!0}),rt.diff(t,e,n)}o(Ct,"diffWords");function Ut(t,e,n){return rt.diff(t,e,n)}o(Ut,"diffWordsWithSpace");var vn=new Yi;vn.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var r=n[i];i%2&&!this.options.newlineIsToken?e[e.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),e.push(r))}return e};function En(t,e,n){return vn.diff(t,e,n)}o(En,"diffLines");function An(t,e,n){var i=to(n,{ignoreWhitespace:!0});return vn.diff(t,e,i)}o(An,"diffTrimmedLines");var pi=new Yi;pi.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function _i(t,e,n){return pi.diff(t,e,n)}o(_i,"diffSentences");var mi=new Yi;mi.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Fi(t,e,n){return mi.diff(t,e,n)}o(Fi,"diffCss");function qi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qi=o(function(e){return typeof e},"_typeof"):qi=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),qi(t)}o(qi,"_typeof");function Wn(t){return mo(t)||Ns(t)||Os(t)||Us()}o(Wn,"_toConsumableArray");function mo(t){if(Array.isArray(t))return yo(t)}o(mo,"_arrayWithoutHoles");function Ns(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(Ns,"_iterableToArray");function Os(t,e){if(!!t){if(typeof t=="string")return yo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yo(t,e)}}o(Os,"_unsupportedIterableToArray");function yo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}o(yo,"_arrayLikeToArray");function Us(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(Us,"_nonIterableSpread");var Bs=Object.prototype.toString,da=new Yi;da.useLongestToken=!0,da.tokenize=vn.tokenize,da.castInput=function(t){var e=this.options,n=e.undefinedReplacement,i=e.stringifyReplacer,r=i===void 0?function(a,s){return typeof s=="undefined"?n:s}:i;return typeof t=="string"?t:JSON.stringify(wo(t,null,null,r),r,"  ")},da.equals=function(t,e){return Yi.prototype.equals.call(da,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function $l(t,e,n){return da.diff(t,e,n)}o($l,"diffJson");function wo(t,e,n,i,r){e=e||[],n=n||[],i&&(t=i(r,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(Bs.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=wo(t[a],e,n,i,r);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),qi(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=wo(t[u],e,n,i,u);e.pop(),n.pop()}else s=t;return s}o(wo,"canonicalize");var no=new Yi;no.tokenize=function(t){return t.slice()},no.join=no.removeEmpty=function(t){return t};function Gl(t,e,n){return no.diff(t,e,n)}o(Gl,"diffArrays");function Pa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],r=[],a=0;function s(){var d={};for(r.push(d);a<n.length;){var h=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(h))break;var g=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(h);g&&(d.index=g[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var h=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(h){var g=h[1]==="---"?"old":"new",p=h[2].split("	",2),C=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(C)&&(C=C.substr(1,C.length-2)),d[g+"FileName"]=C,d[g+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,h=n[a++],g=h.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+g[1],oldLines:typeof g[2]=="undefined"?1:+g[2],newStart:+g[3],newLines:typeof g[4]=="undefined"?1:+g[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var C=0,O=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(i[a]||`
`),A==="+"?C++:A==="-"?O++:A===" "&&(C++,O++);else break}if(!C&&p.newLines===1&&(p.newLines=0),!O&&p.oldLines===1&&(p.oldLines=0),e.strict){if(C!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(O!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return r}o(Pa,"parsePatch");function Hs(t,e,n){var i=!0,r=!1,a=!1,s=1;return o(function c(){if(i&&!a){if(r?s++:i=!1,t+s<=n)return s;a=!0}if(!r)return a||(i=!0),e<=t-s?-s++:(r=!0,c())},"iterator")}o(Hs,"distanceIterator");function Wo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Pa(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var i=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(tr,nr,zr,dr){return nr===dr},c=0,u=n.fuzzFactor||0,d=0,h=0,g,p;function C(tr,nr){for(var zr=0;zr<tr.lines.length;zr++){var dr=tr.lines[zr],ga=dr.length>0?dr[0]:" ",uo=dr.length>0?dr.substr(1):dr;if(ga===" "||ga==="-"){if(!s(nr+1,i[nr],ga,uo)&&(c++,c>u))return!1;nr++}}return!0}o(C,"hunkFits");for(var O=0;O<a.length;O++){for(var A=a[O],G=i.length-A.oldLines,te=0,x=h+A.oldStart-1,ce=Hs(x,d,G);te!==void 0;te=ce())if(C(A,x+te)){A.offset=h+=te;break}if(te===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var be=0,De=0;De<a.length;De++){var je=a[De],wt=je.oldStart+je.offset+be-1;be+=je.newLines-je.oldLines;for(var Ze=0;Ze<je.lines.length;Ze++){var xt=je.lines[Ze],Zt=xt.length>0?xt[0]:" ",Bt=xt.length>0?xt.substr(1):xt,Mt=je.linedelimiters[Ze];if(Zt===" ")wt++;else if(Zt==="-")i.splice(wt,1),r.splice(wt,1);else if(Zt==="+")i.splice(wt,0,Bt),r.splice(wt,0,Mt),wt++;else if(Zt==="\\"){var Xt=je.lines[Ze-1]?je.lines[Ze-1][0]:null;Xt==="+"?g=!0:Xt==="-"&&(p=!0)}}}if(g)for(;!i[i.length-1];)i.pop(),r.pop();else p&&(i.push(""),r.push(`
`));for(var Ei=0;Ei<i.length-1;Ei++)i[Ei]=i[Ei]+r[Ei];return i.join("")}o(Wo,"applyPatch");function zl(t,e){typeof t=="string"&&(t=Pa(t));var n=0;function i(){var r=t[n++];if(!r)return e.complete();e.loadFile(r,function(a,s){if(a)return e.complete(a);var c=Wo(s,r,e);e.patched(r,c,function(u){if(u)return e.complete(u);i()})})}o(i,"processIndex"),i()}o(zl,"applyPatches");function Ko(t,e,n,i,r,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=En(n,i,s);c.push({value:"",lines:[]});function u(te){return te.map(function(x){return" "+x})}o(u,"contextLines");for(var d=[],h=0,g=0,p=[],C=1,O=1,A=o(function(x){var ce=c[x],be=ce.lines||ce.value.replace(/\n$/,"").split(`
`);if(ce.lines=be,ce.added||ce.removed){var De;if(!h){var je=c[x-1];h=C,g=O,je&&(p=s.context>0?u(je.lines.slice(-s.context)):[],h-=p.length,g-=p.length)}(De=p).push.apply(De,Wn(be.map(function(Ei){return(ce.added?"+":"-")+Ei}))),ce.added?O+=be.length:C+=be.length}else{if(h)if(be.length<=s.context*2&&x<c.length-2){var wt;(wt=p).push.apply(wt,Wn(u(be)))}else{var Ze,xt=Math.min(be.length,s.context);(Ze=p).push.apply(Ze,Wn(u(be.slice(0,xt))));var Zt={oldStart:h,oldLines:C-h+xt,newStart:g,newLines:O-g+xt,lines:p};if(x>=c.length-2&&be.length<=s.context){var Bt=/\n$/.test(n),Mt=/\n$/.test(i),Xt=be.length==0&&p.length>Zt.oldLines;!Bt&&Xt&&n.length>0&&p.splice(Zt.oldLines,0,"\\ No newline at end of file"),(!Bt&&!Xt||!Mt)&&p.push("\\ No newline at end of file")}d.push(Zt),h=0,g=0,p=[]}C+=be.length,O+=be.length}},"_loop"),G=0;G<c.length;G++)A(G);return{oldFileName:t,newFileName:e,oldHeader:r,newHeader:a,hunks:d}}o(Ko,"structuredPatch");function Ws(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var i=t.hunks[n];i.oldLines===0&&(i.oldStart-=1),i.newLines===0&&(i.newStart-=1),e.push("@@ -"+i.oldStart+","+i.oldLines+" +"+i.newStart+","+i.newLines+" @@"),e.push.apply(e,i.lines)}return e.join(`
`)+`
`}o(Ws,"formatPatch");function Ks(t,e,n,i,r,a,s){return Ws(Ko(t,e,n,i,r,a,s))}o(Ks,"createTwoFilesPatch");function $s(t,e,n,i,r,a){return Ks(t,t,e,n,i,r,a)}o($s,"createPatch");function Gs(t,e){return t.length!==e.length?!1:So(t,e)}o(Gs,"arrayEqual");function So(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(So,"arrayStartsWith");function zs(t){var e=bo(t.lines),n=e.oldLines,i=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,i!==void 0?t.newLines=i:delete t.newLines}o(zs,"calcLineCount");function Jl(t,e,n){t=$o(t,n),e=$o(e,n);var i={};(t.index||e.index)&&(i.index=t.index||e.index),(t.newFileName||e.newFileName)&&(Go(t)?Go(e)?(i.oldFileName=io(i,t.oldFileName,e.oldFileName),i.newFileName=io(i,t.newFileName,e.newFileName),i.oldHeader=io(i,t.oldHeader,e.oldHeader),i.newHeader=io(i,t.newHeader,e.newHeader)):(i.oldFileName=t.oldFileName,i.newFileName=t.newFileName,i.oldHeader=t.oldHeader,i.newHeader=t.newHeader):(i.oldFileName=e.oldFileName||t.oldFileName,i.newFileName=e.newFileName||t.newFileName,i.oldHeader=e.oldHeader||t.oldHeader,i.newHeader=e.newHeader||t.newHeader)),i.hunks=[];for(var r=0,a=0,s=0,c=0;r<t.hunks.length||a<e.hunks.length;){var u=t.hunks[r]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(zo(u,d))i.hunks.push(Jo(u,s)),r++,c+=u.newLines-u.oldLines;else if(zo(d,u))i.hunks.push(Jo(d,c)),a++,s+=d.newLines-d.oldLines;else{var h={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};Js(h,u.oldStart,u.lines,d.oldStart,d.lines),a++,r++,i.hunks.push(h)}}return i}o(Jl,"merge");function $o(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Pa(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Ko(void 0,void 0,e,t)}return t}o($o,"loadPatch");function Go(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(Go,"fileNameChanged");function io(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(io,"selectField");function zo(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(zo,"hunkBefore");function Jo(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(Jo,"cloneHunk");function Js(t,e,n,i,r){var a={offset:e,lines:n,index:0},s={offset:i,lines:r,index:0};for(jo(t,a,s),jo(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))Vs(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,Wn(Qr(a)))}else if(u[0]==="+"&&c[0]===" "){var h;(h=t.lines).push.apply(h,Wn(Qr(s)))}else c[0]==="-"&&u[0]===" "?Vo(t,a,s):u[0]==="-"&&c[0]===" "?Vo(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):Co(t,Qr(a),Qr(s))}Yo(t,a),Yo(t,s),zs(t)}o(Js,"mergeLines");function Vs(t,e,n){var i=Qr(e),r=Qr(n);if(qo(i)&&qo(r)){if(So(i,r)&&Qo(n,i,i.length-r.length)){var a;(a=t.lines).push.apply(a,Wn(i));return}else if(So(r,i)&&Qo(e,r,r.length-i.length)){var s;(s=t.lines).push.apply(s,Wn(r));return}}else if(Gs(i,r)){var c;(c=t.lines).push.apply(c,Wn(i));return}Co(t,i,r)}o(Vs,"mutualChange");function Vo(t,e,n,i){var r=Qr(e),a=js(n,r);if(a.merged){var s;(s=t.lines).push.apply(s,Wn(a.merged))}else Co(t,i?a:r,i?r:a)}o(Vo,"removal");function Co(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(Co,"conflict");function jo(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var i=e.lines[e.index++];t.lines.push(i),e.offset++}}o(jo,"insertLeading");function Yo(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(Yo,"insertTrailing");function Qr(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var i=t.lines[t.index];if(n==="-"&&i[0]==="+"&&(n="+"),n===i[0])e.push(i),t.index++;else break}return e}o(Qr,"collectChange");function js(t,e){for(var n=[],i=[],r=0,a=!1,s=!1;r<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[r];if(u[0]==="+")break;if(a=a||c[0]!==" ",i.push(u),r++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[r]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;r<e.length;)i.push(e[r++]);return{merged:i,changes:n}}o(js,"collectContext");function qo(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(qo,"allRemoves");function Qo(t,e,n){for(var i=0;i<n;i++){var r=e[e.length-n+i].substr(1);if(t.lines[t.index+i]!==" "+r)return!1}return t.index+=n,!0}o(Qo,"skipRemoveSuperset");function bo(t){var e=0,n=0;return t.forEach(function(i){if(typeof i!="string"){var r=bo(i.mine),a=bo(i.theirs);e!==void 0&&(r.oldLines===a.oldLines?e+=r.oldLines:e=void 0),n!==void 0&&(r.newLines===a.newLines?n+=r.newLines:n=void 0)}else n!==void 0&&(i[0]==="+"||i[0]===" ")&&n++,e!==void 0&&(i[0]==="-"||i[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(bo,"calcOldNewLineCount");function Vl(t){for(var e=[],n,i,r=0;r<t.length;r++)n=t[r],n.added?i=1:n.removed?i=-1:i=0,e.push([i,n.value]);return e}o(Vl,"convertChangesToDMP");function jl(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];i.added?e.push("<ins>"):i.removed&&e.push("<del>"),e.push(Ys(i.value)),i.added?e.push("</ins>"):i.removed&&e.push("</del>")}return e.join("")}o(jl,"convertChangesToXML");function Ys(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Ys,"escapeHTML");var Zo=/[^a-zA-Z0-9]/,Xo=/\s/,es=/[\r\n]/,qs=/\n\r?\n$/,Qs=/^\r?\n\r?\n/,Qe;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(Qe||(Qe={}));function Zs(t,e){return t<e?t:e}o(Zs,"min");function Xs(t,e){return t>e?t:e}o(Xs,"max");var $i=At,Ia=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var i=["@@ -"+e+" +"+n+` @@
`],r,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case Qe.DIFF_INSERT:r="+";break;case Qe.DIFF_DELETE:r="-";break;case Qe.DIFF_EQUAL:r=" ";break}i[a+1]=r+encodeURI(this.diffs[a][1])+`
`}return i.join("").replace(/%20/g," ")},t}(),el=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,i,r){typeof r=="undefined"&&(this.diffTimeout<=0?r=Number.MAX_VALUE:r=Date.now()+this.diffTimeout*1e3);var a=r;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[Qe.DIFF_EQUAL,e]]:[];typeof i=="undefined"&&(i=!0);var s=i,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var h=this.diff_compute_(e,n,s,a);return u&&h.unshift([Qe.DIFF_EQUAL,u]),d&&h.push([Qe.DIFF_EQUAL,d]),this.diff_cleanupMerge(h),h},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var i=0,r=$i.min(e.length,n.length),a=r,s=0;i<a;)e.substring(s,a)===n.substring(s,a)?(i=a,s=i):r=a,a=Math.floor((r-i)/2+i);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var i=0,r=$i.min(e.length,n.length),a=r,s=0;i<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(i=a,s=i):r=a,a=Math.floor((r-i)/2+i);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,i=[],r=0,a=null,s=0,c=0,u=0,d=0,h=0;s<e.length;)e[s][0]===Qe.DIFF_EQUAL?(i[r++]=s,c=d,u=h,d=0,h=0,a=e[s][1]):(e[s][0]===Qe.DIFF_INSERT?d+=e[s][1].length:h+=e[s][1].length,a&&a.length<=$i.max(c,u)&&a.length<=$i.max(d,h)&&(e.splice(i[r-1],0,[Qe.DIFF_DELETE,a]),e[i[r-1]+1][0]=Qe.DIFF_INSERT,r--,r--,s=r>0?i[r-1]:-1,c=0,u=0,d=0,h=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===Qe.DIFF_DELETE&&e[s][0]===Qe.DIFF_INSERT){var g=e[s-1][1],p=e[s][1],C=this.diff_commonOverlap_(g,p),O=this.diff_commonOverlap_(p,g);C>=O?(C>=g.length/2||C>=p.length/2)&&(e.splice(s,0,[Qe.DIFF_EQUAL,p.substring(0,C)]),e[s-1][1]=g.substring(0,g.length-C),e[s+1][1]=p.substring(C),s++):(O>=g.length/2||O>=p.length/2)&&(e.splice(s,0,[Qe.DIFF_EQUAL,g.substring(0,O)]),e[s-1][0]=Qe.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-O),e[s+1][0]=Qe.DIFF_DELETE,e[s+1][1]=g.substring(O),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===Qe.DIFF_EQUAL&&e[n+1][0]===Qe.DIFF_EQUAL){var i=e[n-1][1],r=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(i,r);if(s){var c=r.substring(r.length-s);i=i.substring(0,i.length-s),r=c+r.substring(0,r.length-s),a=c+a}for(var u=i,d=r,h=a,g=this.diff_cleanupSemanticScore_(i,r)+this.diff_cleanupSemanticScore_(r,a);r.charAt(0)===a.charAt(0);){i+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(i,r)+this.diff_cleanupSemanticScore_(r,a);p>=g&&(g=p,u=i,d=r,h=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,h?e[n+1][1]=h:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,i=[],r=0,a=null,s=0,c=!1,u=!1,d=!1,h=!1;s<e.length;)e[s][0]===Qe.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||h)?(i[r++]=s,c=d,u=h,a=e[s][1]):(r=0,a=null),d=h=!1):(e[s][0]===Qe.DIFF_DELETE?h=!0:d=!0,a&&(c&&u&&d&&h||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(h)===3)&&(e.splice(i[r-1],0,[Qe.DIFF_DELETE,a]),e[i[r-1]+1][0]=Qe.DIFF_INSERT,r--,a=null,c&&u?(d=h=!0,r=0):(r--,s=r>0?i[r-1]:-1,d=h=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([Qe.DIFF_EQUAL,""]);for(var n=0,i=0,r=0,a="",s="",c;n<e.length;)switch(e[n][0]){case Qe.DIFF_INSERT:r++,s+=e[n][1],n++;break;case Qe.DIFF_DELETE:i++,a+=e[n][1],n++;break;case Qe.DIFF_EQUAL:i+r>1?(i!==0&&r!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-i-r>0&&e[n-i-r-1][0]===Qe.DIFF_EQUAL?e[n-i-r-1][1]+=s.substring(0,c):(e.splice(0,0,[Qe.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=i+r,e.splice(n,i+r),a.length&&(e.splice(n,0,[Qe.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[Qe.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===Qe.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=0,i=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===Qe.DIFF_EQUAL&&e[n+1][0]===Qe.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var i=0,r=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==Qe.DIFF_INSERT&&(i+=e[c][1].length),e[c][0]!==Qe.DIFF_DELETE&&(r+=e[c][1].length),!(i>n));c++)a=i,s=r;return e.length!==c&&e[c][0]===Qe.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],i=/&/g,r=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],h=d.replace(i,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case Qe.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case Qe.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+h+"</del>";break;case Qe.DIFF_EQUAL:n[c]="<span>"+h+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],i=0;i<e.length;i++)e[i][0]!==Qe.DIFF_INSERT&&(n[i]=e[i][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],i=0;i<e.length;i++)e[i][0]!==Qe.DIFF_DELETE&&(n[i]=e[i][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,i=0,r=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case Qe.DIFF_INSERT:i+=c.length;break;case Qe.DIFF_DELETE:r+=c.length;break;case Qe.DIFF_EQUAL:n+=$i.max(i,r),i=0,r=0;break}}return n+=$i.max(i,r),n},t.prototype.diff_toDelta=function(e){for(var n=[],i=0;i<e.length;i++)switch(e[i][0]){case Qe.DIFF_INSERT:n[i]="+"+encodeURI(e[i][1]);break;case Qe.DIFF_DELETE:n[i]="-"+e[i][1].length;break;case Qe.DIFF_EQUAL:n[i]="="+e[i][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var i=[],r=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{i[r++]=[Qe.DIFF_INSERT,decodeURI(u)]}catch(g){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=e.substring(a,a+=d);s[c].charAt(0)==="="?i[r++]=[Qe.DIFF_EQUAL,h]:i[r++]=[Qe.DIFF_DELETE,h];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return i},t.prototype.diff_linesToChars=function(e,n){var i=[],r={};i[0]="";var a=this.diff_linesToCharsMunge_(e,i,r,4e4),s=this.diff_linesToCharsMunge_(n,i,r,65535);return{chars1:a,chars2:s,lineArray:i}},t.prototype.diff_charsToLines=function(e,n){for(var i=0;i<e.length;i++){for(var r=e[i][1],a=[],s=0;s<r.length;s++)a[s]=n[r.charCodeAt(s)];e[i][1]=a.join("")}},t.prototype.match_main=function(e,n,i){if(e==null||n==null||i==null)throw new Error("Null input. (match_main)");return i=$i.max(0,$i.min(i,e.length)),e===n?0:e.length?e.substring(i,i+n.length)===n?i:this.match_bitap_(e,n,i):-1},t.prototype.patch_make=function(e,n,i){var r,a;if(typeof e=="string"&&typeof n=="string"&&typeof i=="undefined")r=e,a=this.diff_main(r,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof i=="undefined")a=e,r=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof i=="undefined")r=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&i&&typeof i=="object")r=e,a=i;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ia,u=0,d=0,h=0,g=r,p=r,C=0;C<a.length;C++){var O=a[C][0],A=a[C][1];switch(!u&&O!==Qe.DIFF_EQUAL&&(c.start1=d,c.start2=h),O){case Qe.DIFF_INSERT:c.diffs[u++]=a[C],c.length2+=A.length,p=p.substring(0,h)+A+p.substring(h);break;case Qe.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[C],p=p.substring(0,h)+p.substring(h+A.length);break;case Qe.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==C+1?(c.diffs[u++]=a[C],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,g),s.push(c),c=new Ia,u=0,g=p,d=h);break}O!==Qe.DIFF_INSERT&&(d+=A.length),O!==Qe.DIFF_DELETE&&(h+=A.length)}return u&&(this.patch_addContext_(c,g),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){for(var r=e[i],a=new Ia,s=0;s<r.diffs.length;s++)a.diffs[s]=[r.diffs[s][0],r.diffs[s][1]];a.start1=r.start1,a.start2=r.start2,a.length1=r.length1,a.length2=r.length2,n[i]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);n=i+n+i,this.patch_splitMax(e);for(var r=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+r,u=this.diff_text1(e[s].diffs),d=void 0,h=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(h=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(h===-1||d>=h)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,r-=e[s].length2-e[s].length1;else{a[s]=!0,r=d-c;var g=void 0;if(h===-1?g=n.substring(d,d+u.length):g=n.substring(d,h+this.matchMaxBits),u===g)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,g,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var C=0,O=0,A=0;A<e[s].diffs.length;A++){var G=e[s].diffs[A];G[0]!==Qe.DIFF_EQUAL&&(O=this.diff_xIndex(p,C)),G[0]===Qe.DIFF_INSERT?n=n.substring(0,d+O)+G[1]+n.substring(d+O):G[0]===Qe.DIFF_DELETE&&(n=n.substring(0,d+O)+n.substring(d+this.diff_xIndex(p,C+G[1].length))),G[0]!==Qe.DIFF_DELETE&&(C+=G[1].length)}}}}}return n=n.substring(i.length,n.length-i.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,i="",r=1;r<=n;r++)i+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=n,e[r].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==Qe.DIFF_EQUAL)s.unshift([Qe.DIFF_EQUAL,i]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=i.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==Qe.DIFF_EQUAL)s.push([Qe.DIFF_EQUAL,i]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=i.substring(0,c),a.length1+=c,a.length2+=c}return i},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=n)){var r=e[i];e.splice(i--,1);for(var a=r.start1,s=r.start2,c="";r.diffs.length!==0;){var u=new Ia,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([Qe.DIFF_EQUAL,c]));r.diffs.length!==0&&u.length1<n-this.patchMargin;){var h=r.diffs[0][0],g=r.diffs[0][1];h===Qe.DIFF_INSERT?(u.length2+=g.length,s+=g.length,u.diffs.push(r.diffs.shift()),d=!1):h===Qe.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===Qe.DIFF_EQUAL&&g.length>2*n?(u.length1+=g.length,a+=g.length,d=!1,u.diffs.push([h,g]),r.diffs.shift()):(g=g.substring(0,n-u.length1-this.patchMargin),u.length1+=g.length,a+=g.length,h===Qe.DIFF_EQUAL?(u.length2+=g.length,s+=g.length):d=!1,u.diffs.push([h,g]),g===r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(g.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(r.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===Qe.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([Qe.DIFF_EQUAL,p])),d||e.splice(++i,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],i=0;i<e.length;i++)n[i]=e[i];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var i=e.split(`
`),r=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var s=i[r].match(a);if(!s)throw new Error("Invalid patch string: "+i[r]);var c=new Ia;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),r++;for(var u=void 0,d=void 0,h=void 0;r<i.length;){u=i[r].charAt(0),h=i[r].substring(1);try{d=decodeURI(h)}catch(g){throw new Error("Illegal escape in patch_fromText: "+h)}if(u==="-")c.diffs.push([Qe.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([Qe.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([Qe.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}r++}}return n},t.prototype.diff_compute_=function(e,n,i,r){var a;if(!e)return[[Qe.DIFF_INSERT,n]];if(!n)return[[Qe.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[Qe.DIFF_INSERT,s.substring(0,u)],[Qe.DIFF_EQUAL,c],[Qe.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=Qe.DIFF_DELETE,a[2][0]=Qe.DIFF_DELETE),a;if(c.length===1)return[[Qe.DIFF_DELETE,e],[Qe.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var h=d[0],g=d[1],p=d[2],C=d[3],O=d[4],A=this.diff_main(h,p,i,r),G=this.diff_main(g,C,i,r);return A.concat([[Qe.DIFF_EQUAL,O]],G)}return i&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,r):this.diff_bisect_(e,n,r)},t.prototype.diff_lineMode_=function(e,n,i){var r=this.diff_linesToChars(e,n);e=r.chars1,n=r.chars2;var a=r.lineArray,s=this.diff_main(e,n,!1,i);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([Qe.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,h="",g="";c<s.length;){switch(s[c][0]){case Qe.DIFF_INSERT:d++,g+=s[c][1];break;case Qe.DIFF_DELETE:u++,h+=s[c][1];break;case Qe.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(h,g,!1,i),C=p.length-1;C>=0;C--)s.splice(c,0,p[C]);c=c+p.length}d=0,u=0,h="",g="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,i){for(var r=e.length,a=n.length,s=Math.ceil((r+a)/2),c=s,u=2*s,d=new Array(u),h=new Array(u),g=0;g<u;g++)d[g]=-1,h[g]=-1;d[c+1]=0,h[c+1]=0;for(var p=r-a,C=p%2!=0,O=0,A=0,G=0,te=0,x=0;x<s&&!(Date.now()>i);x++){for(var ce=-x+O;ce<=x-A;ce+=2){var be=c+ce,De=void 0;ce===-x||ce!==x&&d[be-1]<d[be+1]?De=d[be+1]:De=d[be-1]+1;for(var je=De-ce;De<r&&je<a&&e.charAt(De)===n.charAt(je);)De++,je++;if(d[be]=De,De>r)A+=2;else if(je>a)O+=2;else if(C){var wt=c+p-ce;if(wt>=0&&wt<u&&h[wt]!==-1){var Ze=r-h[wt];if(De>=Ze)return this.diff_bisectSplit_(e,n,De,je,i)}}}for(var xt=-x+G;xt<=x-te;xt+=2){var wt=c+xt,Ze=void 0;xt===-x||xt!==x&&h[wt-1]<h[wt+1]?Ze=h[wt+1]:Ze=h[wt-1]+1;for(var Zt=Ze-xt;Ze<r&&Zt<a&&e.charAt(r-Ze-1)===n.charAt(a-Zt-1);)Ze++,Zt++;if(h[wt]=Ze,Ze>r)te+=2;else if(Zt>a)G+=2;else if(!C){var be=c+p-xt;if(be>=0&&be<u&&d[be]!==-1){var De=d[be],je=c+De-be;if(Ze=r-Ze,De>=Ze)return this.diff_bisectSplit_(e,n,De,je,i)}}}}return[[Qe.DIFF_DELETE,e],[Qe.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,i,r,a){var s=e.substring(0,i),c=n.substring(0,r),u=e.substring(i),d=n.substring(r),h=this.diff_main(s,c,!1,a),g=this.diff_main(u,d,!1,a);return h.concat(g)},t.prototype.diff_linesToCharsMunge_=function(e,n,i,r){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(i.hasOwnProperty?i.hasOwnProperty(d):i[d]!==void 0)?a+=String.fromCharCode(i[d]):(u===r&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),i[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var i=e.length,r=n.length;if(i===0||r===0)return 0;i>r?e=e.substring(i-r):i<r&&(n=n.substring(0,i));var a=$i.min(i,r);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var i=e.length>n.length?e:n,r=e.length>n.length?n:e;if(i.length<4||r.length*2<i.length)return null;var a=this.diff_halfMatchI_(i,r,Math.ceil(i.length/4)),s=this.diff_halfMatchI_(i,r,Math.ceil(i.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,h,g,p=c[4];return e.length>n.length?(u=c[0],d=c[1],h=c[2],g=c[3]):(h=c[0],g=c[1],u=c[2],d=c[3]),[u,d,h,g,p]},t.prototype.diff_halfMatchI_=function(e,n,i){for(var r=e.substring(i,i+Math.floor(e.length/4)),a="",s,c,u,d,h=n.indexOf(r,0);h!==-1;){var g=this.diff_commonPrefix(e.substring(i),n.substring(h)),p=this.diff_commonSuffix(e.substring(0,i),n.substring(0,h));a.length<p+g&&(a=n.substring(h-p,h)+n.substring(h,h+g),s=e.substring(0,i-p),c=e.substring(i+g),u=n.substring(0,h-p),d=n.substring(h+g)),h=n.indexOf(r,h+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),r=n.charAt(0),a=i.match(Zo),s=r.match(Zo),c=a&&i.match(Xo),u=s&&r.match(Xo),d=c&&i.match(es),h=u&&r.match(es),g=d&&e.match(qs),p=h&&n.match(Qs);return g||p?5:d||h?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,i){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var r=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,i);s!==-1&&(a=$i.min(this.match_bitapScore_(0,s,n,i),a),s=e.lastIndexOf(n,i+n.length),s!==-1&&(a=$i.min(this.match_bitapScore_(0,s,n,i),a)));var c=1<<n.length-1;s=-1;for(var u,d,h=n.length+e.length,g,p=0;p<n.length;p++){for(u=0,d=h;u<d;)this.match_bitapScore_(p,i+d,n,i)<=a?u=d:h=d,d=Math.floor((h-u)/2+u);h=d;var C=$i.max(1,i-d+1),O=$i.min(i+d,e.length)+n.length,A=Array(O+2);A[O+1]=(1<<p)-1;for(var G=O;G>=C;G--){var te=r[e.charAt(G-1)];if(p===0?A[G]=(A[G+1]<<1|1)&te:A[G]=(A[G+1]<<1|1)&te|((g[G+1]|g[G])<<1|1)|g[G+1],A[G]&c){var x=this.match_bitapScore_(p,G-1,n,i);if(x<=a)if(a=x,s=G-1,s>i)C=$i.max(1,2*i-s);else break}}if(this.match_bitapScore_(p+1,i,n,i)>a)break;g=A}return s},t.prototype.match_bitapScore_=function(e,n,i,r){var a=e/i.length,s=Math.abs(r-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},i=0;i<e.length;i++)n[e.charAt(i)]=0;for(var i=0;i<e.length;i++)n[e.charAt(i)]|=1<<e.length-i-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),r=0;n.indexOf(i)!==n.lastIndexOf(i)&&i.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)r+=this.patchMargin,i=n.substring(e.start2-r,e.start2+e.length1+r);r+=this.patchMargin;var a=n.substring(e.start2-r,e.start2);a&&e.diffs.unshift([Qe.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+r);s&&e.diffs.push([Qe.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function _o(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let r=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=r[0];for(let h=0;h<c.length;h++){const g=c[h];let p;for(p=u;p<r.length&&!(r[p].buffer2index<g&&(p===r.length-1||r[p+1].buffer2index>g));p++);if(p<r.length){const C={buffer1index:a,buffer2index:g,chain:r[p]};if(u===r.length?r.push(d):r[u]=d,u=p+1,d=C,u===r.length)break}}r[u]=d}return r[r.length-1]}o(_o,"LCS");function tl(t,e){const n=_o(t,e);let i=[],r=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),i.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--r>u.buffer1index;)d.buffer1.push(t[r]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),i.push(d)),r>=0&&s.common.push(t[r])}return c(),i.reverse(),i}o(tl,"diffComm");function ts(t,e){const n=_o(t,e);let i=[],r=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=r-s.buffer1index-1,u=a-s.buffer2index-1;r=s.buffer1index,a=s.buffer2index,(c||u)&&i.push({buffer1:[r+1,c],buffer1Content:t.slice(r+1,r+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return i.reverse(),i}o(ts,"diffIndices");function Yl(t,e){const n=_o(t,e);let i=[],r=t.length,a=e.length;function s(c,u,d){let h=[];for(let g=0;g<d;g++)h.push(c[u+g]);return{offset:u,length:d,chunk:h}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=r-c.buffer1index-1,d=a-c.buffer2index-1;r=c.buffer1index,a=c.buffer2index,(u||d)&&i.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return i.reverse(),i}o(Yl,"diffPatch");function nl(t,e,n){let i=[];function r(u,d){i.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(r,"addHunk"),ts(e,t).forEach(u=>r(u,"a")),ts(e,n).forEach(u=>r(u,"b")),i.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");i.length;){let u=i.shift(),d=u.oStart,h=u.oStart+u.oLength,g=[u];for(c(d);i.length;){const p=i[0],C=p.oStart;if(C>h)break;h=Math.max(h,C+p.oLength),g.push(i.shift())}if(g.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;g.length;){u=g.shift();const x=u.oStart,ce=x+u.oLength,be=u.abStart,De=be+u.abLength;let je=p[u.ab];je[0]=Math.min(be,je[0]),je[1]=Math.max(De,je[1]),je[2]=Math.min(x,je[2]),je[3]=Math.max(ce,je[3])}const C=p.a[0]+(d-p.a[2]),O=p.a[1]+(h-p.a[3]),A=p.b[0]+(d-p.b[2]),G=p.b[1]+(h-p.b[3]);let te={stable:!1,aStart:C,aLength:O-C,aContent:t.slice(C,O),oStart:d,oLength:h-d,oContent:e.slice(d,h),bStart:A,bLength:G-A,bContent:n.slice(A,G)};a.push(te)}s=h}return c(e.length),a}o(nl,"diff3MergeRegions");function Eo(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},i);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(i.stringSeparator)),s&&(e=e.split(i.stringSeparator)),c&&(n=n.split(i.stringSeparator));let u=[];const d=nl(t,e,n);let h=[];function g(){h.length&&u.push({ok:h}),h=[]}o(g,"flushOk");function p(C,O){if(C.length!==O.length)return!1;for(let A=0;A<C.length;A++)if(C[A]!==O[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(C=>{C.stable?h.push(...C.bufferContent):i.excludeFalseConflicts&&p(C.aContent,C.bContent)?h.push(...C.aContent):(g(),u.push({conflict:{a:C.aContent,aIndex:C.aStart,o:C.oContent,oIndex:C.oStart,b:C.bContent,bIndex:C.bStart}}))}),g(),u}o(Eo,"diff3Merge");function ql(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},i);const a=Eo(t,e,n,i);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${i.label.a?` ${i.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${i.label.o?` ${i.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${i.label.b?` ${i.label.b}`:""}`))}),{conflict:s,result:c}}o(ql,"mergeDiff3");function il(t,e,n,i){i=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},i);const a=Eo(t,e,n,i);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(il,"node_diff3_merge");function Ql(t,e,n,i){i=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},i);const a=Eo(t,e,n,i);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const h=tl(d.conflict.a,d.conflict.b);for(let g=0;g<h.length;g++){let p=h[g];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Ql,"mergeDigIn");function Zl(t,e){let n=[],i=0;function r(a){for(;i<a;)n.push(t[i]),i++}o(r,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];r(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);i+=s.buffer1.length}return r(t.length),n}o(Zl,"patch");function Xl(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Xl,"stripPatch");function ec(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(ec,"invertPatch");const Do=new el;Do.diffTimeout=0;function ns(t,e,n){return W.get("experimental.useDiffMatchPatch")===!0?Do.patch_toText(Do.patch_make(e,n)):$s(t,e,n)}o(ns,"diffs_createPatch");function is(t,e,n,i){const r=`diff --git a/${t} b/${t}`;switch(i){case"modify":return ns(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,h=[];for(let g=0;g<d;g+=1)(g<c.length-1||g===c.length-1&&c[g]!=="")&&h.push("+"),h.push(c[g]),g<u.length&&h.push(u[g]);return n=h.join(""),`${r}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${r}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(is,"createPatch2");function rs(t,e,n){return Wo(t,e,n)}o(rs,"diffs_applyPatch");function rl(t,e){const n=[];for(const i of Pa(t,e))n.push({...i,oldFileName:i.newFileName,oldHeader:i.newHeader,newFileName:i.oldFileName,newHeader:i.oldHeader,hunks:i.hunks.map(r=>({...r,oldLines:r.newLines,oldStart:r.newStart,newLines:r.oldLines,newStart:r.oldStart,lines:r.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(i);return n}o(rl,"reversePatch");function as(t,e,n,i){let r=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(h=>h===`\r
`).length;r=d>a.length-d?`\r
`:`
`}const s=il(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${i}`);return{conflicts:u,mergedContent:c.join(r)}}o(as,"diffs_merge");var al=Object.defineProperty,ol=Object.getOwnPropertyDescriptor,sl=o((t,e,n,i)=>{for(var r=i>1?void 0:i?ol(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&al(e,n,r),r},"changeStore_decorateClass");const ll=l.FileSystemError.FileNotFound().code,os=`===================================================================
`,br=new TextDecoder,cl=new TextEncoder;function ul(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o(ul,"isOperation");function ro(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(ro,"toEvent");const La=o(class{constructor(t,e,n,i,r,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=i,this.workspaceId=r,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new qn,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(i){const r=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${i.toString(!0)}

${this.toStorage(await this.getWorkingOperations(i))}`});return void l.window.showTextDocument(r)}if(o(n,"exportCore"),t===void 0)for(const i of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,i.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new lt("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const i of(t=l.workspace.workspaceFolders)!=null?t:[])i.uri.scheme===z.scheme&&await this.hasChanges(i.uri)&&n.push(i.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(t),async()=>{const r=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!r.some(u=>u.staged));for(const u of r){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===E.Created&&u.fileType===l.FileType.Directory&&(r.some(h=>Te(h.uri,u.uri))||(d={type:E.Deleted,rootUri:t,uri:u.uri})),i.push(d!=null?d:ro(u,t)),u.type===E.Created){let h=u.uri;for(;;){const{parent:g}=this.findParent(h,r,p=>p.type===E.Created);if(g){a.push(g),h=g.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(i.push(ro(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),i.length!==0&&this._onDidChange.fire(i)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>this.discardCore(e,t,i),n),i.length!==0&&this._onDidChange.fire(i)}async discardCore(t,e,n){I.debug(`ChangeStore.discardCore(${e.toString()})`);let i=await this.getWorkingOperations(t);if(i.length===0)return;const r=_e(e),a=i.findIndex(u=>_e(u.uri)===r);if(a===-1)return;const[s]=i.splice(a,1);let c;switch(s.type){case E.Created:c=E.Deleted;break;case E.Deleted:c=E.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===E.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:h}=this.findNewParentWithOnlyChild(u,i);if(d){i.splice(h,1),n.push({type:E.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===E.Deleted){let u=s.uri;const d=this.findDeletedParents(u,i);let h=[...i];d.forEach(({parent:g,parentIndex:p})=>{h[p]=void 0,n.push({type:E.Created,rootUri:t,uri:g.uri})}),i=h.filter(g=>g!==void 0)}await this.saveWorkingOperations(t,i),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const i=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;I.log(i);const r=[];await this.lock.synchronizeWrite(F(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let h;switch(d.type){case E.Created:h=E.Deleted;break;case E.Deleted:h=E.Created;break;default:h=d.type;break}if(r.push({type:h,rootUri:t,uri:d.uri}),d.type===E.Created){let g=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(g,a);if(p){s.push(p),g=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(r.push({type:E.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},i),r.length!==0&&this._onDidChange.fire(r)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);r!==void 0&&await this.stageCore(e,t,r,i,a)},n),i.length!==0&&this._onDidChange.fire(i)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;I.log(e);const n=[];await this.lock.synchronizeWrite(F(t),async()=>{const i=(await this.getWorkingOperations(t)).filter(r=>!r.staged);if(i.length!==0)for(const r of i){const{index:a}=await this.getWorkingOperation(r.uri,t);if(!await this.stageCore(t,r.uri,r,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,i,r){if(n.conflicts){if(!n.conflicts.status.includes(E.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",fe(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case E.Changed:switch(n.type){case E.Created:return!1;case E.Changed:return await this.spliceOperation(e,r,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0;case E.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,fe(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,i),!0):u===c?(await this.spliceOperation(e,r,{...n,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0):!1}case E.Created:switch(n.type){case E.Changed:case E.Deleted:return!1;case E.Created:return await this.spliceOperation(e,r,{...n,type:E.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},i),!0}case E.Deleted:switch(n.type){case E.Created:case E.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,fe(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,r,{...n,type:E.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},i),!0):u===c?(await this.discardCore(t,e,i),!0):!1}case E.Deleted:return await this.discardCore(t,e,i),!0}}}return await this.spliceOperation(e,r,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},i),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;I.log(n);const i=[];await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);r!==void 0&&await this.spliceOperation(t,a,{...r,staged:!1,timestamp:Date.now()},i)},n),i.length!==0&&this._onDidChange.fire(i)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;I.log(e);const n=[];await this.lock.synchronizeWrite(F(t),async()=>{const i=(await this.getWorkingOperations(t)).map(r=>({...r,staged:!1,timestamp:Date.now()}));i.length!==0&&(await this.saveWorkingOperations(t,i),n.push(...i.map(r=>ro(r,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=F(t),i=this.cache.get(n);return i!==void 0?i.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const i=F(t),r=this.cache.get(i);if(r===void 0)return;if(r.length===0)return!1;if(e===void 0)return!0;const a=_e(e);return r.some(s=>_e(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(F(n),async()=>{const{operation:i}=await this.getWorkingOperation(t,n);return i},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(F(t),async()=>{let i=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:r,predicate:a}=e;i=i.filter(s=>{var c;return(!r||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return i},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(F(t),async()=>{var i,r;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((r=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,c))!=null?r:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=F(e),i=this.cache.get(n);if((i==null?void 0:i.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const r=br.decode(await this.getWorkingContent(e,t));if(r!==void 0)return r;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return i.conflicts!==void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return i.staged&&i.conflicts===void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(F(t),async()=>(await this.getWorkingOperations(t)).filter(i=>{var r,a;return!i.staged&&i.conflicts===void 0&&((a=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,i))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,i){var r;let a;ul(n)?a=n:i=i!=null?i:n,I.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,i==null?void 0:i.save);const s=this.getScopedChangeStore(e.workspaceId),c=(r=e.patch)!=null?r:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...i,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return br.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,h)=>{try{const g=z.getProviderUri(u),p=br.decode(await l.workspace.fs.readFile(g)),C=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),O=br.decode(await l.workspace.fs.readFile(C)),A=await this.providerService.getMetadata(C);return{...as(h,p,O,A.HEAD.sha),baseUri:g,incomingUri:C}}catch(g){throw new Error(`Unable to apply patch to ${d}: ${String(g)}`)}}})}async applyPatch(t,e,n){if(I.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const i=`ChangeStore.applyPatchCore(${t.toString()})`;I.debug(i,n==null?void 0:n.save);const r=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var C;const O=F(p),A=l.workspace.textDocuments.find(G=>F(G.uri)===O);return(C=A==null?void 0:A.getText())!=null?C:br.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const C=await l.workspace.fs.stat(p);return Boolean(C)}catch{return!1}}o(u,"exists");async function d(p,C,O){let A=rs("",O,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${C}`);A=await n.getIncomingContent(C)}r.createFile(p,{overwrite:!0}),r.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function h(p,C,O,A){const G=await c(p);let te=rs(G,O,{fuzzFactor:1});if(te===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${C}; Resulted in conflicts`);const x={title:l.l10n.t("Merge")},ce={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,C),{modal:!0},x,ce)!==x)return;const De=await n.merge(p,C,G);te=De.mergedContent,De.conflicts&&s.set(F(p),{type:A,baseUri:De.baseUri,incomingUri:De.incomingUri})}r.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),te)}o(h,"applyModification");const g=(n==null?void 0:n.reverse)?rl(e,{}):Pa(e,{});for(const p of g)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const C=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,O=this.providerService.createRelativeVirtualUri(t,C);a.push(F(O)),!await u(O)?await d(O,C,p):await h(O,C,p,E.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const C=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,O=this.providerService.createRelativeVirtualUri(t,C);await u(O)&&r.deleteFile(O)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const C=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(F(C)),!await u(C)?await d(C,p.newFileName,p):await h(C,p.newFileName,p,E.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(r),n.save&&a.length)for(const p of a){const C=l.workspace.textDocuments.find(O=>F(O.uri)===p);await(C==null?void 0:C.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(F(t),async()=>{const C=await this.getWorkingOperations(t);if(C.length===0)return;let O=-1;for(const A of C){O++;const G=s.get(F(A.uri));G!==void 0&&await this.spliceOperation(A.uri,O,{...A,conflicts:{baseUri:G.baseUri,incomingUri:G.incomingUri,status:[A.type,G.type]},timestamp:Date.now()},p)}},i),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){I.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(I.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:i}=await this.getWorkingOperation(e,t);if(i===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&i.staged?"":await this.createPatchCore(t,i)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),i=`diff --git a/${n} b/${n}`;if(e.type===E.Created){let u=await this.getContent(e.uri);return is(n,"",u,"add")}if(e.type===E.Deleted){let u=br.decode(await l.workspace.fs.readFile(z.getProviderUri(e.uri)));return is(n,u,"","delete")}const r=await this.getContent(e.uri),a=br.decode(await l.workspace.fs.readFile(z.getProviderUri(e.uri))),s=ns(n,a,r),c=s.indexOf(os);return`${i}
${s.substr(c+os.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const i=`ChangeStore.keep(${t.toString()})`;I.log(i,e);const r=[];await this.lock.synchronizeWrite(F(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case E.Changed:switch(a.type){case E.Changed:case E.Created:case E.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break}break;case E.Created:switch(a.type){case E.Changed:case E.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break;case E.Created:await this.spliceOperation(t,s,{...a,type:E.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},r);break}break;case E.Deleted:switch(a.type){case E.Deleted:await this.discardCore(n,t,r);break;case E.Changed:await this.spliceOperation(t,s,{...a,type:E.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);break;case E.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},r);break}break}return}if(e===void 0)return;switch(e.type){case E.Changed:switch(a.type){case E.Deleted:await this.spliceOperation(t,s,{...a,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);return;case E.Created:break;case E.Changed:break}break;case E.Created:switch(a.type){case E.Changed:case E.Deleted:return;case E.Created:break}break;case E.Deleted:switch(a.type){case E.Deleted:return this.discardCore(n,t,r);case E.Changed:await this.spliceOperation(t,s,{...a,type:E.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},r);return;case E.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:E.Changed,originalHash:c!==void 0?await ht(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},r)},i),r.length!==0&&this._onDidChange.fire(r)}async merge(t,e,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const r=`ChangeStore.merge(${t.toString()})`;I.log(r,e,n);const a=[];await this.lock.synchronizeWrite(F(i),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,i);if(s===void 0)return;switch(e.type){case E.Changed:switch(s.type){case E.Deleted:await this.spliceOperation(t,c,{...s,type:E.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case E.Created:break;case E.Changed:break}break;case E.Created:switch(s.type){case E.Deleted:case E.Changed:return;case E.Created:const C=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:C!==void 0?await ht(C):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:E.Changed,timestamp:Date.now()},a);break}break;case E.Deleted:switch(s.type){case E.Deleted:return this.discardCore(i,t,a);case E.Changed:await this.spliceOperation(t,c,{...s,type:E.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case E.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(i,t),h=s.type===E.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),g=await l.workspace.fs.readFile(e.providerUri),p=as(br.decode(d),br.decode(h),br.decode(g),u.HEAD.sha);await this.writeFileCore(i,t,a,cl.encode(p.mergedContent),g!=null?g:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},r),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,i){let r;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:r}=await this.getWorkingOperation(t,a)),(r==null?void 0:r.type)===E.Deleted?this.resolveOpenCommand(e):((r==null?void 0:r.type)===E.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,i]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;I.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new La.ScopedChangeStore(this,e,this.workspaceId):new La.ScopedChangeStore(new La(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const i=F(n),r=this.cache.get(i);if((r==null?void 0:r.length)!==0)return this.lock.synchronizeRead(i,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===E.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new lt(`ChangeStore.readFile(${t.toString()})`);try{const i=this.providerService.getVirtualRootUri(t);if(i===void 0)return;const r=F(i),a=this.cache.get(r);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(r,()=>{const s=this.cache.get(r);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(i,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new lt(`ChangeStore.createDirectory(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,r===void 0?{type:E.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...r,timestamp:Date.now()},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new lt(`ChangeStore.deleteDirectory(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);if((r==null?void 0:r.type)===E.Created)return this.discardCore(e,t,i);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:E.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const i=new lt(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const r=F(n),a=this.cache.get(r);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(r,async()=>{const{path:s}=X(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case E.Changed:break;case E.Created:{if(Te(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case E.Deleted:{if(Te(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),h=e.findIndex(([g])=>g===d);h!==-1&&e.splice(h,1)}break}}return e},i.context)}finally{i.stop()}}async writeFile(t,e,n,i){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const a=new lt(`ChangeStore.writeFile(${t.toString()})`,{},e.length,i);try{const s=[];if(await this.lock.synchronizeWrite(F(r),async()=>this.writeFileCore(r,t,s,e,n,i),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,i,r,a){const s=new lt(`ChangeStore.writeFileCore(${e.toString()})`,{},i.length,a);try{const[{operation:c,index:u},d,h]=await Promise.all([this.getWorkingOperation(e,t),ht(i),ht(r)]);if(d===h&&(!c||(c==null?void 0:c.type)===E.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&h===(c==null?void 0:c.originalHash))return;const[{HEAD:g}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,i)]);await this.spliceOperation(e,u,c===void 0?{type:E.Changed,uri:e,fileType:l.FileType.File,revision:g.sha,timestamp:Date.now(),size:i.byteLength,hash:d,originalHash:h,conflicts:a,staged:!1}:{...c,revision:g.sha,timestamp:Date.now(),size:i.byteLength,hash:d,originalHash:h,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const i=new lt(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const r=[];if(await this.lock.synchronizeWrite(F(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),ht(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:E.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===E.Deleted?{...a,type:E.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:E.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},r)},i.context),r.length===0)return;this._onDidChange.fire(r)}finally{i.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new lt(`ChangeStore.deleteFile(${t.toString()})`);try{const i=[];if(await this.lock.synchronizeWrite(F(e),async()=>{const{operation:r,index:a}=await this.getWorkingOperation(t,e);if((r==null?void 0:r.type)===E.Created)return this.discardCore(e,t,i);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:E.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}findParent(t,e,n){const i=ze(t),{operation:r,index:a}=this.findWorkingOperation(i,e);return r!==void 0&&n(r,e)?{parent:r,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=_e(t);return this.findParent(t,e,(i,r)=>i.type===E.Created&&!r.some(a=>Te(a.uri,i.uri)&&_e(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let i=0;i<e.length;i+=1){const r=e[i];r.type===E.Deleted&&oe(t,r.uri)&&n.push({parent:r,parentIndex:i})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=_e(t);let i=-1;const r=e.find((a,s)=>_e(a.uri)!==n?!1:(i=s,!0));return r===void 0?{operation:void 0,index:-1}:{operation:r,index:i}}async getWorkingOperations(t){const e=F(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){I.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=F(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(i){throw this.cache.delete(n),I.error(i,`Failed to save repository changes for ${n}`),i}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw I.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){I.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===ll)return;throw I.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){I.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(i){throw I.error(i),this.telemetryService.sendException(i),i}}getFileStorageKey(t,e){return`changestore/${Ie(e)}`}async spliceOperation(t,e,n,i){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const a=await this.getWorkingOperations(r);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(r,a),i.push(ro(n,r,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,i)=>(n==="uri"||n.endsWith("Uri"))&&Q(i)?typeof i=="string"?l.Uri.parse(i):l.Uri.from(i):i);return Array.isArray(e)?e:e.operations}catch(e){throw I.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:La.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Ao=La;Ao.operationsStorageSchemaVersion=1,Ao.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,i=await this.changeStore.stat(this.stripUriScope(t));return i!==void 0&&n&&(i.permissions=l.FilePermission.Readonly),i}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,i){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,i)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},sl([Pn()],Ao.prototype,"getWorkingOperations",1);function dl(t){switch(t){case E.Changed:return l.l10n.t("Modified");case E.Created:return l.l10n.t("Added");case E.Deleted:return l.l10n.t("Deleted")}}o(dl,"getStatusText");function hl(t){const[e,n]=t;switch(e){case E.Changed:switch(n){case E.Changed:case E.Created:return l.l10n.t("Modified by Both");case E.Deleted:return l.l10n.t("Deleted by Incoming")}case E.Created:switch(n){case E.Changed:case E.Created:return l.l10n.t("Added by Both");case E.Deleted:return l.l10n.t("Deleted by Incoming")}case E.Deleted:switch(n){case E.Changed:case E.Created:return l.l10n.t("Deleted by Current");case E.Deleted:return l.l10n.t("Deleted by Both")}}}o(hl,"getConflictStatusText");class ss{constructor(e){this.providerService=e,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){const n=e.map(({uri:i})=>(this._decorations.delete(F(i)),i));setTimeout(()=>this._onDidChangeFileDecorations.fire(n),0)}async onDidChangeRepositories(e){for(const n of e.added){const i=await this.providerService.getSubmodules(n.uri);if(!!i)for(const[r,a]of i)this._submodules.add(r)}for(const n of e.removed)this._submodules.delete(F(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Ve.scheme)return;await Si(this.providerService,e);const i=F(e);let r=this._decorations.get(i);if(r!==void 0)return r!=null?r:void 0;const a=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let s;a.length>0&&(s=a.find(u=>F(u.uri)===i));const c=await this.providerService.changeStoreGetChange(e);if(c===void 0){if(s!==void 0)switch(s.type){case E.Created:r={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case E.Deleted:r={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case E.Changed:r={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:r={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(r={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(i,r!=null?r:null),r}if(c.conflicts)r={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",hl(c.conflicts.status))};else if(s!==void 0)switch(s.type){case E.Created:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case E.Deleted:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case E.Changed:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:r={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(c.type){case E.Created:r={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case E.Changed:r={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case E.Deleted:r={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(i,r!=null?r:null),r}}o(ss,"ScmDecorationProvider");const ls=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class cs{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:i,dictionaries:r,style:a,seed:s}=e;this.dictionaries=r,this.separator=i,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,i)=>{let r;e?(r=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,h)=>d+h,1),u=Math.floor(Number(c));return ls(u)}return ls(s)})(e),e=4294967296*r):r=Math.random();let a=i[Math.floor(r*i.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(cs,"a");const us={separator:"_",dictionaries:[]},fl=o(t=>{const e=[...t&&t.dictionaries||us.dictionaries],n={...us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new cs(n).generate()},"n");var gl=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],vl=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],pl=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],tc=null,nc=null,ic=null;class ds{static generate(e={}){let n=e.min||1,i=e.max||999;if(e.length){const r=Math.pow(10,e.length);return n=r/10,i=r-1,[`${Math.floor(Math.random()*(i-n))+n}`]}return[`${Math.floor(Math.random()*(i-n))+n}`]}}o(ds,"y");class Ro{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,r)=>{this.resolver=i,this.rejecter=r}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const i=this.task;return this.task=void 0,i()}})),this.timeout=setTimeout(()=>{var i;this.timeout=void 0,(i=this.resolver)==null||i.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Ro,"TaskDebouncer");class Fr{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Fr,"CommandQuickPickItem");var ao;(function(t){async function e(n,i,r,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),h=new Ro(500),g=[h],{defaultBranch:p,HEAD:C}=await n.getMetadata(i);async function O(ce){const[be,De,je,wt]=await Promise.all([n.getBranch(i,p.name),n.getBranches(i,{query:ce,limit:100}),n.getTags(i,{query:ce,limit:100}),n.getSnapshots(i)]),Ze=new Set,xt=new Set;for(const Xt of wt)Ze.add(Xt.hash),xt.add(Xt.branch.name);const Zt=((c==null?void 0:c.filterBranches)?De.branches.filter(c==null?void 0:c.filterBranches):De.branches).filter(Xt=>Xt.name!==p.name),Bt=l.l10n.t("Open indexed commit"),Mt=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:Bt}];if(ce!==void 0&&u){for(const Xt of u)if(Xt.identifier==="remoteHub.createBranch"||Xt.identifier==="remoteHub.createBranchFrom"){const Ei=Xt.commandArguments;if(!Ei)continue;const tr=Ei.findIndex(zr=>"uri"in zr);let nr;tr!==-1&&([nr]=Ei.splice(tr,1),nr.branch=ce,Ei.push(nr),Xt.commandArguments=Ei)}}return[...u,...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${Fe(C.sha)}${Ze.has(C.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:He.Commit,name:void 0,sha:C.sha,buttons:Ze.has(C.sha)?Mt:void 0}]:[],{label:`$(${(be==null?void 0:be.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${Fe(p.sha)}${xt.has(p.name)||Ze.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:He.Branch,name:void 0,sha:p.sha,buttons:xt.has(p.name)||Ze.has(p.sha)?Mt:void 0},...Zt.map(Xt=>({label:`$(${Xt.locked?"lock":"git-branch"}) ${Xt.name}`,description:`\u2022$(git-commit) ${Fe(Xt.commit)}${xt.has(Xt.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:He.Branch,name:Xt.name,sha:Xt.commit,buttons:xt.has(Xt.name)?Mt:void 0})),...je.tags.map(Xt=>({label:`$(tag) ${Xt.name}`,description:`\u2022$(git-commit) ${Fe(Xt.commit)}${Ze.has(Xt.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:He.Tag,name:Xt.name,sha:Xt.commit,buttons:Ze.has(Xt.commit)?Mt:void 0}))]}o(O,"getItems");const A=O(void 0);let G,te=!1;async function x(ce){G=void 0;const be=d.activeItems;d.items=ce!=null?ce:await A,te&&be.length!==0&&(d.activeItems=d.items.filter(De=>be.some(je=>je.label===De.label))),d.busy=!1}o(x,"setItems");try{return await new Promise(be=>{var De;g.push(d.onDidHide(()=>be(void 0)),d.onDidChangeValue(je=>{if(te=!1,je=je.trim(),(c==null?void 0:c.allowResetToSha)&&C.branch&&U(je)){x([{label:`Reset $(git-branch) ${C.branch.name} to $(git-commit) ${je}`,name:C.branch.name,sha:je,type:He.Branch}]);return}d.busy=!0;const wt=h.debounce(je?()=>O(je):()=>A);G===void 0&&(G=wt.then(async Ze=>x(Ze)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[je]=d.activeItems;be(je)}}),d.onDidTriggerItemButton(je=>{const wt=je.item;wt instanceof Fr||(wt.useIndex=!0),be(wt)})),d.title=a,d.placeholder=r,d.matchOnDescription=!0,d.ignoreFocusOut=(De=c==null?void 0:c.ignoreFocusOut)!=null?De:!0,d.busy=!0,d.show(),G=h.debounce(async()=>A,0).then(je=>x(je))})}finally{d.dispose(),g.forEach(ce=>void ce.dispose())}}o(e,"show"),t.show=e})(ao||(ao={}));const ml=new TextDecoder;class hs{constructor(e,n,i){this.providerService=e,this.openActionsService=n,this.telemetryService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(W.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:a})=>{const s=this.getScmProvider(z.getVirtualUri(a.uri));s!==void 0&&await this.updateStatusBarCommands(s,void 0)}),this.providerService.onDidSyncRepository(async({repository:a,syncing:s})=>{const c=this.getScmProvider(z.getVirtualUri(a.uri));c!==void 0&&(await this.updateStatusBarCommands(c,{syncing:s}),s===!1&&await this.update(a.uri))}),this.providerService.onDidRefresh(a=>{for(const s of a)this.update(s)}),this.providerService.onDidChangeChangeStore(a=>this.update(a[0].rootUri)),...this.registerCommands());const r=this.providerService.repositories;this.onRepositoriesChanged({added:r,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=W.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){W.changed(e,"staging")&&(this._staging=void 0,W.changed(e,"staging.enabled")&&this.refresh()),W.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const i=await this.update(n.uri);(i==null?void 0:i.repository)&&this._onDidOpenRepository.fire(i.repository)}if(e.removed.length)for(const n of e.removed){const i=this._scmProviders.findIndex(r=>F(r.sourceControl.rootUri)===F(n.uri));if(i!==-1){const r=this._scmProviders[i];r.repository&&this._onDidCloseRepository.fire(r.repository),r.sourceControl.dispose(),this._scmProviders.splice(i,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(fs(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(ka);if(c.length!==0){if(await Mo(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const i=this.getSourceControlFrom(e);if((i==null?void 0:i.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const r=await this.providerService.getChangeStore(i.rootUri).getChanges(i.rootUri);n||await Mo(r)?await this.providerService.getChangeStore(i.rootUri).discardAll(i.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const i of e)!ka(i)||(this.telemetryService.publicLog2("command.discardChanges"),await Mo([i])?(await this.providerService.getChangeStore(i.resourceUri).discard(i.resourceUri),await this.closeDiffEditors(n.rootUri,[i.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const i=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!i)for(const r of e)!ka(r)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(r.resourceUri).stage(r.resourceUri),await this.closeDiffEditors(i,[r.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const i=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!i)for(const r of e)!ka(r)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(r.resourceUri).unstage(r.resourceUri),await this.closeDiffEditors(i,[r.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!ka(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:i}=e;if(!!i)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(i.command,...(n=i.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const i of e)if(To(i)){const r=i,a=this.providerService.getChangeStore(r.resourceUri).resolveOpenCommand(r.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(i instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const r=i;await l.window.showTextDocument(r)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await kt("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await Fa(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(i===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const r=await this.providerService.getMetadata(i);if(r.accessLevel<Z.Write){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions"}),l.window.showErrorMessage(l.l10n.t("You don't have access to create branches on this repository."));return}let a,s=e==null?void 0:e.branch,c=!1;try{(!s||!ke(s))&&(s=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>xa(this.providerService,i,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let O;if(e==null?void 0:e.fromSha)O=e.fromSha,O==="HEAD"&&(O=r.HEAD.sha);else{const A=await ao.show(this.providerService,i,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!A){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}O=A.sha,c=Boolean(A.useIndex)}s&&O&&(a=await this.providerService.createBranch(i,s,O))}catch(O){I.error(O),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!a){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const u=await this.providerService.switchTo(i,{type:He.Branch,id:a});if(!u)return;const d=await this.providerService.getChangeStore(i).createChangeset(i);d&&await this.openActionsService.setChangesetToApply(u.uri,d);const h=l.l10n.t("Switch to Branch"),g=l.l10n.t("Open in New Window"),C=W.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,a),{modal:!0},h,g);!C||(u.location=C===g?Ne.NewWindow:Ne.CurrentWindow,c&&await W.setMode(u.uri,j.getIndexDefault(L.Branch)),await ct(this.providerService,u,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const i=l.window.activeTextEditor;if((i==null?void 0:i.document.languageId)!=="diff"){const r=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(r===void 0||r.length===0)return;n=ml.decode(await l.workspace.fs.readFile(r[0]))}else n=i.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const i of n){const r=this.getSourceControlFrom(i);if((r==null?void 0:r.rootUri)===void 0)return;let a;To(i)&&(a=i.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(r.rootUri).createPatch(r.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,i;const r=(n=e==null?void 0:e.uri)!=null?n:await Fa(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(r===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(r);if(e==null?void 0:e.commands)switch(s.accessLevel>=Z.Write&&a.push(new Fr(Tt({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:r}]}),!0),new Fr(Tt({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:r}]}),!0)),s.HEAD.type){case se.Branch:a.push(new Fr(Tt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case se.RemoteBranch:a.push(new Fr(Tt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case se.Tag:a.push(new Fr(Tt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case se.Commit:a.push(new Fr(Tt({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(i=s.HEAD.branch)==null?void 0:i.name,u=Boolean(c&&!await this.providerService.getChangeStore(r).hasChanges(r)),d=await ao.show(this.providerService,r,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?h=>h.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Fr?void d.execute():u&&d.type===He.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(r,{to:d.sha})}catch(h){I.error(h),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",Fe(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const h=await this.providerService.switchTo(r,d.name?{type:d.type,id:d.name}:void 0);if(h!==void 0){if(d.useIndex){const g=await this.providerService.getModeRefType(h.uri);await W.setMode(h.uri,j.getIndexDefault(g))}return ct(this.providerService,h)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await Fa(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(i!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(i,{force:!0}))}catch(r){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const r=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){r.push(s)}return r})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await Fa(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(i!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(i,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const i=(n=e==null?void 0:e.uri)!=null?n:await Fa(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(i!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(i)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),W.updateEffective("commitDirectlyWarning",nt.Off)})]}async sync(e,{pull:n,...i}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,i))}catch(r){if(qe.asVirtualProviderErrorCode(r)===Ae.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:Ue.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(qe.asVirtualProviderErrorCode(r)===Ae.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw I.error(r),this.telemetryService.sendException(r),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),r}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(i){if(qe.asVirtualProviderErrorCode(i)===Ae.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}I.error(i),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(i)}}async commitChangesCore(e,n){const i=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const r=new lt(`VirtualSourceControl.commitChanges(${i.toString()})`);let a;try{const s=await this.providerService.getMetadata(i);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const g=e.inputBox.value;if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(i,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!g){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let C,O;if(s.HEAD.type===se.RemoteBranch?(O=s.HEAD.branch.remote.accessLevel<Z.Write,C=O&&s.accessLevel<Z.Write):(C=s.accessLevel<Z.Write,O=C),u===void 0&&C&&(u=await this.providerService.getFork(i),u===void 0)){const A={title:l.l10n.t("Fork Repository")},G={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,G)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(i)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||O){if(u===void 0){const te={title:l.l10n.t("Commit to a New Branch")},x={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},te,x)!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const te=await this.providerService.getBranches(u?this.providerService.createVirtualUri(i,u):i,{query:"patch-"});for(const x of te.branches){const ce=/^patch-(?<num>\d+)$/.exec(x.name);if(ce==null?void 0:ce.groups){const be=Number(ce.groups.num);be>A&&(A=be)}}}catch{}const G=await xa(this.providerService,i,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${A+1}`);if(G&&(c=await this.providerService.createBranch(i,G,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(i,g,p,c,n,u),await this.closeDiffEditors(i,void 0)}catch(A){const G=qe.asVirtualProviderErrorCode(A);if(G===Ae.DetachedHEADError){const te={title:l.l10n.t("Commit to a New Branch")},x={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},te,x)!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const be=await xa(this.providerService,i,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(be&&(c=await this.providerService.createBranch(i,be,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(G===Ae.MergeConflictError){const te={title:l.l10n.t("Pull")},x={title:l.l10n.t("Sync (Pull & Push)")},ce={title:l.l10n.t("Cancel"),isCloseAffordance:!0},be=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},te,x,ce);if(be!==te&&be!==x){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(i,{pull:be===te,conflictResolution:Ue.Merge}),be===te){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(G===Ae.CommitToProtectedBranchError){const te={title:l.l10n.t("Commit to a New Branch")},x={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?te:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},te,x))!==te){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const De=await xa(this.providerService,i,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(De&&(c=await this.providerService.createBranch(i,De,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else throw I.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(i).discardAll(i,{staged:d}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:d}),Lo(Xr.HasCommitted,!0),!u&&!c)return;async function h(){if(u){const A={title:l.l10n.t("Switch to Fork")},G={title:l.l10n.t("Cancel"),isCloseAffordance:!0},te=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,G);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(te===A)}),te===A){let x;c!==void 0?x={type:He.Branch,id:c}:s.HEAD.branch!==void 0&&(x={type:He.Branch,id:s.HEAD.branch.name}),ct(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(i,{repo:u.repo,ref:x}),location:Ne.CurrentWindow})}return}const g={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},C=W.get("switchToCreatedBranch")==="always",O=C?g:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},g,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(O===g),autoConfirm:String(C)}),O===g&&ct(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(i,{repo:s.repo,ref:c?{type:He.Branch,id:c}:void 0}),location:Ne.CurrentWindow})}o(h,"showSwitchToPrompt"),h.call(this)}finally{r.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(i){const r=qe.asVirtualProviderErrorCode(i);if(r===Ae.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(r===Ae.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}I.error(i),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(i)}}async createPullRequestCore(e,n){var i;const r=e.rootUri,a=(i=n==null?void 0:n.draft)!=null?i:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new lt(`VirtualSourceControl.createPullRequest(${r.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const h=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(r,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const g=e.inputBox.value;if(!g){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(r);let C,O;p.HEAD.type===se.RemoteBranch?(O=p.HEAD.branch.remote.accessLevel<Z.Write,C=O&&p.accessLevel<Z.Write):(C=p.accessLevel<Z.Write,O=C);let A=n==null?void 0:n.fork;if(A===void 0&&C&&(A=await this.providerService.getFork(r),A===void 0)){const je={title:l.l10n.t("Fork Repository")},wt={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},je,wt)!==je){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(r)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const G=g.trimStart().split(`
`),te=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:G[0]});if(!te){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function x(je){let wt=0;try{const Zt=await this.providerService.getBranches(A?this.providerService.createVirtualUri(r,A):r,{query:"patch-"});for(const Bt of Zt.branches){const Mt=/^patch-(?<num>\d+)$/.exec(Bt.name);if(Mt==null?void 0:Mt.groups){const Xt=Number(Mt.groups.num);Xt>wt&&(wt=Xt)}}}catch{}const Ze=await xa(this.providerService,r,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),`patch-${wt+1}`);let xt;return Ze&&(xt=await this.providerService.createBranch(r,Ze,je,A)),xt}o(x,"createBranch");const ce=await x.call(this,p.HEAD.sha);if(!ce){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(r,g,d,ce,void 0,A);const be=await this.providerService.createPullRequest(r,ce,te,G.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(r).discardAll(r,{staged:h}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:h}));async function De(){const je={title:l.l10n.t("Switch to Pull Request")},wt={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Ze=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",be.id,p.name),{modal:!0},je,wt);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(Ze===je)}),Ze===je&&ct(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(r,{repo:p.repo,ref:{type:He.PullRequest,id:be.id}}),location:Ne.CurrentWindow})}o(De,"showSwitchToPrompt"),De.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const i=await this.providerService.getMetadata(e),r=await this.createOrUpdateScmProvider(e,n.name),a=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:h=>h.fileType===l.FileType.File}),s=await Promise.all(a.conflicts.map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,h.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",fe(h.uri)))}))),c=o(h=>this.providerService.createVirtualUri(z.getProviderId(h),{repo:i.repo,ref:{type:He.Commit,id:i.HEAD.sha}},this.providerService.getRelativeFilePath(h)),"getOriginalVirtualUri"),u=await Promise.all(a.staged.map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,c(h.uri),l.l10n.t("{0} (Index)",fe(h.uri)))}))),d=await Promise.all(a.working.map(async h=>({type:h.type,resourceUri:h.uri,decorations:{strikeThrough:h.type===E.Deleted},command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,c(h.uri),l.l10n.t("{0} (Working Tree)",fe(h.uri)))})));return r.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(r).resourceStates=s,this.ensureStagedChangesGroup(r).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(r).resourceStates=this.staging.enabled?d:[...u,...d],r}ensureActionButton(e){var n,i;const r=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:r!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",r):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(i=this.providerService.changeStoreMaybeHasChanges(e))!=null?i:!0}}async createOrUpdateScmProvider(e,n){var i,r;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:h=>z.getProviderUri(h)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=Z.Write||((r=(i=a.HEAD.branch)==null?void 0:i.remote)==null?void 0:r.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=Z.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),W.get("commitDirectlyWarning")===nt.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(W.get("commitDirectlyWarning")===nt.Auto&&Ds(Xr.HasCommitted))return;const h=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name));return h.isTrusted=!0,h.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${l.l10n.t("Hide")}')`),{message:h,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,i){var r,a,s,c,u;const d=e.sourceControl.rootUri;i=i!=null?i:await this.providerService.getMetadata(d);const{HEAD:h}=i,g=await this.providerService.getIndexMetadata(d),p=(g==null?void 0:g.type)===dn.Active,C=(g==null?void 0:g.type)===dn.Active,O=dn.hasIndex(g==null?void 0:g.type),A=await this.providerService.getChangeStore(d).hasChanges(d),G=(a=h.type===se.Branch&&((r=await this.providerService.getBranch(d,h.branch.name))==null?void 0:r.locked)?"$(lock)":void 0)!=null?a:sn(h.type),te=[];if(te.push(Tt({command:"remoteHub.switchToBranch",title:`${G} ${h.name}${A?"*":""}`,tooltip:`${Fe(h.sha)}`,arguments:[{uri:d,commands:!0}]})),h.detached||((n==null?void 0:n.syncing)?te.push(Tt({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):te.push(Tt({command:"remoteHub.sync",title:`$(sync)${((c=(s=i.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=i.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||C?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),i.pullRequest&&te.push(Tt({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${i.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,i.pullRequest.id,i.provider.name,i.pullRequest.title),arguments:[{provider:i.provider,repo:i.repo,pullRequest:{id:i.pullRequest.id}}]})),O){const x=this.providerService.getIndexProvider(d);x&&te.push(...await x.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=te}ensureMergeConflictsGroup(e){const n="conflicts";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),i.hideWhenEmpty=!0,e.groups.push(i)),i}ensureStagedChangesGroup(e){const n="staged";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),i.hideWhenEmpty=!0,e.groups.push(i)),i}ensureWorkingChangesGroup(e){const n="changes";let i=e.groups.find(r=>r.id===n);return i===void 0&&(i=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(i)),i}getScmProvider(e){const n=F(e);return this._scmProviders.find(i=>F(i.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(yl(e))n=e;else if(fs(e)){const i=e,r=this._scmProviders.find(a=>a.groups.find(s=>s.id===i.id));n=r==null?void 0:r.sourceControl}else if(To(e)){const i=e,r=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===i.resourceUri.toString())));n=r==null?void 0:r.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const r=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===z.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&r.push(a)}await l.window.tabGroups.close(r,!0)}}o(hs,"VirtualSourceControl");function yl(t){return"rootUri"in t&&"inputBox"in t}o(yl,"isSourceControl");function fs(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(fs,"isSourceControlResourceGroup");function To(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(To,"isSourceControlResourceState");function ka(t){return"type"in t}o(ka,"isTrackedChange");async function Mo(t){var e,n,i;if(t.length===0)return!0;let r,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===E.Created?(r=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,fe((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===E.Deleted?(a=l.l10n.t("Restore file"),r=l.l10n.t("Are you sure you want to restore {0}?",fe((n=c.resourceUri)!=null?n:c.uri))):r=l.l10n.t("Are you sure you want to discard changes in {0}?",fe((i=c.resourceUri)!=null?i:c.uri))}else t.every(c=>c.type===E.Created)?r=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===E.Deleted)?(a=l.l10n.t("Restore files"),r=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):r=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(r,{modal:!0},a)===a}o(Mo,"confirmDiscard");async function Fa(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const i=await l.window.showQuickPick(t.map(({sourceControl:r})=>({label:r.label,uri:r.rootUri})),{placeHolder:e,title:n});if(!!i)return i.uri}o(Fa,"getOrPickRootUri");async function xa(t,e,n,i,r,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!ke(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(g=>g.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=i,c.title=r,c.value=wl(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(xa,"getBranchNameWithPrompt");function wl(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const i=Sl();return`${n}${i}`}return`${n}${t!=null?t:""}`}o(wl,"generateBranchName");function Sl(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const i of e)i.toLowerCase()==="adjectives"&&n.push(gl),i.toLowerCase()==="animals"&&n.push(vl),i.toLowerCase()==="colors"&&n.push(pl),i.toLowerCase()==="numbers"&&n.push(ds.generate({length:3}));return n.length===0?"":fl({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(Sl,"generateRandomBranchName");class _r extends l.TimelineItem{static is(e){return e instanceof _r}constructor(e,n,i,r,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=i.message.indexOf(`
`),h=d!==-1?`${i.message.substring(0,d)} \u2026`:i.message,g=a==="authored"?i.authorDate:i.commitDate;super(h,(u=g==null?void 0:g.getTime())!=null?u:0);this.id=i.hash,this.contextValue=`${z.scheme}:${n}:file:commit`,this.command=r,s&&(this.description=i.authorName),this.tooltip=Cl(i,c,g),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=i.hash,this.parents=i.parents,this.message=i.message}}o(_r,"CommitTimelineItem");function Cl(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,Fe(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,Fe(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,Fe(t.hash),e.format(n),t.message)}o(Cl,"getCommitTooltip");class Zr extends l.TimelineItem{static is(e){return e instanceof Zr}constructor(e,n,i,r,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,i.timestamp);this.id="index",this.contextValue=`${z.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(i.timestamp)),dl(i.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=r,this.message=c}}o(Zr,"ChangeOperationTimelineItem");class gs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new Ro(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),W.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);!e.some(i=>F(i)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);(e.added.some(i=>F(i.uri)===n)||e.removed.some(i=>F(i.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||F(this.rootUri)!==F(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=F(this.rootUri);e.some(i=>F(i.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,i){var r;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const O of this.providerService.repositories)if(O.uri.path===this.rootUri.path){this.rootUri=O.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||i.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||i.isCancellationRequested)return{items:[]};const u=((r=c.paging)==null?void 0:r.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=W.getAny("git.timeline.date",void 0,"committed"),g=W.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async O=>new _r(this.rootUri,s.provider.id,O,await this.resolveDiffCommand(O,s,e,a),{dateType:h,showAuthor:g,dateFormatter:d}))),C=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(C&&Boolean(C.staged&&W.get("staging.enabled"))){const A=new Zr(this.rootUri,s.provider.id,C,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(C.uri,z.getProviderUri(C.uri),l.l10n.t("{0} (Index)",fe(C.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return I.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Ve.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,i,r)=>{!_r.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,i,r)=>{!_r.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,i,r)=>{var a;!_r.is(n)&&!Zr.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,i,r)=>{!i||!_r.is(n)&&!Zr.is(n)||(e={uri:i,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,i,r)=>{if(!i||!e||!_r.is(n)&&!Zr.is(n)||F(i)!==F(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,i),c=await this.providerService.getMetadata(n.rootUri),u=fe(i),d=a.parents[0];let h;d===void 0?h=l.l10n.t("{0} ({1})",u,Fe(n.hash)):a.hash===""?h=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?h=l.l10n.t("{0} (Index)",u):h=l.l10n.t("{0} ({1})",u,Fe(a.hash));let g=a.hash===""||a.hash==="~"?i:this.providerService.createProviderUri(i,{repo:c.repo,ref:{type:He.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(g=g.with({query:"~"}));const p=n.parents[0];let C;p===void 0?C=l.l10n.t("{0} ({1})",u,Fe(n.hash)):p==="~"&&n.hash===""?C=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?C=l.l10n.t("{0} (Index)",u):C=l.l10n.t("{0} ({1})",u,Fe(n.hash));const O=l.l10n.t("{0} \u27F7 {1}",h,C),A=n.hash===""||n.hash==="~"?i:this.providerService.createProviderUri(i,{repo:c.repo,ref:{type:He.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",g,A,O)})]}async resolveDiffCommand(e,n,i,r,a){const s=fe(i);let c=e.parents[0],u=this.providerService.createProviderUri(i,{repo:n.repo,ref:{type:He.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},r);try{await this.providerService.stat(u)}catch(g){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,Fe(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,Fe(c),Fe(e.hash)),c===void 0&&(u=u.with({query:"~"}));const h=e.hash===""||e.hash==="~"?i:this.providerService.createProviderUri(i,{repo:n.repo,ref:{type:He.Commit,id:e.hash}},r);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,h,d,a]}}async openOnRemote(e){if(!_r.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await kt("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(gs,"VirtualTimelineProvider");class vs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const i=new lt(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Si(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let r,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":r=decodeURIComponent(d);break;case"location":a=d===Ne.CurrentWindow?Ne.CurrentWindow:Ne.NewWindow;break}}if(!r){i.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}r=r.trim(),a=a!=null?a:Ne.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(r,void 0,a);if(!s){i.log({message:`: Unable to open workspace for ${r}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});return}i.log({message:`: Opening ${r} in ${a}`}),ct(this.providerService,s);break}case"/open-files":{let r;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){r=decodeURIComponent(u);break}}if(!r){i.log({message:": Unable to find url parameter"});return}r=r.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(r);if(!a){i.log({message:`: Unable to open files/folders for ${r}`});return}a.filesToOpen?(i.log({message:`: Opening files/folders for ${r}`}),await((n=lo())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):i.log({message:`: No files/folders found to open for ${r}`});break}default:{i.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{i.stop()}}}o(vs,"RemoteUriHandler");var bl=Object.defineProperty,_l=Object.getOwnPropertyDescriptor,El=o((t,e,n,i)=>{for(var r=i>1?void 0:i?_l(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&bl(e,n,r),r},"view_decorateClass"),ha;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(ha||(ha={}));const ps=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof ps}get id(){}toString(){return`${I.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let fa=ps;El([Pn((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],fa.prototype,"triggerChange",1);class ms{constructor(e,n,i,r){this.id=e,this.name=n,this.providerService=i,this.telemetryService=r,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(I.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),h=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${h!==void 0?`
parent: ${h.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${h!==void 0?`\\
parent: \`${h.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!W.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(W.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Si(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,i;await((i=(n=this.root)==null?void 0:n.refresh)==null?void 0:i.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,i=!1){var r;const a=await((r=e.refresh)==null?void 0:r.call(e,n));!i&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(i){I.error(i)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){I.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=W.get("views")[this.configKey]),this._config}}o(ms,"View");class ys extends fa{constructor(e,n,i,r,a,s,c){super(e,n);this._message=i,this._description=r,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:ha.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(ys,"MessageNode");var Dl=Object.defineProperty,Al=Object.getOwnPropertyDescriptor,Po=o((t,e,n,i)=>{for(var r=i>1?void 0:i?Al(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(r=(i?s(e,n,r):s(r))||r);return i&&r&&Dl(e,n,r),r},"workspaceRepositoriesView_decorateClass");const ws=o(class extends fa{constructor(t,e,n,i,r,a,s){super(t,e);this.changeStore=n,this.canonical=i,this.workspaceRepository=r,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Na.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return ws.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${ha.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&W.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const i=z.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index)",fe(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",fe(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:i}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),r=this.view.providerService.createProviderUri(this.operation.uri,{repo:i,ref:{type:He.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index of {1})",fe(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",fe(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ss=ws;Ss.key=":changes";const Cs=o(class extends fa{constructor(t,e,n,i,r){super(t,e);this.canonical=n,this.workspaceRepository=i,this.root=r}static getId(t,e){return`${oo.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Cs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Ss(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Li(this.workspaceRepository),n=Ve.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,i=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return i.id=this.id,i.contextValue=`${ha.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,i.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Cn(this.workspaceRepository.timestamp,{ago:!0})}`,i.iconPath=t?new l.ThemeIcon("check"):this.root?Es(this.canonical.provider.id):In(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),i.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Rl(this.workspaceRepository.ref.type),sn(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",Cn(this.workspaceRepository.timestamp,{ago:!0}),Qi(this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(i.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),i}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Na=Cs;Na.key=":wsrepo",Po([Pn()],Na.prototype,"refresh",1);const bs=o(class extends fa{constructor(t,e,n,i){super(t,e);this.canonical=n,this.workspaceRepositories=i}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return bs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new ys(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Na(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=ha.WorkspaceRepositories,e.iconPath=Es(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let oo=bs;oo.key=":wsrepos",Po([Pn()],oo.prototype,"refresh",1);class Io extends fa{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[i,r]of e){const a=l.Uri.parse(i);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:r.some(d=>d.workspaceId===this.view.workspaceId)};r.length===1?n.push(new Na(this.view,this,u,r[0],!0)):n.push(new oo(this.view,this,u,r))}catch(s){if(s instanceof Hn)continue;I.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(Io,"WorkspaceRepositoriesViewNode"),Po([Pn()],Io.prototype,"refresh",1);class _s extends ms{constructor(e,n,i){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,i);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(r,a)=>{if(!(r.scheme!=="remotehub-view"||r.authority!=="wsrepo"||!r.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new Io(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),ct(this.providerService,{name:e.name,uri:e.uri,location:Ne.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),ct(this.providerService,{name:e.name,uri:e.uri,location:Ne.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=F(this.providerService.getVirtualCanonicalRootUri(e.uri)),i=this.providerService.repositories.filter(a=>F(a.canonicalUri)===n);return await Tl(i,l.l10n.t("Choose a repository to apply the changeset to"))}}o(_s,"WorkspaceRepositoriesView");function Rl(t,e){switch(t){case se.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case se.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case se.Tag:return l.l10n.t("Tag");case se.Commit:return l.l10n.t("Commit")}}o(Rl,"headTypeToString");function Es(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(Es,"providerToIconPath");async function Tl(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(i=>({label:i.name,description:i.provider.name,repository:i})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(Tl,"getRepository");let so;function lo(){return so}o(lo,"getOpenActionsService");var Xr;(function(t){t.HasCommitted="has:committed",t.Version="version"})(Xr||(Xr={}));let co;function Ds(t){return co.globalState.get(t)}o(Ds,"getState");async function Lo(t,e){return co.globalState.update(t,e)}o(Lo,"updateState");let As=!1;function Ml(){return As}o(Ml,"isPreRelease");async function Pl(t){co=t,ee.configure("remoteHub",t),I.configure(t,"Remote Repositories",W.get("logLevel")),lt.start("Time to root directory",{log:!1});const e=Yt.configure(t),n=new Di(t),i=t.extension.packageJSON.version;await Lo(Xr.Version,i),await t.workspaceState.update(Xr.Version,i);const[,r]=co.extension.packageJSON.version.split(".");As=Number.parseInt(r)%2==1;try{const a=new Ve(n,t.workspaceState);so=new Ta(a);const s=new hs(a,so,n),c=new Qa(a);return typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(z.scheme,new Ir(a))),t.subscriptions.push(W.onDidChange(u=>{!W.changed(u,"logLevel")||(I.logLevel=W.get("logLevel"))}),a.onDidChangeRepositories(async u=>{for(const d of u.added)try{const h=await d.getMetadata(),{HEAD:g,defaultBranch:p,name:C,provider:O,pullRequest:A}=h,G=g.name.replace(/\//g,"\u2009\u2215\u2009");let te=" ";if(A!==void 0)te=` (PR ${A.id}) `;else if(g.type===se.Tag)te=` (${G}) `;else if(g.type===se.Commit)te=` (${G}) `;else if(g.type===se.Branch||g.type===se.RemoteBranch){const ce=g.branch.name.replace(/\//g,"\u2009\u2215\u2009");g.branch.name!==p.name&&(te=` (${ce}) `)}const x={uri:d.uri,type:"folder",label:`${C}${te}[${O.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",x)}catch(h){I.error(h,"Failed to add repository to recently opened")}}),new ss(a),new kr(a),new vs(a,n),...dt(a,t.extension.id,n),...kl(a,n),...await Il(a,s,t,n),new gs(a),new _s(a,e,n),s,so,a,n),n.publicLog2("activate"),Promise.resolve(c)}catch(a){throw I.error(a),a}}o(Pl,"activate");async function Il(t,e,n,i){const r=[];if(Rs()){const a=new q(t,i);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),r.push(a)}return r.push(Ll(t,e)),r}o(Il,"registerProviders");function Ll(t,e){async function n(){var r;try{let a=(r=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?r:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(I.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(g=>{const p=l.extensions.onDidChange(()=>{var C;a=(C=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?C:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),g())})})),I.log("[ GHPR] Registering..."),en(it.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(g=>d(g));async function d(g){const p=g.added.filter(C=>C.provider.id==="github");if(p.length!==0){I.log("[ GHPR] Checking for opened PRs...");for(const C of p){const O=await t.getBestRemoteUri(C.uri,fi.PullRequest);if(!!O){u.dispose(),I.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",O.toString());return}}I.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),I.log("[ GHPR] Registration complete");const h=t.repositories;return h.length&&d({added:h,removed:[]}),l.Disposable.from(c,u)}catch(a){return I.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const i=n();return l.Disposable.from({dispose:async()=>{var r;return void((r=await i)==null?void 0:r.dispose())}})}o(Ll,"registerGitHub");function kl(t,e){if(!Rs())return[];e.publicLog2("codex.enableRichNav",{});const n=new Kn(t);return[n,n.register(new Le(e)),...Le.createStatus()]}o(kl,"registerNavigationServiceProviders");function Rs(){return l.env.uiKind===l.UIKind.Desktop||W.get("richNavigation.enabled")===!0}o(Rs,"isRichNavEnabled");const ko=new Map,Fo=new Map;async function Si(t,e){var n,i,r;if(e!==void 0&&typeof e!="string"&&(e=Ve.getProviderId(e)),e&&Fo.has(e)){const a=Fo.get(e);if(!a)return;await ko.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!["github.remotehub","ms-vscode.azure-repos"].includes(s.toLowerCase()))continue;const u=ko.get(s),d=(i=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?i:[],h=d.find(p=>p===e)!==void 0,g=d.length&&e===void 0;if(!u&&(g||h)){const p=(r=l.extensions.getExtension(s))==null?void 0:r.activate().then(C=>C.registerVirtualProviderService(t));if(p===void 0)return;ko.set(s,p);for(const C of d)Fo.set(C,s);if(await p,e!==void 0&&h)return}else u&&await u}}o(Si,"ensureProvidersRegistered")})(),module.exports=fo})();
